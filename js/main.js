!function e(l,i,s){function n(d,t){if(!i[d]){if(!l[d]){var r="function"==typeof require&&require;if(!t&&r)return r(d,!0);if(a)return a(d,!0);var o=new Error("Cannot find module '"+d+"'");throw o.code="MODULE_NOT_FOUND",o}var c=i[d]={exports:{}};l[d][0].call(c.exports,function(e){var i=l[d][1][e];return n(i?i:e)},c,c.exports,e,l,i,s)}return i[d].exports}for(var a="function"==typeof require&&require,d=0;d<s.length;d++)n(s[d]);return n}({1:[function(e,l,i){"use strict";var s=e("./weeks");$(window).ready(function(){function e(e){var l=e?moment().week(e):moment(),i=l.isoWeekday(1).format("DD"),s=l.isoWeekday(7).format("DD"),n=l.format("MM");$(".item-week").html("Week "+i+"-"+s+"."+n)}var l=void 0;$(".on-btn").click(function(){if("none"==(l=document.getElementById("box").style.display)){document.getElementById("box").style.display="block",$(".flexslider").flexslider({animation:"slide",slideshow:!1,controlNav:!1,controlsContainer:$(".custom-controls-container"),customDirectionNav:$(".custom-navigation a"),keyboard:!1,animationLoop:!0,after:function(e){e.currentSlide==e.last&&((0,s.addLastWeekSlide)($(".flexslider")),console.log("last transition ended"))}});var e=moment().isoWeekday(),i=void 0;switch(e){case 1:i=".monday";break;case 2:i=".tuesday";break;case 3:i=".wednesday";break;case 4:i=".thursday";break;case 5:i=".friday";break;case 6:i=".saturday";break;case 7:i=".sunday"}(0,s.initSlider)($(".flex-active-slide").find(i))}else"block"==l&&(document.getElementById("box").style.display="none")}),$(".close-button").click(function(){document.getElementById("box").style.display="none"}),$(".switch-on").click(s.daytimeSliderChanges),$(".switch-off").click(s.daytimeSliderChanges);var i=moment().week(),n=moment().week();e(n),n==i?($(".flex-prev").hide(),$(".flex-prev-block").show()):($(".flex-prev-block").hide(),$(".flex-prev").show()),$(".flex-next").click(function(){$(".flex-prev").show(),$(".flex-prev-block").hide(),n==i?n=i+1:n==a?n=a+1:n+=1,e(n)});var a,d=n;$(".flex-prev").click(function(){if(n==i)return!1;n-=1,d=n,d==i?($(".flex-prev").hide(),$(".flex-prev-block").show()):($(".flex-prev").show(),$(".flex-prev-block").hide()),e(n),a=n}),$(".add-button").click(function(){(0,s.addHandle)()});var t=null;$(".del-button").mousedown(function(){console.log("delete"),console.log($(":focus")),t=$(":focus").hasClass("ui-slider-handle")?$(":focus"):null}),$(".del-button").click(function(){t&&(0,s.deleteHandle)(t)})})},{"./weeks":2}],2:[function(e,l,i){"use strict";function s(e){if(Array.isArray(e)){for(var l=0,i=Array(e.length);l<e.length;l++)i[l]=e[l];return i}return Array.from(e)}function n(e,l){return l&&(console.log("filtering...",e),e=e.filter(function(e){return e<=14&&e>=4})),console.log(e),e}function a(e){var l=23-(moment().hour()+1);return e&&(l<4?l=4:l>14&&(l=14)),l}function d(e,l){l=l?n(l,f):[a(f)],e.slider({orientation:"vertical",min:f?4:0,max:f?14:23,values:l,step:1,animate:!0,start:function(e,l){var i=23-l.value;u.text(i),u.show(),u.css("top",l.handle.getBoundingClientRect().top-10),u.css("left",l.handle.getBoundingClientRect().left+30)},slide:function(e,l){var i=[];console.log(l.values);for(var s=0;s<l.values.length;s++){if(i.indexOf(l.values[s])>-1)return!1;i.push(l.values[s])}var n=23-l.value;u.text(n),u.css("top",l.handle.getBoundingClientRect().top-10),u.css("left",l.handle.getBoundingClientRect().left+30),$(".contentSlider").html(n+" hour")},stop:function(){u.hide()}}),console.log("VALUES",l),0==l.length?e.removeClass("active-slider"):e.addClass("active-slider")}function t(){return $(".flexslider .slides .item:not(.clone)")}function r(e){var l=e.data("flexslider"),i=$('<li class="item">\n                                <div class="item-week">\n                                </div>\n                                <div class="scale-wrapper">\n                                    <ul class="list-scale-wrap">\n                                        <li class="times-wrap-left">\n                                            <div class="time-min">00</div>\n                                            <div class="time-max">24</div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Mon</div>\n                                            <div class="add-times-left">\n                                                <div class="default-wrap">\n                                                    <div class="monday default-slider slide-active"></div>\n                                                </div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Tue</div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider  tuesday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Wed</div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider wednesday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Th</div>\n                                            <div></div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider thursday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Fr</div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider  friday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Sat</div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider  saturday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Sun</div>\n                                            <div class="add-times-right">\n                                                <div class="default-wrap">\n                                                    <div class="default-slider  sunday"></div>\n                                                </div>\n                                            </div>\n                                        </li>\n                                        <li class="times-wrap-right">\n                                            <div class="time-min">00</div>\n                                            <div class="time-max">24</div>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </li>');l.addSlide(i)}function o(){f?($(".switch-on").removeClass("active"),$(".switch-off").addClass("active"),$(".default-wrap").addClass("slide-wrap"),$(".default-slider").addClass("slider"),$(".slider").removeClass("default-slider"),$(".slider").slider({min:0,max:23}),f=!1):0==f&&($(".switch-off").removeClass("active"),$(".switch-on").addClass("active"),$(".slide-wrap").addClass("default-wrap"),$(".default-wrap").removeClass("slide-wrap"),$(".slider").addClass("default-slider"),$(".default-slider").removeClass("slider"),f=!0,$(".default-slider.active-slider").each(function(e,l){var i=$(l).slider("values");$(l).slider("destroy"),d($(l),i)})),console.log($(".flex-active-slide .active-slider").slider("values"))}function c(){var e=$(".flex-active-slide"),l=e.find(".monday"),i=[];if(i=f?[4,5,6,7,8,9,10,11,12,13,14]:[].concat(s(new Array(24).keys())),l.hasClass("active-slider")){var n=l.slider("value"),a=l.slider("values");console.log(n,a);var t=a[a.length-1]-1;if(a.indexOf(t)===-1&&i.indexOf(t)!==-1)a.push(a[a.length-1]-1);else{i=i.filter(function(e){return a.indexOf(e)==-1});var r=i.randomElement();void 0!=r&&a.push(r),console.log(a)}l.slider("destroy"),d(l,a)}else d(l),l.addClass("active-slider");l.find(".ui-slider-handle:last").focus()}function v(e){console.log(e);var l=e.parent(),i=l.find(".ui-slider-handle").index(e),s=l.slider("values");console.log("old values",s),console.log(i),s.splice(i,1),console.log("new values",s),l.slider("destroy"),d(l,s)}Object.defineProperty(i,"__esModule",{value:!0}),i.initSlider=d,i.getItems=t,i.addLastWeekSlide=r,i.daytimeSliderChanges=o,i.addHandle=c,i.deleteHandle=v,Array.prototype.randomElement=function(){return this[Math.floor(Math.random()*this.length)]};var u;$(window).ready(function(){$("body").append('<div id="slider-popup"></div>'),u=$("#slider-popup")});var f=!0},{}]},{},[1]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZSIsInQiLCJuIiwiciIsInMiLCJvIiwidSIsImEiLCJyZXF1aXJlIiwiaSIsImYiLCJFcnJvciIsImNvZGUiLCJsIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiX3dlZWtzIiwiJCIsIndpbmRvdyIsInJlYWR5Iiwic2V0V2Vla1RleHQiLCJ3ZWVrIiwibSIsIm1vbWVudCIsIm1vbmRheSIsImlzb1dlZWtkYXkiLCJmb3JtYXQiLCJzdW5kYXkiLCJ0aGlzTW9udGgiLCJodG1sIiwiZGlzcGxheSIsImNsaWNrIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiZmxleHNsaWRlciIsImFuaW1hdGlvbiIsInNsaWRlc2hvdyIsImNvbnRyb2xOYXYiLCJjb250cm9sc0NvbnRhaW5lciIsImN1c3RvbURpcmVjdGlvbk5hdiIsImtleWJvYXJkIiwiYW5pbWF0aW9uTG9vcCIsImFmdGVyIiwiY3R4IiwiY3VycmVudFNsaWRlIiwibGFzdCIsImFkZExhc3RXZWVrU2xpZGUiLCJjb25zb2xlIiwibG9nIiwiZGF5IiwiYWN0aXZlRWxlbSIsImluaXRTbGlkZXIiLCJmaW5kIiwiZGF5dGltZVNsaWRlckNoYW5nZXMiLCJ0aGlzV2VlayIsImhpZGUiLCJzaG93IiwicHJldldlZWsiLCJ0aGVXZWVrIiwiYWRkSGFuZGxlIiwiZm9jdXNFbGVtIiwibW91c2Vkb3duIiwiaGFzQ2xhc3MiLCJkZWxldGVIYW5kbGUiLCIuL3dlZWtzIiwiMiIsIl90b0NvbnN1bWFibGVBcnJheSIsImFyciIsIkFycmF5IiwiaXNBcnJheSIsImFycjIiLCJmcm9tIiwiZmlsdGVyVmFsdWVzIiwidmFsdWVzIiwiZGF5dGltZV9vbiIsImZpbHRlciIsInYiLCJnZXREZWZhdWx0VmFsdWUiLCJ2YWx1ZSIsImhvdXIiLCJzZWxlY3RvciIsInNsaWRlciIsIm9yaWVudGF0aW9uIiwibWluIiwibWF4Iiwic3RlcCIsImFuaW1hdGUiLCJzdGFydCIsInVpIiwic2xpZGVyUG9wdXAiLCJ0ZXh0IiwiY3NzIiwiaGFuZGxlIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwibGVmdCIsInNsaWRlIiwiZGlmZlZhbHVlcyIsImluZGV4T2YiLCJwdXNoIiwic3RvcCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJnZXRJdGVtcyIsImRhdGEiLCJ0ZW1wbGF0ZSIsImFkZFNsaWRlIiwiZWFjaCIsImVsIiwiYWN0aXZlIiwicG9zc2libGVBcnIiLCJjb25jYXQiLCJrZXlzIiwicG9zc2libGVOZXdWYWx1ZSIsIm51bSIsIm5ld1ZhbHVlIiwicmFuZG9tRWxlbWVudCIsInVuZGVmaW5lZCIsImZvY3VzIiwiJHNsaWRlciIsInBhcmVudCIsImhhbmRsZUluZGV4IiwiaW5kZXgiLCJzcGxpY2UiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInByb3RvdHlwZSIsInRoaXMiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJhcHBlbmQiXSwibWFwcGluZ3MiOiJDQUFBLFFBQVVBLEdBQUVDLEVBQUVDLEVBQUVDLEdBQUcsUUFBU0MsR0FBRUMsRUFBRUMsR0FBRyxJQUFJSixFQUFFRyxHQUFHLENBQUMsSUFBSUosRUFBRUksR0FBRyxDQUFDLEdBQUlFLEdBQWtCLGtCQUFUQyxVQUFxQkEsT0FBUSxLQUFJRixHQUFHQyxFQUFFLE1BQU9BLEdBQUVGLEdBQUUsRUFBSSxJQUFHSSxFQUFFLE1BQU9BLEdBQUVKLEdBQUUsRUFBSSxJQUFJSyxHQUFFLEdBQUlDLE9BQU0sdUJBQXVCTixFQUFFLElBQUssTUFBTUssR0FBRUUsS0FBSyxtQkFBbUJGLEVBQUUsR0FBSUcsR0FBRVgsRUFBRUcsSUFBSVMsV0FBWWIsR0FBRUksR0FBRyxHQUFHVSxLQUFLRixFQUFFQyxRQUFRLFNBQVNkLEdBQUcsR0FBSUUsR0FBRUQsRUFBRUksR0FBRyxHQUFHTCxFQUFHLE9BQU9JLEdBQUVGLEVBQUVBLEVBQUVGLElBQUlhLEVBQUVBLEVBQUVDLFFBQVFkLEVB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b24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBfd2Vla3MgPSByZXF1aXJlKCcuL3dlZWtzJyk7XG5cbiQod2luZG93KS5yZWFkeShmdW5jdGlvbiAoKSB7XG5cbiAgICAvLyAgT1BFTiBXSURHRVRcbiAgICB7XG4gICAgICAgIHZhciBkaXNwbGF5ID0gdm9pZCAwO1xuICAgICAgICAkKCcub24tYnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib3gnKS5zdHlsZS5kaXNwbGF5O1xuICAgICAgICAgICAgaWYgKGRpc3BsYXkgPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JveCcpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgICAgICAgICAgICAgJCgnLmZsZXhzbGlkZXInKS5mbGV4c2xpZGVyKHtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiAnc2xpZGUnLFxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNob3c6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sTmF2OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbHNDb250YWluZXI6ICQoJy5jdXN0b20tY29udHJvbHMtY29udGFpbmVyJyksXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbURpcmVjdGlvbk5hdjogJCgnLmN1c3RvbS1uYXZpZ2F0aW9uIGEnKSxcbiAgICAgICAgICAgICAgICAgICAga2V5Ym9hcmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25Mb29wOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBhZnRlcjogZnVuY3Rpb24gYWZ0ZXIoY3R4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3R4LmN1cnJlbnRTbGlkZSA9PSBjdHgubGFzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICgwLCBfd2Vla3MuYWRkTGFzdFdlZWtTbGlkZSkoJCgnLmZsZXhzbGlkZXInKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xhc3QgdHJhbnNpdGlvbiBlbmRlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBTZXQgQ3VycmVudCBkYXkgc2xpZGVyIGFjdGl2ZSwgd2l0aCBvbmUgdmFsdWVcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXkgPSBtb21lbnQoKS5pc29XZWVrZGF5KCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhY3RpdmVFbGVtID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGRheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUVsZW0gPSAnLm1vbmRheSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlRWxlbSA9ICcudHVlc2RheSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlRWxlbSA9ICcud2VkbmVzZGF5JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVFbGVtID0gJy50aHVyc2RheSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlRWxlbSA9ICcuZnJpZGF5JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVFbGVtID0gJy5zYXR1cmRheSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlRWxlbSA9ICcuc3VuZGF5JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAoMCwgX3dlZWtzLmluaXRTbGlkZXIpKCQoJy5mbGV4LWFjdGl2ZS1zbGlkZScpLmZpbmQoYWN0aXZlRWxlbSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlzcGxheSA9PSAnYmxvY2snKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JveCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBDTE9TRVMgV0lER0VUXG4gICAgJCgnLmNsb3NlLWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JveCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfSk7XG5cbiAgICAvLyBEQVlUSU1FIE9OTFkgT0ZGIE9SIE9OXG5cblxuICAgICQoJy5zd2l0Y2gtb24nKS5jbGljayhfd2Vla3MuZGF5dGltZVNsaWRlckNoYW5nZXMpO1xuICAgICQoJy5zd2l0Y2gtb2ZmJykuY2xpY2soX3dlZWtzLmRheXRpbWVTbGlkZXJDaGFuZ2VzKTtcblxuICAgIC8vIFdoZW4gY2xpY2tpbmcgb24gdGhlIGFycm93cyBnZW5lcmF0ZSB3ZWVrIHRleHRcbiAgICBmdW5jdGlvbiBzZXRXZWVrVGV4dCh3ZWVrKSB7XG4gICAgICAgIHZhciBtID0gd2VlayA/IG1vbWVudCgpLndlZWsod2VlaykgOiBtb21lbnQoKTtcbiAgICAgICAgdmFyIG1vbmRheSA9IG0uaXNvV2Vla2RheSgxKS5mb3JtYXQoJ0REJyk7XG4gICAgICAgIHZhciBzdW5kYXkgPSBtLmlzb1dlZWtkYXkoNykuZm9ybWF0KCdERCcpO1xuICAgICAgICB2YXIgdGhpc01vbnRoID0gbS5mb3JtYXQoJ01NJyk7XG4gICAgICAgICQoJy5pdGVtLXdlZWsnKS5odG1sKCdXZWVrICcgKyBtb25kYXkgKyAnLScgKyBzdW5kYXkgKyAnLicgKyB0aGlzTW9udGgpO1xuICAgIH1cblxuICAgIHZhciB0aGlzV2VlayA9IG1vbWVudCgpLndlZWsoKTtcbiAgICB2YXIgd2VlayA9IG1vbWVudCgpLndlZWsoKTtcbiAgICBzZXRXZWVrVGV4dCh3ZWVrKTtcbiAgICBpZiAod2VlayA9PSB0aGlzV2Vlaykge1xuICAgICAgICAkKCcuZmxleC1wcmV2JykuaGlkZSgpO1xuICAgICAgICAkKCcuZmxleC1wcmV2LWJsb2NrJykuc2hvdygpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgICQoJy5mbGV4LXByZXYtYmxvY2snKS5oaWRlKCk7XG4gICAgICAgICQoJy5mbGV4LXByZXYnKS5zaG93KCk7XG4gICAgfVxuXG4gICAgJCgnLmZsZXgtbmV4dCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLmZsZXgtcHJldicpLnNob3coKTtcbiAgICAgICAgJCgnLmZsZXgtcHJldi1ibG9jaycpLmhpZGUoKTtcblxuICAgICAgICBpZiAod2VlayA9PSB0aGlzV2Vlaykge1xuICAgICAgICAgICAgd2VlayA9IHRoaXNXZWVrICsgMTtcbiAgICAgICAgfSBlbHNlIGlmICh3ZWVrID09IHByZXZXZWVrKSB7XG4gICAgICAgICAgICB3ZWVrID0gcHJldldlZWsgKyAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd2VlayA9IHdlZWsgKyAxO1xuICAgICAgICB9XG4gICAgICAgIHNldFdlZWtUZXh0KHdlZWspO1xuICAgIH0pO1xuXG4gICAgdmFyIHRoZVdlZWsgPSB3ZWVrO1xuICAgIHZhciBwcmV2V2VlaztcbiAgICAkKCcuZmxleC1wcmV2JykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAod2VlayA9PSB0aGlzV2Vlaykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd2VlayA9IHdlZWsgLSAxO1xuICAgICAgICB9XG4gICAgICAgIHRoZVdlZWsgPSB3ZWVrO1xuICAgICAgICBpZiAodGhlV2VlayA9PSB0aGlzV2Vlaykge1xuICAgICAgICAgICAgJCgnLmZsZXgtcHJldicpLmhpZGUoKTtcbiAgICAgICAgICAgICQoJy5mbGV4LXByZXYtYmxvY2snKS5zaG93KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKCcuZmxleC1wcmV2Jykuc2hvdygpO1xuICAgICAgICAgICAgJCgnLmZsZXgtcHJldi1ibG9jaycpLmhpZGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldFdlZWtUZXh0KHdlZWspO1xuXG4gICAgICAgIHByZXZXZWVrID0gd2VlaztcbiAgICB9KTtcblxuICAgIC8vIEFERCBBTkQgREVMIEJVVFRPTlxuXG4gICAgJCgnLmFkZC1idXR0b24nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICgwLCBfd2Vla3MuYWRkSGFuZGxlKSgpO1xuICAgIH0pO1xuICAgIHtcbiAgICAgICAgdmFyIGZvY3VzRWxlbSA9IG51bGw7XG4gICAgICAgICQoJy5kZWwtYnV0dG9uJykubW91c2Vkb3duKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkZWxldGUnKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCQoJzpmb2N1cycpKTtcbiAgICAgICAgICAgICQoJzpmb2N1cycpLmhhc0NsYXNzKCd1aS1zbGlkZXItaGFuZGxlJykgPyBmb2N1c0VsZW0gPSAkKCc6Zm9jdXMnKSA6IGZvY3VzRWxlbSA9IG51bGw7XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcuZGVsLWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChmb2N1c0VsZW0pIHtcbiAgICAgICAgICAgICAgICAoMCwgX3dlZWtzLmRlbGV0ZUhhbmRsZSkoZm9jdXNFbGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5cbi8vIFRPRE8gYWRkIGJ1dHRvbiAtIGFkZCBhIG5ldyBzbGlkZXIgdG8gbW9uZGF5XG4vLyBUT0RPIGRyYWcgYW5kIGRyb3AgaGFuZGxlc1xuLy8gVE9ETyBmaW5hbCBjYWxjdWxhdGlvbnMgZnVuY3Rpb25cbi8vIFRPRE8gaGFuZGxlIGN1c3RvbSBzaXplPz8/XG5cbn0se1wiLi93ZWVrc1wiOjJ9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5pbml0U2xpZGVyID0gaW5pdFNsaWRlcjtcbmV4cG9ydHMuZ2V0SXRlbXMgPSBnZXRJdGVtcztcbmV4cG9ydHMuYWRkTGFzdFdlZWtTbGlkZSA9IGFkZExhc3RXZWVrU2xpZGU7XG5leHBvcnRzLmRheXRpbWVTbGlkZXJDaGFuZ2VzID0gZGF5dGltZVNsaWRlckNoYW5nZXM7XG5leHBvcnRzLmFkZEhhbmRsZSA9IGFkZEhhbmRsZTtcbmV4cG9ydHMuZGVsZXRlSGFuZGxlID0gZGVsZXRlSGFuZGxlO1xuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxuQXJyYXkucHJvdG90eXBlLnJhbmRvbUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5sZW5ndGgpXTtcbn07XG52YXIgc2xpZGVyUG9wdXA7XG4kKHdpbmRvdykucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJzbGlkZXItcG9wdXBcIj48L2Rpdj4nKTtcbiAgICBzbGlkZXJQb3B1cCA9ICQoJyNzbGlkZXItcG9wdXAnKTtcbn0pO1xudmFyIGRheXRpbWVfb24gPSB0cnVlO1xuZnVuY3Rpb24gZmlsdGVyVmFsdWVzKHZhbHVlcywgZGF5dGltZV9vbikge1xuICAgIGlmIChkYXl0aW1lX29uKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdmaWx0ZXJpbmcuLi4nLCB2YWx1ZXMpO1xuICAgICAgICB2YWx1ZXMgPSB2YWx1ZXMuZmlsdGVyKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICBpZiAodiA8PSAxNCAmJiB2ID49IDQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc29sZS5sb2codmFsdWVzKTtcbiAgICByZXR1cm4gdmFsdWVzO1xufVxuZnVuY3Rpb24gZ2V0RGVmYXVsdFZhbHVlKGRheXRpbWVfb24pIHtcbiAgICB2YXIgdmFsdWUgPSAyMyAtIChtb21lbnQoKS5ob3VyKCkgKyAxKTtcbiAgICBpZiAoZGF5dGltZV9vbikge1xuICAgICAgICBpZiAodmFsdWUgPCA0KSB2YWx1ZSA9IDQ7ZWxzZSBpZiAodmFsdWUgPiAxNCkgdmFsdWUgPSAxNDtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gaW5pdFNsaWRlcihzZWxlY3RvciwgdmFsdWVzKSB7XG4gICAgdmFsdWVzID0gdmFsdWVzID8gZmlsdGVyVmFsdWVzKHZhbHVlcywgZGF5dGltZV9vbikgOiBbZ2V0RGVmYXVsdFZhbHVlKGRheXRpbWVfb24pXTtcbiAgICBzZWxlY3Rvci5zbGlkZXIoe1xuICAgICAgICBvcmllbnRhdGlvbjogJ3ZlcnRpY2FsJyxcbiAgICAgICAgbWluOiBkYXl0aW1lX29uID8gNCA6IDAsXG4gICAgICAgIG1heDogZGF5dGltZV9vbiA/IDE0IDogMjMsXG4gICAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgICAgICBzdGVwOiAxLFxuICAgICAgICBhbmltYXRlOiB0cnVlLFxuICAgICAgICBzdGFydDogZnVuY3Rpb24gc3RhcnQoZSwgdWkpIHtcbiAgICAgICAgICAgIHZhciB2ID0gMjMgLSB1aS52YWx1ZTtcbiAgICAgICAgICAgIHNsaWRlclBvcHVwLnRleHQodik7XG4gICAgICAgICAgICBzbGlkZXJQb3B1cC5zaG93KCk7XG4gICAgICAgICAgICBzbGlkZXJQb3B1cC5jc3MoJ3RvcCcsIHVpLmhhbmRsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSAxMCk7XG4gICAgICAgICAgICBzbGlkZXJQb3B1cC5jc3MoJ2xlZnQnLCB1aS5oYW5kbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCArIDMwKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2xpZGU6IGZ1bmN0aW9uIHNsaWRlKGUsIHVpKSB7XG4gICAgICAgICAgICB2YXIgZGlmZlZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgY29uc29sZS5sb2codWkudmFsdWVzKTtcbiAgICAgICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgdWkudmFsdWVzLmxlbmd0aDsgYSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRpZmZWYWx1ZXMuaW5kZXhPZih1aS52YWx1ZXNbYV0pID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRpZmZWYWx1ZXMucHVzaCh1aS52YWx1ZXNbYV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHYgPSAyMyAtIHVpLnZhbHVlO1xuICAgICAgICAgICAgc2xpZGVyUG9wdXAudGV4dCh2KTtcbiAgICAgICAgICAgIHNsaWRlclBvcHVwLmNzcygndG9wJywgdWkuaGFuZGxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCAtIDEwKTtcbiAgICAgICAgICAgIHNsaWRlclBvcHVwLmNzcygnbGVmdCcsIHVpLmhhbmRsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ICsgMzApO1xuICAgICAgICAgICAgJChcIi5jb250ZW50U2xpZGVyXCIpLmh0bWwodiArICcgaG91cicpO1xuICAgICAgICB9LFxuICAgICAgICBzdG9wOiBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgICAgICAgc2xpZGVyUG9wdXAuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coJ1ZBTFVFUycsIHZhbHVlcyk7XG4gICAgaWYgKHZhbHVlcy5sZW5ndGggPT0gMCkge1xuICAgICAgICBzZWxlY3Rvci5yZW1vdmVDbGFzcygnYWN0aXZlLXNsaWRlcicpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGVjdG9yLmFkZENsYXNzKCdhY3RpdmUtc2xpZGVyJyk7XG4gICAgfVxuICAgIC8vICQoJy51aS1zbGlkZXItaGFuZGxlJykuYXR0cignZHJhZ2dhYmxlJywgdHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIGdldEl0ZW1zKCkge1xuICAgIHJldHVybiAkKCcuZmxleHNsaWRlciAuc2xpZGVzIC5pdGVtOm5vdCguY2xvbmUpJyk7XG59XG5cbmZ1bmN0aW9uIGFkZExhc3RXZWVrU2xpZGUoc2VsZWN0b3IpIHtcbiAgICB2YXIgY3R4ID0gc2VsZWN0b3IuZGF0YSgnZmxleHNsaWRlcicpO1xuXG4gICAgdmFyIHRlbXBsYXRlID0gJCgnPGxpIGNsYXNzPVwiaXRlbVwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIml0ZW0td2Vla1wiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2NhbGUtd3JhcHBlclwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImxpc3Qtc2NhbGUtd3JhcFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJ0aW1lcy13cmFwLWxlZnRcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lLW1pblwiPjAwPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGltZS1tYXhcIj4yNDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJzY2FsZS1pdGVtXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5XCI+TW9uPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWRkLXRpbWVzLWxlZnRcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVmYXVsdC13cmFwXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb25kYXkgZGVmYXVsdC1zbGlkZXIgc2xpZGUtYWN0aXZlXCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwic2NhbGUtaXRlbVwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheVwiPlR1ZTwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtd3JhcFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXNsaWRlciAgdHVlc2RheVwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInNjYWxlLWl0ZW1cIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXlcIj5XZWQ8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXdyYXBcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVmYXVsdC1zbGlkZXIgd2VkbmVzZGF5XCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwic2NhbGUtaXRlbVwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheVwiPlRoPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtd3JhcFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXNsaWRlciB0aHVyc2RheVwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInNjYWxlLWl0ZW1cIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXlcIj5GcjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtd3JhcFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXNsaWRlciAgZnJpZGF5XCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwic2NhbGUtaXRlbVwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheVwiPlNhdDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtd3JhcFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXNsaWRlciAgc2F0dXJkYXlcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJzY2FsZS1pdGVtXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5XCI+U3VuPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWRkLXRpbWVzLXJpZ2h0XCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtd3JhcFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVmYXVsdC1zbGlkZXIgIHN1bmRheVwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInRpbWVzLXdyYXAtcmlnaHRcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lLW1pblwiPjAwPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGltZS1tYXhcIj4yNDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT4nKTtcbiAgICBjdHguYWRkU2xpZGUodGVtcGxhdGUpO1xufVxuXG5mdW5jdGlvbiBkYXl0aW1lU2xpZGVyQ2hhbmdlcygpIHtcbiAgICBpZiAoZGF5dGltZV9vbikge1xuICAgICAgICAkKCcuc3dpdGNoLW9uJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKCcuc3dpdGNoLW9mZicpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJCgnLmRlZmF1bHQtd3JhcCcpLmFkZENsYXNzKCdzbGlkZS13cmFwJyk7XG4gICAgICAgICQoJy5kZWZhdWx0LXNsaWRlcicpLmFkZENsYXNzKCdzbGlkZXInKTtcbiAgICAgICAgJCgnLnNsaWRlcicpLnJlbW92ZUNsYXNzKCdkZWZhdWx0LXNsaWRlcicpO1xuXG4gICAgICAgICQoJy5zbGlkZXInKS5zbGlkZXIoe1xuICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgbWF4OiAyM1xuICAgICAgICB9KTtcblxuICAgICAgICBkYXl0aW1lX29uID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChkYXl0aW1lX29uID09IGZhbHNlKSB7XG4gICAgICAgICQoJy5zd2l0Y2gtb2ZmJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKCcuc3dpdGNoLW9uJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKCcuc2xpZGUtd3JhcCcpLmFkZENsYXNzKCdkZWZhdWx0LXdyYXAnKTtcbiAgICAgICAgJCgnLmRlZmF1bHQtd3JhcCcpLnJlbW92ZUNsYXNzKCdzbGlkZS13cmFwJyk7XG4gICAgICAgICQoJy5zbGlkZXInKS5hZGRDbGFzcygnZGVmYXVsdC1zbGlkZXInKTtcbiAgICAgICAgJCgnLmRlZmF1bHQtc2xpZGVyJykucmVtb3ZlQ2xhc3MoJ3NsaWRlcicpO1xuXG4gICAgICAgIGRheXRpbWVfb24gPSB0cnVlO1xuICAgICAgICAkKCcuZGVmYXVsdC1zbGlkZXIuYWN0aXZlLXNsaWRlcicpLmVhY2goZnVuY3Rpb24gKGksIGVsKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gJChlbCkuc2xpZGVyKCd2YWx1ZXMnKTtcbiAgICAgICAgICAgICQoZWwpLnNsaWRlcignZGVzdHJveScpO1xuICAgICAgICAgICAgaW5pdFNsaWRlcigkKGVsKSwgdmFsdWVzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCQoJy5mbGV4LWFjdGl2ZS1zbGlkZSAuYWN0aXZlLXNsaWRlcicpLnNsaWRlcigndmFsdWVzJykpO1xufVxuXG5mdW5jdGlvbiBhZGRIYW5kbGUoKSB7XG4gICAgdmFyIGFjdGl2ZSA9ICQoJy5mbGV4LWFjdGl2ZS1zbGlkZScpO1xuICAgIHZhciBtb25kYXkgPSBhY3RpdmUuZmluZCgnLm1vbmRheScpO1xuICAgIHZhciBwb3NzaWJsZUFyciA9IFtdO1xuICAgIC8vIGEgbGlzdCBvZiBwb3NzaWJsZSBoYW5kbGUgdmFsdWVzIHdoaWNoIGNhbiBiZSBhZGRlZFxuICAgIGlmIChkYXl0aW1lX29uKSBwb3NzaWJsZUFyciA9IFs0LCA1LCA2LCA3LCA4LCA5LCAxMCwgMTEsIDEyLCAxMywgMTRdO2Vsc2Uge1xuICAgICAgICBwb3NzaWJsZUFyciA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkobmV3IEFycmF5KDI0KS5rZXlzKCkpKTtcbiAgICB9XG5cbiAgICBpZiAoIW1vbmRheS5oYXNDbGFzcygnYWN0aXZlLXNsaWRlcicpKSB7XG4gICAgICAgIGluaXRTbGlkZXIobW9uZGF5KTtcbiAgICAgICAgbW9uZGF5LmFkZENsYXNzKCdhY3RpdmUtc2xpZGVyJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHZhbHVlID0gbW9uZGF5LnNsaWRlcigndmFsdWUnKTtcbiAgICAgICAgdmFyIHZhbHVlcyA9IG1vbmRheS5zbGlkZXIoJ3ZhbHVlcycpO1xuICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSwgdmFsdWVzKTtcbiAgICAgICAgdmFyIHBvc3NpYmxlTmV3VmFsdWUgPSB2YWx1ZXNbdmFsdWVzLmxlbmd0aCAtIDFdIC0gMTtcbiAgICAgICAgaWYgKHZhbHVlcy5pbmRleE9mKHBvc3NpYmxlTmV3VmFsdWUpID09PSAtMSAmJiBwb3NzaWJsZUFyci5pbmRleE9mKHBvc3NpYmxlTmV3VmFsdWUpICE9PSAtMSkge1xuICAgICAgICAgICAgdmFsdWVzLnB1c2godmFsdWVzW3ZhbHVlcy5sZW5ndGggLSAxXSAtIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcG9zc2libGVBcnIgPSBwb3NzaWJsZUFyci5maWx0ZXIoZnVuY3Rpb24gKG51bSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZXMuaW5kZXhPZihudW0pID09IC0xO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncG9zc2libGUgcmFuZG9tIHZhbHVlcycsIHBvc3NpYmxlQXJyKTtcbiAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IHBvc3NpYmxlQXJyLnJhbmRvbUVsZW1lbnQoKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdyYW5kb20gbmV3IHZhbHVlJywgbmV3VmFsdWUpO1xuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKG5ld1ZhbHVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ25vIGNob2ljZXMgbGVmdCEgTm90aGluZyB0byBhZGQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc29sZS5sb2codmFsdWVzKTtcbiAgICAgICAgfVxuICAgICAgICBtb25kYXkuc2xpZGVyKCdkZXN0cm95Jyk7XG4gICAgICAgIGluaXRTbGlkZXIobW9uZGF5LCB2YWx1ZXMpO1xuICAgIH1cbiAgICBtb25kYXkuZmluZCgnLnVpLXNsaWRlci1oYW5kbGU6bGFzdCcpLmZvY3VzKCk7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZUhhbmRsZShoYW5kbGUpIHtcbiAgICBjb25zb2xlLmxvZyhoYW5kbGUpO1xuICAgIHZhciAkc2xpZGVyID0gaGFuZGxlLnBhcmVudCgpO1xuICAgIHZhciBoYW5kbGVJbmRleCA9ICRzbGlkZXIuZmluZCgnLnVpLXNsaWRlci1oYW5kbGUnKS5pbmRleChoYW5kbGUpO1xuICAgIHZhciB2YWx1ZXMgPSAkc2xpZGVyLnNsaWRlcigndmFsdWVzJyk7XG4gICAgY29uc29sZS5sb2coJ29sZCB2YWx1ZXMnLCB2YWx1ZXMpO1xuICAgIGNvbnNvbGUubG9nKGhhbmRsZUluZGV4KTtcbiAgICB2YWx1ZXMuc3BsaWNlKGhhbmRsZUluZGV4LCAxKTtcbiAgICBjb25zb2xlLmxvZygnbmV3IHZhbHVlcycsIHZhbHVlcyk7XG4gICAgJHNsaWRlci5zbGlkZXIoJ2Rlc3Ryb3knKTtcbiAgICBpbml0U2xpZGVyKCRzbGlkZXIsIHZhbHVlcyk7XG59XG5cbn0se31dfSx7fSxbMV0pO1xuIl19
