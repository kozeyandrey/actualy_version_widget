!function e(i,l,s){function n(t,d){if(!l[t]){if(!i[t]){var o="function"==typeof require&&require;if(!d&&o)return o(t,!0);if(a)return a(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var c=l[t]={exports:{}};i[t][0].call(c.exports,function(e){var l=i[t][1][e];return n(l?l:e)},c,c.exports,e,i,l,s)}return l[t].exports}for(var a="function"==typeof require&&require,t=0;t<s.length;t++)n(s[t]);return n}({1:[function(e,i,l){"use strict";var s=e("./weeks");$(window).ready(function(){function e(e){var i=e?moment().week(e):moment(),l=i.isoWeekday(1).format("DD"),s=i.isoWeekday(7).format("DD"),n=i.format("MM");$(".item-week").html("Week "+l+"-"+s+"."+n)}var i=void 0;$(".on-btn").click(function(){if("none"==(i=document.getElementById("box").style.display)){document.getElementById("box").style.display="block",$(".flexslider").flexslider({animation:"slide",slideshow:!1,controlNav:!1,controlsContainer:$(".custom-controls-container"),customDirectionNav:$(".custom-navigation a"),keyboard:!1,animationLoop:!0,after:function(e){e.currentSlide==e.last&&((0,s.addLastWeekSlide)($(".flexslider")),console.log("last transition ended"))}});var e=moment().isoWeekday(),l=void 0;switch(e){case 1:l=".monday";break;case 2:l=".tuesday";break;case 3:l=".wednesday";break;case 4:l=".thursday";break;case 5:l=".friday";break;case 6:l=".saturday";break;case 7:l=".sunday"}(0,s.initSlider)($(".flex-active-slide").find(l))}else"block"==i&&(document.getElementById("box").style.display="none")}),$(".close-button").click(function(){document.getElementById("box").style.display="none"}),$(".switch-on").click(s.daytimeSliderChanges),$(".switch-off").click(s.daytimeSliderChanges);var l=moment().week(),n=moment().week();e(n),n==l?($(".flex-prev").hide(),$(".flex-prev-block").show()):($(".flex-prev-block").hide(),$(".flex-prev").show()),$(".flex-next").click(function(){$(".flex-prev").show(),$(".flex-prev-block").hide(),n==l?n=l+1:n==a?n=a+1:n+=1,e(n)});var a,t=n;$(".flex-prev").click(function(){if(n==l)return!1;n-=1,t=n,t==l?($(".flex-prev").hide(),$(".flex-prev-block").show()):($(".flex-prev").show(),$(".flex-prev-block").hide()),e(n),a=n}),$(".add-button").click(function(){(0,s.addHandle)()});var d=null;$(".del-button").mousedown(function(){console.log("delete"),console.log($(":focus")),d=$(":focus").hasClass("ui-slider-handle")?$(":focus"):null}),$(".del-button").click(function(){d&&(0,s.deleteHandle)(d)})})},{"./weeks":2}],2:[function(e,i,l){"use strict";function s(e){if(Array.isArray(e)){for(var i=0,l=Array(e.length);i<e.length;i++)l[i]=e[i];return l}return Array.from(e)}function n(e,i){return i&&(console.log("filtering...",e),e=e.filter(function(e){return e<=14&&e>=4})),console.log(e),e}function a(e){var i=23-(moment().hour()+1);return e&&(i<4?i=4:i>14&&(i=14)),i}function t(e,i){i=i?n(i,m):[a(m)],e.slider({orientation:"vertical",min:m?4:0,max:m?14:23,values:i,step:1,animate:!0,start:function(e,i){var l=23-i.value;f.text(l),f.show(),f.css("top",i.handle.getBoundingClientRect().top-10),f.css("left",i.handle.getBoundingClientRect().left+30)},slide:function(e,i){var l=this.getBoundingClientRect();if(!(e.pageX<l.right&&e.pageX>l.left&&e.pageY<l.bottom&&e.pageY>l.top))return!1;var s=[];console.log(i.values);for(var n=0;n<i.values.length;n++){if(s.indexOf(i.values[n])>-1)return!1;s.push(i.values[n])}var a=23-i.value;f.text(a),f.css("top",i.handle.getBoundingClientRect().top-10),f.css("left",i.handle.getBoundingClientRect().left+30),$(".contentSlider").html(a+" hour")},stop:function(){f.hide()}}),console.log("VALUES",i),0==i.length?e.removeClass("active-slider"):e.addClass("active-slider"),d()}function d(){$(".ui-slider-handle").off("mousedown"),$(".ui-slider-handle").on("dragstart",function(e){e.preventDefault()}),$(".ui-slider-handle").on("mousedown",function(e){function i(e){var i=l.getBoundingClientRect();e.pageX<i.right&&e.pageX>i.left&&e.pageY<i.bottom&&e.pageY>i.top?s.css("display","none"):(s.css("display","initial"),s.css("left",e.pageX-s.width()/2),s.css("top",e.pageY-s.height()/2))}console.log("mousedown",this);var l=$(this).parent()[0];console.log(l);var s=$(this).clone();s.css("position","absolute"),s.css("width","25px").css("height","9px").css("left","0").css("top",0).css("opacity",.5),$("body").append(s),$("body").mousemove(function(e){console.log("mousemove"),i(e)}),$("body").mouseup(function(){console.log("mouseup"),$("body").off("mouseup"),$("body").off("mousemove"),s.remove()})})}function o(){return $(".flexslider .slides .item:not(.clone)")}function r(e){var i=e.data("flexslider"),l=$('<li class="item">\n                                <div class="item-week">\n                                </div>\n                                <div class="scale-wrapper">\n                                    <ul class="list-scale-wrap">\n                                        <li class="times-wrap-left">\n                                            <div class="time-min">00</div>\n                                            <div class="time-max">24</div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Mon</div>\n                                            <div class="add-times-left">\n                                                <div class="default-wrap">\n                                                    <div class="monday default-slider slide-active"></div>\n                                                </div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Tue</div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider  tuesday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Wed</div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider wednesday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Th</div>\n                                            <div></div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider thursday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Fr</div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider  friday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Sat</div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider  saturday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Sun</div>\n                                            <div class="add-times-right">\n                                                <div class="default-wrap">\n                                                    <div class="default-slider  sunday"></div>\n                                                </div>\n                                            </div>\n                                        </li>\n                                        <li class="times-wrap-right">\n                                            <div class="time-min">00</div>\n                                            <div class="time-max">24</div>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </li>');i.addSlide(l)}function c(){m?($(".switch-on").removeClass("active"),$(".switch-off").addClass("active"),$(".default-wrap").addClass("slide-wrap"),$(".default-slider").addClass("slider"),$(".slider").removeClass("default-slider"),$(".slider").slider({min:0,max:23}),m=!1):0==m&&($(".switch-off").removeClass("active"),$(".switch-on").addClass("active"),$(".slide-wrap").addClass("default-wrap"),$(".default-wrap").removeClass("slide-wrap"),$(".slider").addClass("default-slider"),$(".default-slider").removeClass("slider"),m=!0,$(".default-slider.active-slider").each(function(e,i){var l=$(i).slider("values");$(i).slider("destroy"),t($(i),l)})),console.log($(".flex-active-slide .active-slider").slider("values"))}function u(){var e=$(".flex-active-slide"),i=e.find(".monday"),l=[];if(l=m?[4,5,6,7,8,9,10,11,12,13,14]:[].concat(s(new Array(24).keys())),i.hasClass("active-slider")){var n=i.slider("value"),a=i.slider("values");console.log(n,a);var d=a[a.length-1]-1;if(a.indexOf(d)===-1&&l.indexOf(d)!==-1)a.push(a[a.length-1]-1);else{l=l.filter(function(e){return a.indexOf(e)==-1});var o=l.randomElement();void 0!=o&&a.push(o),console.log(a)}i.slider("destroy"),t(i,a)}else t(i),i.addClass("active-slider");i.find(".ui-slider-handle:last").focus()}function v(e){console.log(e);var i=e.parent(),l=i.find(".ui-slider-handle").index(e),s=i.slider("values");console.log("old values",s),console.log(l),s.splice(l,1),console.log("new values",s),i.slider("destroy"),t(i,s)}Object.defineProperty(l,"__esModule",{value:!0}),l.initSlider=t,l.getItems=o,l.addLastWeekSlide=r,l.daytimeSliderChanges=c,l.addHandle=u,l.deleteHandle=v,Array.prototype.randomElement=function(){return this[Math.floor(Math.random()*this.length)]};var f;$(window).ready(function(){$("body").append('<div id="slider-popup"></div>'),f=$("#slider-popup")});var m=!0},{}]},{},[1]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZSIsInQiLCJuIiwiciIsInMiLCJvIiwidSIsImEiLCJyZXF1aXJlIiwiaSIsImYiLCJFcnJvciIsImNvZGUiLCJsIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiX3dlZWtzIiwiJCIsIndpbmRvdyIsInJlYWR5Iiwic2V0V2Vla1RleHQiLCJ3ZWVrIiwibSIsIm1vbWVudCIsIm1vbmRheSIsImlzb1dlZWtkYXkiLCJmb3JtYXQiLCJzdW5kYXkiLCJ0aGlzTW9udGgiLCJodG1sIiwiZGlzcGxheSIsImNsaWNrIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiZmxleHNsaWRlciIsImFuaW1hdGlvbiIsInNsaWRlc2hvdyIsImNvbnRyb2xOYXYiLCJjb250cm9sc0NvbnRhaW5lciIsImN1c3RvbURpcmVjdGlvbk5hdiIsImtleWJvYXJkIiwiYW5pbWF0aW9uTG9vcCIsImFmdGVyIiwiY3R4IiwiY3VycmVudFNsaWRlIiwibGFzdCIsImFkZExhc3RXZWVrU2xpZGUiLCJjb25zb2xlIiwibG9nIiwiZGF5IiwiYWN0aXZlRWxlbSIsImluaXRTbGlkZXIiLCJmaW5kIiwiZGF5dGltZVNsaWRlckNoYW5nZXMiLCJ0aGlzV2VlayIsImhpZGUiLCJzaG93IiwicHJldldlZWsiLCJ0aGVXZWVrIiwiYWRkSGFuZGxlIiwiZm9jdXNFbGVtIiwibW91c2Vkb3duIiwiaGFzQ2xhc3MiLCJkZWxldGVIYW5kbGUiLCIuL3dlZWtzIiwiMiIsIl90b0NvbnN1bWFibGVBcnJheSIsImFyciIsIkFycmF5IiwiaXNBcnJheSIsImFycjIiLCJmcm9tIiwiZmlsdGVyVmFsdWVzIiwidmFsdWVzIiwiZGF5dGltZV9vbiIsImZpbHRlciIsInYiLCJnZXREZWZhdWx0VmFsdWUiLCJ2YWx1ZSIsImhvdXIiLCJzZWxlY3RvciIsInNsaWRlciIsIm9yaWVudGF0aW9uIiwibWluIiwibWF4Iiwic3RlcCIsImFuaW1hdGUiLCJzdGFydCIsInVpIiwic2xpZGVyUG9wdXAiLCJ0ZXh0IiwiY3NzIiwiaGFuZGxlIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwibGVmdCIsInNsaWRlIiwidGhpc0Nvb3JkcyIsInRoaXMiLCJwYWdlWCIsInJpZ2h0IiwicGFnZVkiLCJib3R0b20iLCJkaWZmVmFsdWVzIiwiaW5kZXhPZiIsInB1c2giLCJzdG9wIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInNldERyYWdnYWJsZSIsIm9mZiIsIm9uIiwicHJldmVudERlZmF1bHQiLCJtb3ZlQXQiLCJ0YXJnZXRTbGlkZXIiLCJjbG9uZSIsIndpZHRoIiwiaGVpZ2h0IiwicGFyZW50IiwiYXBwZW5kIiwibW91c2Vtb3ZlIiwibW91c2V1cCIsInJlbW92ZSIsImdldEl0ZW1zIiwiZGF0YSIsInRlbXBsYXRlIiwiYWRkU2xpZGUiLCJlYWNoIiwiZWwiLCJhY3RpdmUiLCJwb3NzaWJsZUFyciIsImNvbmNhdCIsImtleXMiLCJwb3NzaWJsZU5ld1ZhbHVlIiwibnVtIiwibmV3VmFsdWUiLCJyYW5kb21FbGVtZW50IiwidW5kZWZpbmVkIiwiZm9jdXMiLCIkc2xpZGVyIiwiaGFuZGxlSW5kZXgiLCJpbmRleCIsInNwbGljZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwicHJvdG90eXBlIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIl0sIm1hcHBpbmdzIjoiQ0FBQSxRQUFVQSxHQUFFQyxFQUFFQyxFQUFFQyxHQUFHLFFBQVNDLEdBQUVDLEVBQUVDLEdBQUcsSUFBSUosRUFBRUcsR0FBRyxDQUFDLElBQUlKLEVBQUVJLEdBQUcsQ0FBQyxHQUFJRSxHQUFrQixrQkFBVEMsVUFBcUJBLE9BQVEsS0FBSUYsR0FBR0MsRUFBRSxNQUFPQSxHQUFFRixHQUFFLEVBQUksSUFBR0ksRUFBRSxNQUFPQSxHQUFFSixHQUFFLEVBQUksSUFBSUssR0FBRSxHQUFJQyxPQUFNLHVCQUF1Qk4sRUFBRSxJQUFLLE1BQU1LLEdBQUVFLEtBQUssbUJB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RUFDL0IzQyxFQUFRaUQsVUFBWUEsRUFDcEJqRCxFQUFRcUQsYUFBZUEsRUFJdkJLLE1BQU02RSxVQUFVVCxjQUFnQixXQUM1QixNQUFPdEMsTUFBS2dELEtBQUtDLE1BQU1ELEtBQUtFLFNBQVdsRCxLQUFLdEYsU0FFaEQsSUFBSTZFLEVBQ0p6RSxHQUFFQyxRQUFRQyxNQUFNLFdBQ1pGLEVBQUUsUUFBUXVHLE9BQU8saUNBQ2pCOUIsRUFBY3pFLEVBQUUsa0JBRXBCLElBQUkwRCxJQUFhLFlBb05OIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBfd2Vla3MgPSByZXF1aXJlKCcuL3dlZWtzJyk7XG5cbiQod2luZG93KS5yZWFkeShmdW5jdGlvbiAoKSB7XG5cbiAgICAvLyAgT1BFTiBXSURHRVRcbiAgICB7XG4gICAgICAgIHZhciBkaXNwbGF5ID0gdm9pZCAwO1xuICAgICAgICAkKCcub24tYnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib3gnKS5zdHlsZS5kaXNwbGF5O1xuICAgICAgICAgICAgaWYgKGRpc3BsYXkgPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JveCcpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgICAgICAgICAgICAgJCgnLmZsZXhzbGlkZXInKS5mbGV4c2xpZGVyKHtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiAnc2xpZGUnLFxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNob3c6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sTmF2OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbHNDb250YWluZXI6ICQoJy5jdXN0b20tY29udHJvbHMtY29udGFpbmVyJyksXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbURpcmVjdGlvbk5hdjogJCgnLmN1c3RvbS1uYXZpZ2F0aW9uIGEnKSxcbiAgICAgICAgICAgICAgICAgICAga2V5Ym9hcmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25Mb29wOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBhZnRlcjogZnVuY3Rpb24gYWZ0ZXIoY3R4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3R4LmN1cnJlbnRTbGlkZSA9PSBjdHgubGFzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICgwLCBfd2Vla3MuYWRkTGFzdFdlZWtTbGlkZSkoJCgnLmZsZXhzbGlkZXInKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xhc3QgdHJhbnNpdGlvbiBlbmRlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBTZXQgQ3VycmVudCBkYXkgc2xpZGVyIGFjdGl2ZSwgd2l0aCBvbmUgdmFsdWVcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXkgPSBtb21lbnQoKS5pc29XZWVrZGF5KCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhY3RpdmVFbGVtID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGRheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUVsZW0gPSAnLm1vbmRheSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlRWxlbSA9ICcudHVlc2RheSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlRWxlbSA9ICcud2VkbmVzZGF5JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVFbGVtID0gJy50aHVyc2RheSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlRWxlbSA9ICcuZnJpZGF5JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVFbGVtID0gJy5zYXR1cmRheSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlRWxlbSA9ICcuc3VuZGF5JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAoMCwgX3dlZWtzLmluaXRTbGlkZXIpKCQoJy5mbGV4LWFjdGl2ZS1zbGlkZScpLmZpbmQoYWN0aXZlRWxlbSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlzcGxheSA9PSAnYmxvY2snKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JveCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBDTE9TRVMgV0lER0VUXG4gICAgJCgnLmNsb3NlLWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JveCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfSk7XG5cbiAgICAvLyBEQVlUSU1FIE9OTFkgT0ZGIE9SIE9OXG5cblxuICAgICQoJy5zd2l0Y2gtb24nKS5jbGljayhfd2Vla3MuZGF5dGltZVNsaWRlckNoYW5nZXMpO1xuICAgICQoJy5zd2l0Y2gtb2ZmJykuY2xpY2soX3dlZWtzLmRheXRpbWVTbGlkZXJDaGFuZ2VzKTtcblxuICAgIC8vIFdoZW4gY2xpY2tpbmcgb24gdGhlIGFycm93cyBnZW5lcmF0ZSB3ZWVrIHRleHRcbiAgICBmdW5jdGlvbiBzZXRXZWVrVGV4dCh3ZWVrKSB7XG4gICAgICAgIHZhciBtID0gd2VlayA/IG1vbWVudCgpLndlZWsod2VlaykgOiBtb21lbnQoKTtcbiAgICAgICAgdmFyIG1vbmRheSA9IG0uaXNvV2Vla2RheSgxKS5mb3JtYXQoJ0REJyk7XG4gICAgICAgIHZhciBzdW5kYXkgPSBtLmlzb1dlZWtkYXkoNykuZm9ybWF0KCdERCcpO1xuICAgICAgICB2YXIgdGhpc01vbnRoID0gbS5mb3JtYXQoJ01NJyk7XG4gICAgICAgICQoJy5pdGVtLXdlZWsnKS5odG1sKCdXZWVrICcgKyBtb25kYXkgKyAnLScgKyBzdW5kYXkgKyAnLicgKyB0aGlzTW9udGgpO1xuICAgIH1cblxuICAgIHZhciB0aGlzV2VlayA9IG1vbWVudCgpLndlZWsoKTtcbiAgICB2YXIgd2VlayA9IG1vbWVudCgpLndlZWsoKTtcbiAgICBzZXRXZWVrVGV4dCh3ZWVrKTtcbiAgICBpZiAod2VlayA9PSB0aGlzV2Vlaykge1xuICAgICAgICAkKCcuZmxleC1wcmV2JykuaGlkZSgpO1xuICAgICAgICAkKCcuZmxleC1wcmV2LWJsb2NrJykuc2hvdygpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgICQoJy5mbGV4LXByZXYtYmxvY2snKS5oaWRlKCk7XG4gICAgICAgICQoJy5mbGV4LXByZXYnKS5zaG93KCk7XG4gICAgfVxuXG4gICAgJCgnLmZsZXgtbmV4dCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLmZsZXgtcHJldicpLnNob3coKTtcbiAgICAgICAgJCgnLmZsZXgtcHJldi1ibG9jaycpLmhpZGUoKTtcblxuICAgICAgICBpZiAod2VlayA9PSB0aGlzV2Vlaykge1xuICAgICAgICAgICAgd2VlayA9IHRoaXNXZWVrICsgMTtcbiAgICAgICAgfSBlbHNlIGlmICh3ZWVrID09IHByZXZXZWVrKSB7XG4gICAgICAgICAgICB3ZWVrID0gcHJldldlZWsgKyAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd2VlayA9IHdlZWsgKyAxO1xuICAgICAgICB9XG4gICAgICAgIHNldFdlZWtUZXh0KHdlZWspO1xuICAgIH0pO1xuXG4gICAgdmFyIHRoZVdlZWsgPSB3ZWVrO1xuICAgIHZhciBwcmV2V2VlaztcbiAgICAkKCcuZmxleC1wcmV2JykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAod2VlayA9PSB0aGlzV2Vlaykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd2VlayA9IHdlZWsgLSAxO1xuICAgICAgICB9XG4gICAgICAgIHRoZVdlZWsgPSB3ZWVrO1xuICAgICAgICBpZiAodGhlV2VlayA9PSB0aGlzV2Vlaykge1xuICAgICAgICAgICAgJCgnLmZsZXgtcHJldicpLmhpZGUoKTtcbiAgICAgICAgICAgICQoJy5mbGV4LXByZXYtYmxvY2snKS5zaG93KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKCcuZmxleC1wcmV2Jykuc2hvdygpO1xuICAgICAgICAgICAgJCgnLmZsZXgtcHJldi1ibG9jaycpLmhpZGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldFdlZWtUZXh0KHdlZWspO1xuXG4gICAgICAgIHByZXZXZWVrID0gd2VlaztcbiAgICB9KTtcblxuICAgIC8vIEFERCBBTkQgREVMIEJVVFRPTlxuXG4gICAgJCgnLmFkZC1idXR0b24nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICgwLCBfd2Vla3MuYWRkSGFuZGxlKSgpO1xuICAgIH0pO1xuICAgIHtcbiAgICAgICAgdmFyIGZvY3VzRWxlbSA9IG51bGw7XG4gICAgICAgICQoJy5kZWwtYnV0dG9uJykubW91c2Vkb3duKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkZWxldGUnKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCQoJzpmb2N1cycpKTtcbiAgICAgICAgICAgICQoJzpmb2N1cycpLmhhc0NsYXNzKCd1aS1zbGlkZXItaGFuZGxlJykgPyBmb2N1c0VsZW0gPSAkKCc6Zm9jdXMnKSA6IGZvY3VzRWxlbSA9IG51bGw7XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcuZGVsLWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChmb2N1c0VsZW0pIHtcbiAgICAgICAgICAgICAgICAoMCwgX3dlZWtzLmRlbGV0ZUhhbmRsZSkoZm9jdXNFbGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5cbi8vIFRPRE8gYWRkIGJ1dHRvbiAtIGFkZCBhIG5ldyBzbGlkZXIgdG8gbW9uZGF5XG4vLyBUT0RPIGRyYWcgYW5kIGRyb3AgaGFuZGxlc1xuLy8gVE9ETyBmaW5hbCBjYWxjdWxhdGlvbnMgZnVuY3Rpb25cbi8vIFRPRE8gaGFuZGxlIGN1c3RvbSBzaXplPz8/XG5cbn0se1wiLi93ZWVrc1wiOjJ9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5pbml0U2xpZGVyID0gaW5pdFNsaWRlcjtcbmV4cG9ydHMuZ2V0SXRlbXMgPSBnZXRJdGVtcztcbmV4cG9ydHMuYWRkTGFzdFdlZWtTbGlkZSA9IGFkZExhc3RXZWVrU2xpZGU7XG5leHBvcnRzLmRheXRpbWVTbGlkZXJDaGFuZ2VzID0gZGF5dGltZVNsaWRlckNoYW5nZXM7XG5leHBvcnRzLmFkZEhhbmRsZSA9IGFkZEhhbmRsZTtcbmV4cG9ydHMuZGVsZXRlSGFuZGxlID0gZGVsZXRlSGFuZGxlO1xuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxuQXJyYXkucHJvdG90eXBlLnJhbmRvbUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5sZW5ndGgpXTtcbn07XG52YXIgc2xpZGVyUG9wdXA7XG4kKHdpbmRvdykucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJzbGlkZXItcG9wdXBcIj48L2Rpdj4nKTtcbiAgICBzbGlkZXJQb3B1cCA9ICQoJyNzbGlkZXItcG9wdXAnKTtcbn0pO1xudmFyIGRheXRpbWVfb24gPSB0cnVlO1xuZnVuY3Rpb24gZmlsdGVyVmFsdWVzKHZhbHVlcywgZGF5dGltZV9vbikge1xuICAgIGlmIChkYXl0aW1lX29uKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdmaWx0ZXJpbmcuLi4nLCB2YWx1ZXMpO1xuICAgICAgICB2YWx1ZXMgPSB2YWx1ZXMuZmlsdGVyKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICBpZiAodiA8PSAxNCAmJiB2ID49IDQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc29sZS5sb2codmFsdWVzKTtcbiAgICByZXR1cm4gdmFsdWVzO1xufVxuZnVuY3Rpb24gZ2V0RGVmYXVsdFZhbHVlKGRheXRpbWVfb24pIHtcbiAgICB2YXIgdmFsdWUgPSAyMyAtIChtb21lbnQoKS5ob3VyKCkgKyAxKTtcbiAgICBpZiAoZGF5dGltZV9vbikge1xuICAgICAgICBpZiAodmFsdWUgPCA0KSB2YWx1ZSA9IDQ7ZWxzZSBpZiAodmFsdWUgPiAxNCkgdmFsdWUgPSAxNDtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gaW5pdFNsaWRlcihzZWxlY3RvciwgdmFsdWVzKSB7XG4gICAgdmFsdWVzID0gdmFsdWVzID8gZmlsdGVyVmFsdWVzKHZhbHVlcywgZGF5dGltZV9vbikgOiBbZ2V0RGVmYXVsdFZhbHVlKGRheXRpbWVfb24pXTtcbiAgICBzZWxlY3Rvci5zbGlkZXIoe1xuICAgICAgICBvcmllbnRhdGlvbjogJ3ZlcnRpY2FsJyxcbiAgICAgICAgbWluOiBkYXl0aW1lX29uID8gNCA6IDAsXG4gICAgICAgIG1heDogZGF5dGltZV9vbiA/IDE0IDogMjMsXG4gICAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgICAgICBzdGVwOiAxLFxuICAgICAgICBhbmltYXRlOiB0cnVlLFxuICAgICAgICBzdGFydDogZnVuY3Rpb24gc3RhcnQoZSwgdWkpIHtcbiAgICAgICAgICAgIHZhciB2ID0gMjMgLSB1aS52YWx1ZTtcbiAgICAgICAgICAgIHNsaWRlclBvcHVwLnRleHQodik7XG4gICAgICAgICAgICBzbGlkZXJQb3B1cC5zaG93KCk7XG4gICAgICAgICAgICBzbGlkZXJQb3B1cC5jc3MoJ3RvcCcsIHVpLmhhbmRsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSAxMCk7XG4gICAgICAgICAgICBzbGlkZXJQb3B1cC5jc3MoJ2xlZnQnLCB1aS5oYW5kbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCArIDMwKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2xpZGU6IGZ1bmN0aW9uIHNsaWRlKGUsIHVpKSB7XG4gICAgICAgICAgICB2YXIgdGhpc0Nvb3JkcyA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAvLyBvbmx5IHRyaWdnZXJpbmcgdGhlIGV2ZW50IGlmIG1vdXNlIGlzIGluIGEgcmFuZ2Ugb2YgdGhlIHNsaWRlclxuICAgICAgICAgICAgaWYgKCEoZS5wYWdlWCA8IHRoaXNDb29yZHMucmlnaHQgJiYgZS5wYWdlWCA+IHRoaXNDb29yZHMubGVmdCAmJiBlLnBhZ2VZIDwgdGhpc0Nvb3Jkcy5ib3R0b20gJiYgZS5wYWdlWSA+IHRoaXNDb29yZHMudG9wKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkaWZmVmFsdWVzID0gW107XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh1aS52YWx1ZXMpO1xuICAgICAgICAgICAgLy8gcHJldmVudCBoYW5kbGUgb3ZlcmxhcHBpbmdcbiAgICAgICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgdWkudmFsdWVzLmxlbmd0aDsgYSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRpZmZWYWx1ZXMuaW5kZXhPZih1aS52YWx1ZXNbYV0pID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRpZmZWYWx1ZXMucHVzaCh1aS52YWx1ZXNbYV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHYgPSAyMyAtIHVpLnZhbHVlO1xuICAgICAgICAgICAgc2xpZGVyUG9wdXAudGV4dCh2KTtcbiAgICAgICAgICAgIHNsaWRlclBvcHVwLmNzcygndG9wJywgdWkuaGFuZGxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCAtIDEwKTtcbiAgICAgICAgICAgIHNsaWRlclBvcHVwLmNzcygnbGVmdCcsIHVpLmhhbmRsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ICsgMzApO1xuICAgICAgICAgICAgJChcIi5jb250ZW50U2xpZGVyXCIpLmh0bWwodiArICcgaG91cicpO1xuICAgICAgICB9LFxuICAgICAgICBzdG9wOiBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgICAgICAgc2xpZGVyUG9wdXAuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coJ1ZBTFVFUycsIHZhbHVlcyk7XG4gICAgaWYgKHZhbHVlcy5sZW5ndGggPT0gMCkge1xuICAgICAgICBzZWxlY3Rvci5yZW1vdmVDbGFzcygnYWN0aXZlLXNsaWRlcicpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGVjdG9yLmFkZENsYXNzKCdhY3RpdmUtc2xpZGVyJyk7XG4gICAgfVxuICAgIHNldERyYWdnYWJsZSgpO1xufVxuXG5mdW5jdGlvbiBzZXREcmFnZ2FibGUoKSB7XG4gICAgJCgnLnVpLXNsaWRlci1oYW5kbGUnKS5vZmYoJ21vdXNlZG93bicpO1xuICAgICQoJy51aS1zbGlkZXItaGFuZGxlJykub24oJ2RyYWdzdGFydCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICAkKCcudWktc2xpZGVyLWhhbmRsZScpLm9uKCdtb3VzZWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnbW91c2Vkb3duJywgdGhpcyk7XG4gICAgICAgIHZhciB0YXJnZXRIYW5kbGUgPSB0aGlzO1xuICAgICAgICB2YXIgdGFyZ2V0U2xpZGVyID0gJCh0aGlzKS5wYXJlbnQoKVswXTtcbiAgICAgICAgY29uc29sZS5sb2codGFyZ2V0U2xpZGVyKTtcbiAgICAgICAgdmFyIGNsb25lID0gJCh0aGlzKS5jbG9uZSgpO1xuICAgICAgICBjbG9uZS5jc3MoJ3Bvc2l0aW9uJywgJ2Fic29sdXRlJyk7XG4gICAgICAgIGNsb25lLmNzcygnd2lkdGgnLCAnMjVweCcpLmNzcygnaGVpZ2h0JywgJzlweCcpLmNzcygnbGVmdCcsICcwJykuY3NzKCd0b3AnLCAwKS5jc3MoJ29wYWNpdHknLCAwLjUpO1xuICAgICAgICAkKCdib2R5JykuYXBwZW5kKGNsb25lKTtcbiAgICAgICAgZnVuY3Rpb24gbW92ZUF0KGUpIHtcbiAgICAgICAgICAgIHZhciB0aGlzQ29vcmRzID0gdGFyZ2V0U2xpZGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgaWYgKGUucGFnZVggPCB0aGlzQ29vcmRzLnJpZ2h0ICYmIGUucGFnZVggPiB0aGlzQ29vcmRzLmxlZnQgJiYgZS5wYWdlWSA8IHRoaXNDb29yZHMuYm90dG9tICYmIGUucGFnZVkgPiB0aGlzQ29vcmRzLnRvcCkge1xuICAgICAgICAgICAgICAgIGNsb25lLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsb25lLmNzcygnZGlzcGxheScsICdpbml0aWFsJyk7XG4gICAgICAgICAgICAgICAgY2xvbmUuY3NzKCdsZWZ0JywgZS5wYWdlWCAtIGNsb25lLndpZHRoKCkgLyAyKTtcbiAgICAgICAgICAgICAgICBjbG9uZS5jc3MoJ3RvcCcsIGUucGFnZVkgLSBjbG9uZS5oZWlnaHQoKSAvIDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICQoJ2JvZHknKS5tb3VzZW1vdmUoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdtb3VzZW1vdmUnKTtcbiAgICAgICAgICAgIG1vdmVBdChlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnYm9keScpLm1vdXNldXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ21vdXNldXAnKTtcbiAgICAgICAgICAgICQoJ2JvZHknKS5vZmYoJ21vdXNldXAnKTtcbiAgICAgICAgICAgICQoJ2JvZHknKS5vZmYoJ21vdXNlbW92ZScpO1xuICAgICAgICAgICAgY2xvbmUucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgIC8vIHZhciB2YWx1ZXMgPSAkKHRhcmdldEhhbmRsZSkucGFyZW50KCkuc2xpZGVyKCd2YWx1ZXMnKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHZhbHVlcyk7XG4gICAgICAgICAgICAvLyBpbml0U2xpZGVyKCQodGFyZ2V0SGFuZGxlKS5wYXJlbnQoKSwgdmFsdWVzKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldEl0ZW1zKCkge1xuICAgIHJldHVybiAkKCcuZmxleHNsaWRlciAuc2xpZGVzIC5pdGVtOm5vdCguY2xvbmUpJyk7XG59XG5cbmZ1bmN0aW9uIGFkZExhc3RXZWVrU2xpZGUoc2VsZWN0b3IpIHtcbiAgICB2YXIgY3R4ID0gc2VsZWN0b3IuZGF0YSgnZmxleHNsaWRlcicpO1xuXG4gICAgdmFyIHRlbXBsYXRlID0gJCgnPGxpIGNsYXNzPVwiaXRlbVwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIml0ZW0td2Vla1wiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2NhbGUtd3JhcHBlclwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImxpc3Qtc2NhbGUtd3JhcFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJ0aW1lcy13cmFwLWxlZnRcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lLW1pblwiPjAwPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGltZS1tYXhcIj4yNDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJzY2FsZS1pdGVtXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5XCI+TW9uPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWRkLXRpbWVzLWxlZnRcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVmYXVsdC13cmFwXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb25kYXkgZGVmYXVsdC1zbGlkZXIgc2xpZGUtYWN0aXZlXCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwic2NhbGUtaXRlbVwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheVwiPlR1ZTwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtd3JhcFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXNsaWRlciAgdHVlc2RheVwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInNjYWxlLWl0ZW1cIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXlcIj5XZWQ8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXdyYXBcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVmYXVsdC1zbGlkZXIgd2VkbmVzZGF5XCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwic2NhbGUtaXRlbVwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheVwiPlRoPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtd3JhcFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXNsaWRlciB0aHVyc2RheVwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInNjYWxlLWl0ZW1cIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXlcIj5GcjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtd3JhcFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXNsaWRlciAgZnJpZGF5XCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwic2NhbGUtaXRlbVwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheVwiPlNhdDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtd3JhcFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXNsaWRlciAgc2F0dXJkYXlcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJzY2FsZS1pdGVtXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5XCI+U3VuPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWRkLXRpbWVzLXJpZ2h0XCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtd3JhcFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVmYXVsdC1zbGlkZXIgIHN1bmRheVwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInRpbWVzLXdyYXAtcmlnaHRcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lLW1pblwiPjAwPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGltZS1tYXhcIj4yNDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT4nKTtcbiAgICBjdHguYWRkU2xpZGUodGVtcGxhdGUpO1xufVxuXG5mdW5jdGlvbiBkYXl0aW1lU2xpZGVyQ2hhbmdlcygpIHtcbiAgICBpZiAoZGF5dGltZV9vbikge1xuICAgICAgICAkKCcuc3dpdGNoLW9uJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKCcuc3dpdGNoLW9mZicpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJCgnLmRlZmF1bHQtd3JhcCcpLmFkZENsYXNzKCdzbGlkZS13cmFwJyk7XG4gICAgICAgICQoJy5kZWZhdWx0LXNsaWRlcicpLmFkZENsYXNzKCdzbGlkZXInKTtcbiAgICAgICAgJCgnLnNsaWRlcicpLnJlbW92ZUNsYXNzKCdkZWZhdWx0LXNsaWRlcicpO1xuXG4gICAgICAgICQoJy5zbGlkZXInKS5zbGlkZXIoe1xuICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgbWF4OiAyM1xuICAgICAgICB9KTtcblxuICAgICAgICBkYXl0aW1lX29uID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChkYXl0aW1lX29uID09IGZhbHNlKSB7XG4gICAgICAgICQoJy5zd2l0Y2gtb2ZmJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKCcuc3dpdGNoLW9uJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKCcuc2xpZGUtd3JhcCcpLmFkZENsYXNzKCdkZWZhdWx0LXdyYXAnKTtcbiAgICAgICAgJCgnLmRlZmF1bHQtd3JhcCcpLnJlbW92ZUNsYXNzKCdzbGlkZS13cmFwJyk7XG4gICAgICAgICQoJy5zbGlkZXInKS5hZGRDbGFzcygnZGVmYXVsdC1zbGlkZXInKTtcbiAgICAgICAgJCgnLmRlZmF1bHQtc2xpZGVyJykucmVtb3ZlQ2xhc3MoJ3NsaWRlcicpO1xuXG4gICAgICAgIGRheXRpbWVfb24gPSB0cnVlO1xuICAgICAgICAkKCcuZGVmYXVsdC1zbGlkZXIuYWN0aXZlLXNsaWRlcicpLmVhY2goZnVuY3Rpb24gKGksIGVsKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gJChlbCkuc2xpZGVyKCd2YWx1ZXMnKTtcbiAgICAgICAgICAgICQoZWwpLnNsaWRlcignZGVzdHJveScpO1xuICAgICAgICAgICAgaW5pdFNsaWRlcigkKGVsKSwgdmFsdWVzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCQoJy5mbGV4LWFjdGl2ZS1zbGlkZSAuYWN0aXZlLXNsaWRlcicpLnNsaWRlcigndmFsdWVzJykpO1xufVxuXG5mdW5jdGlvbiBhZGRIYW5kbGUoKSB7XG4gICAgdmFyIGFjdGl2ZSA9ICQoJy5mbGV4LWFjdGl2ZS1zbGlkZScpO1xuICAgIHZhciBtb25kYXkgPSBhY3RpdmUuZmluZCgnLm1vbmRheScpO1xuICAgIHZhciBwb3NzaWJsZUFyciA9IFtdO1xuICAgIC8vIGEgbGlzdCBvZiBwb3NzaWJsZSBoYW5kbGUgdmFsdWVzIHdoaWNoIGNhbiBiZSBhZGRlZFxuICAgIGlmIChkYXl0aW1lX29uKSBwb3NzaWJsZUFyciA9IFs0LCA1LCA2LCA3LCA4LCA5LCAxMCwgMTEsIDEyLCAxMywgMTRdO2Vsc2Uge1xuICAgICAgICBwb3NzaWJsZUFyciA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkobmV3IEFycmF5KDI0KS5rZXlzKCkpKTtcbiAgICB9XG5cbiAgICBpZiAoIW1vbmRheS5oYXNDbGFzcygnYWN0aXZlLXNsaWRlcicpKSB7XG4gICAgICAgIGluaXRTbGlkZXIobW9uZGF5KTtcbiAgICAgICAgbW9uZGF5LmFkZENsYXNzKCdhY3RpdmUtc2xpZGVyJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHZhbHVlID0gbW9uZGF5LnNsaWRlcigndmFsdWUnKTtcbiAgICAgICAgdmFyIHZhbHVlcyA9IG1vbmRheS5zbGlkZXIoJ3ZhbHVlcycpO1xuICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSwgdmFsdWVzKTtcbiAgICAgICAgdmFyIHBvc3NpYmxlTmV3VmFsdWUgPSB2YWx1ZXNbdmFsdWVzLmxlbmd0aCAtIDFdIC0gMTtcbiAgICAgICAgaWYgKHZhbHVlcy5pbmRleE9mKHBvc3NpYmxlTmV3VmFsdWUpID09PSAtMSAmJiBwb3NzaWJsZUFyci5pbmRleE9mKHBvc3NpYmxlTmV3VmFsdWUpICE9PSAtMSkge1xuICAgICAgICAgICAgdmFsdWVzLnB1c2godmFsdWVzW3ZhbHVlcy5sZW5ndGggLSAxXSAtIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcG9zc2libGVBcnIgPSBwb3NzaWJsZUFyci5maWx0ZXIoZnVuY3Rpb24gKG51bSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZXMuaW5kZXhPZihudW0pID09IC0xO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncG9zc2libGUgcmFuZG9tIHZhbHVlcycsIHBvc3NpYmxlQXJyKTtcbiAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IHBvc3NpYmxlQXJyLnJhbmRvbUVsZW1lbnQoKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdyYW5kb20gbmV3IHZhbHVlJywgbmV3VmFsdWUpO1xuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKG5ld1ZhbHVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ25vIGNob2ljZXMgbGVmdCEgTm90aGluZyB0byBhZGQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc29sZS5sb2codmFsdWVzKTtcbiAgICAgICAgfVxuICAgICAgICBtb25kYXkuc2xpZGVyKCdkZXN0cm95Jyk7XG4gICAgICAgIGluaXRTbGlkZXIobW9uZGF5LCB2YWx1ZXMpO1xuICAgIH1cbiAgICBtb25kYXkuZmluZCgnLnVpLXNsaWRlci1oYW5kbGU6bGFzdCcpLmZvY3VzKCk7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZUhhbmRsZShoYW5kbGUpIHtcbiAgICBjb25zb2xlLmxvZyhoYW5kbGUpO1xuICAgIHZhciAkc2xpZGVyID0gaGFuZGxlLnBhcmVudCgpO1xuICAgIHZhciBoYW5kbGVJbmRleCA9ICRzbGlkZXIuZmluZCgnLnVpLXNsaWRlci1oYW5kbGUnKS5pbmRleChoYW5kbGUpO1xuICAgIHZhciB2YWx1ZXMgPSAkc2xpZGVyLnNsaWRlcigndmFsdWVzJyk7XG4gICAgY29uc29sZS5sb2coJ29sZCB2YWx1ZXMnLCB2YWx1ZXMpO1xuICAgIGNvbnNvbGUubG9nKGhhbmRsZUluZGV4KTtcbiAgICB2YWx1ZXMuc3BsaWNlKGhhbmRsZUluZGV4LCAxKTtcbiAgICBjb25zb2xlLmxvZygnbmV3IHZhbHVlcycsIHZhbHVlcyk7XG4gICAgJHNsaWRlci5zbGlkZXIoJ2Rlc3Ryb3knKTtcbiAgICBpbml0U2xpZGVyKCRzbGlkZXIsIHZhbHVlcyk7XG59XG5cbn0se31dfSx7fSxbMV0pO1xuIl19
