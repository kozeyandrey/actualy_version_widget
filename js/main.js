!function e(l,i,s){function n(d,t){if(!i[d]){if(!l[d]){var r="function"==typeof require&&require;if(!t&&r)return r(d,!0);if(a)return a(d,!0);var o=new Error("Cannot find module '"+d+"'");throw o.code="MODULE_NOT_FOUND",o}var c=i[d]={exports:{}};l[d][0].call(c.exports,function(e){var i=l[d][1][e];return n(i?i:e)},c,c.exports,e,l,i,s)}return i[d].exports}for(var a="function"==typeof require&&require,d=0;d<s.length;d++)n(s[d]);return n}({1:[function(e,l,i){"use strict";var s=e("./weeks");$(window).ready(function(){function e(e){var l=e?moment().week(e):moment(),i=l.isoWeekday(1).format("DD"),s=l.isoWeekday(7).format("DD"),n=l.format("MM");$(".item-week").html("Week "+i+"-"+s+"."+n)}var l=void 0;$(".on-btn").click(function(){if("none"==(l=document.getElementById("box").style.display)){document.getElementById("box").style.display="block",$(".flexslider").flexslider({animation:"slide",slideshow:!1,controlNav:!1,controlsContainer:$(".custom-controls-container"),customDirectionNav:$(".custom-navigation a"),keyboard:!1,animationLoop:!0,after:function(e){e.currentSlide==e.last&&((0,s.addLastWeekSlide)($(".flexslider")),console.log("last transition ended"))}});var e=moment().isoWeekday(),i=void 0;switch(e){case 1:i=".monday";break;case 2:i=".tuesday";break;case 3:i=".wednesday";break;case 4:i=".thursday";break;case 5:i=".friday";break;case 6:i=".saturday";break;case 7:i=".sunday"}(0,s.initSlider)($(".flex-active-slide").find(i))}else"block"==l&&(document.getElementById("box").style.display="none")}),$(".close-button").click(function(){document.getElementById("box").style.display="none"}),$(".switch-on").click(s.daytimeSliderChanges),$(".switch-off").click(s.daytimeSliderChanges);var i=moment().week(),n=moment().week();e(n),n==i?($(".flex-prev").hide(),$(".flex-prev-block").show()):($(".flex-prev-block").hide(),$(".flex-prev").show()),$(".flex-next").click(function(){$(".flex-prev").show(),$(".flex-prev-block").hide(),n==i?n=i+1:n==a?n=a+1:n+=1,e(n)});var a,d=n;$(".flex-prev").click(function(){if(n==i)return!1;n-=1,d=n,d==i?($(".flex-prev").hide(),$(".flex-prev-block").show()):($(".flex-prev").show(),$(".flex-prev-block").hide()),e(n),a=n}),$(".add-button").click(function(){(0,s.addHandle)()});var t=null;$(".del-button").mousedown(function(){console.log("delete"),console.log($(":focus")),t=$(":focus").hasClass("ui-slider-handle")?$(":focus"):null}),$(".del-button").click(function(){t&&(0,s.deleteHandle)(t)})})},{"./weeks":2}],2:[function(e,l,i){"use strict";function s(e){if(Array.isArray(e)){for(var l=0,i=Array(e.length);l<e.length;l++)i[l]=e[l];return i}return Array.from(e)}function n(e,l){return l&&(console.log("filtering...",e),e=e.filter(function(e){return e<=14&&e>=4})),console.log(e),e}function a(e){var l=23-(moment().hour()+1);return e&&(l<4?l=4:l>14&&(l=14)),l}function d(e,l){l=l?n(l,f):[a(f)],e.slider({orientation:"vertical",min:f?4:0,max:f?14:23,values:l,step:1,animate:!0,start:function(e,l){var i=23-l.value;u.text(i),u.show(),u.css("top",l.handle.getBoundingClientRect().top-10),u.css("left",l.handle.getBoundingClientRect().left+30)},slide:function(e,l){var i=[];console.log(l.values);for(var s=0;s<l.values.length;s++){if(i.indexOf(l.values[s])>-1)return!1;i.push(l.values[s])}var n=23-l.value;u.text(n),u.css("top",l.handle.getBoundingClientRect().top-10),u.css("left",l.handle.getBoundingClientRect().left+30),$(".contentSlider").html(n+" hour")},stop:function(){u.hide()}}),console.log("VALUES",l),0==l.length?e.removeClass("active-slider"):e.addClass("active-slider")}function t(){return $(".flexslider .slides .item:not(.clone)")}function r(e){var l=e.data("flexslider"),i=$('<li class="item">\n                                new\n                                <div class="item-week">\n                                </div>\n                                <div class="scale-wrapper">\n                                    <ul class="list-scale-wrap">\n                                        <li class="times-wrap-left">\n                                            <div class="time-min">00</div>\n                                            <div class="time-max">24</div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Mon</div>\n                                            <div class="add-times-left">\n                                                <div class="default-wrap">\n                                                    <div class="monday default-slider slide-active"></div>\n                                                </div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Tue</div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider  tuesday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Wed</div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider wednesday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Th</div>\n                                            <div></div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider thursday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Fr</div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider  friday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Sat</div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider  saturday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Sun</div>\n                                            <div class="add-times-right">\n                                                <div class="default-wrap">\n                                                    <div class="default-slider  sunday"></div>\n                                                </div>\n                                            </div>\n                                        </li>\n                                        <li class="times-wrap-right">\n                                            <div class="time-min">00</div>\n                                            <div class="time-max">24</div>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </li>');l.addSlide(i)}function o(){f?($(".switch-on").removeClass("active"),$(".switch-off").addClass("active"),$(".default-wrap").addClass("slide-wrap"),$(".default-slider").addClass("slider"),$(".slider").removeClass("default-slider"),$(".slider").slider({min:0,max:23}),f=!1):0==f&&($(".switch-off").removeClass("active"),$(".switch-on").addClass("active"),$(".slide-wrap").addClass("default-wrap"),$(".default-wrap").removeClass("slide-wrap"),$(".slider").addClass("default-slider"),$(".default-slider").removeClass("slider"),f=!0,$(".default-slider.active-slider").each(function(e,l){var i=$(l).slider("values");$(l).slider("destroy"),d($(l),i)})),console.log($(".flex-active-slide .active-slider").slider("values"))}function c(){var e=$(".flex-active-slide"),l=e.find(".monday"),i=[];if(i=f?[4,5,6,7,8,9,10,11,12,13,14]:[].concat(s(new Array(24).keys())),l.hasClass("active-slider")){var n=l.slider("value"),a=l.slider("values");console.log(n,a);var t=a[a.length-1]-1;if(a.indexOf(t)===-1&&i.indexOf(t)!==-1)a.push(a[a.length-1]-1);else{i=i.filter(function(e){return a.indexOf(e)==-1});var r=i.randomElement();void 0!=r&&a.push(r),console.log(a)}l.slider("destroy"),d(l,a)}else d(l),l.addClass("active-slider")}function v(e){console.log(e);var l=e.parent(),i=l.find(".ui-slider-handle").index(e),s=l.slider("values");console.log("old values",s),console.log(i),s.splice(i,1),console.log("new values",s),l.slider("destroy"),d(l,s)}Object.defineProperty(i,"__esModule",{value:!0}),i.initSlider=d,i.getItems=t,i.addLastWeekSlide=r,i.daytimeSliderChanges=o,i.addHandle=c,i.deleteHandle=v,Array.prototype.randomElement=function(){return this[Math.floor(Math.random()*this.length)]};var u;$(window).ready(function(){$("body").append('<div id="slider-popup"></div>'),u=$("#slider-popup")});var f=!0},{}]},{},[1]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZSIsInQiLCJuIiwiciIsInMiLCJvIiwidSIsImEiLCJyZXF1aXJlIiwiaSIsImYiLCJFcnJvciIsImNvZGUiLCJsIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiX3dlZWtzIiwiJCIsIndpbmRvdyIsInJlYWR5Iiwic2V0V2Vla1RleHQiLCJ3ZWVrIiwibSIsIm1vbWVudCIsIm1vbmRheSIsImlzb1dlZWtkYXkiLCJmb3JtYXQiLCJzdW5kYXkiLCJ0aGlzTW9udGgiLCJodG1sIiwiZGlzcGxheSIsImNsaWNrIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiZmxleHNsaWRlciIsImFuaW1hdGlvbiIsInNsaWRlc2hvdyIsImNvbnRyb2xOYXYiLCJjb250cm9sc0NvbnRhaW5lciIsImN1c3RvbURpcmVjdGlvbk5hdiIsImtleWJvYXJkIiwiYW5pbWF0aW9uTG9vcCIsImFmdGVyIiwiY3R4IiwiY3VycmVudFNsaWRlIiwibGFzdCIsImFkZExhc3RXZWVrU2xpZGUiLCJjb25zb2xlIiwibG9nIiwiZGF5IiwiYWN0aXZlRWxlbSIsImluaXRTbGlkZXIiLCJmaW5kIiwiZGF5dGltZVNsaWRlckNoYW5nZXMiLCJ0aGlzV2VlayIsImhpZGUiLCJzaG93IiwicHJldldlZWsiLCJ0aGVXZWVrIiwiYWRkSGFuZGxlIiwiZm9jdXNFbGVtIiwibW91c2Vkb3duIiwiaGFzQ2xhc3MiLCJkZWxldGVIYW5kbGUiLCIuL3dlZWtzIiwiMiIsIl90b0NvbnN1bWFibGVBcnJheSIsImFyciIsIkFycmF5IiwiaXNBcnJheSIsImFycjIiLCJmcm9tIiwiZmlsdGVyVmFsdWVzIiwidmFsdWVzIiwiZGF5dGltZV9vbiIsImZpbHRlciIsInYiLCJnZXREZWZhdWx0VmFsdWUiLCJ2YWx1ZSIsImhvdXIiLCJzZWxlY3RvciIsInNsaWRlciIsIm9yaWVudGF0aW9uIiwibWluIiwibWF4Iiwic3RlcCIsImFuaW1hdGUiLCJzdGFydCIsInVpIiwic2xpZGVyUG9wdXAiLCJ0ZXh0IiwiY3NzIiwiaGFuZGxlIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwibGVmdCIsInNsaWRlIiwiZGlmZlZhbHVlcyIsImluZGV4T2YiLCJwdXNoIiwic3RvcCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJnZXRJdGVtcyIsImRhdGEiLCJ0ZW1wbGF0ZSIsImFkZFNsaWRlIiwiZWFjaCIsImVsIiwiYWN0aXZlIiwicG9zc2libGVBcnIiLCJjb25jYXQiLCJrZXlzIiwicG9zc2libGVOZXdWYWx1ZSIsIm51bSIsIm5ld1ZhbHVlIiwicmFuZG9tRWxlbWVudCIsInVuZGVmaW5lZCIsIiRzbGlkZXIiLCJwYXJlbnQiLCJoYW5kbGVJbmRleCIsImluZGV4Iiwic3BsaWNlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJwcm90b3R5cGUiLCJ0aGlzIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYXBwZW5kIl0sIm1hcHBpbmdzIjoiQ0FBQSxRQUFVQSxHQUFFQyxFQUFFQyxFQUFFQyxHQUFHLFFBQVNDLEdBQUVDLEVBQUVDLEdBQUcsSUFBSUosRUFBRUcsR0FBRyxDQUFDLElBQUlKLEVBQUVJLEdBQUcsQ0FBQyxHQUFJRSxHQUFrQixrQkFBVEMsVUFBcUJBLE9BQVEsS0FBSUYsR0FBR0MsRUFBRSxNQUFPQSxHQUFFRixHQUFFLEVBQUksSUFBR0ksRUFBRSxNQUFPQSxHQUFFSixHQUFFLEVBQUksSUFBSUssR0FBRSxHQUFJQyxPQUFNLHVCQUF1Qk4sRUFBRSxJQUFLLE1BQU1LLEdBQUVFLEtBQUssbUJBQW1CRixFQUFFLEdBQUlHLEdBQUVYLEVBQUVHLElBQUlTLFdBQVliLEdBQUVJLEdBQUcsR0FBR1UsS0FBS0YsRUFBRUMsUUFBUSxTQUFTZCxHQUFHLEdBQUlFLEdBQUVELEVBQUVJLEdBQUcsR0FBR0wsRUFBRyxPQUFPSSxHQUFFRixFQUFFQSxFQUFFRixJQUFJYSxFQUFFQSxFQUFFQyxRQUFRZCxFQUFFQyxFQUFF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ekMsR0FBT3lCLFFBQVFnQixLQUFTLEdBR25DLElBQUlDLEdBQVdMLEVBQVlNLGVBRVhDLFNBQVpGLEdBQ0ExQyxFQUFPMEIsS0FBS2dCLEdBS2hCcEUsUUFBUUMsSUFBSXlCLEdBRWhCbEQsRUFBTzBELE9BQU8sV0FDZDlCLEVBQVc1QixFQUFRa0QsT0F6Qm5CdEIsR0FBVzVCLEdBQ1hBLEVBQU8rRSxTQUFTLGlCQTRCeEIsUUFBU3ZDLEdBQWE2QixHQUNsQjdDLFFBQVFDLElBQUk0QyxFQUNaLElBQUkwQixHQUFVMUIsRUFBTzJCLFNBQ2pCQyxFQUFjRixFQUFRbEUsS0FBSyxxQkFBcUJxRSxNQUFNN0IsR0FDdERuQixFQUFTNkMsRUFBUXJDLE9BQU8sU0FDNUJsQyxTQUFRQyxJQUFJLGFBQWN5QixHQUMxQjFCLFFBQVFDLElBQUl3RSxHQUNaL0MsRUFBT2lELE9BQU9GLEVBQWEsR0FDM0J6RSxRQUFRQyxJQUFJLGFBQWN5QixHQUMxQjZDLEVBQVFyQyxPQUFPLFdBQ2Y5QixFQUFXbUUsRUFBUzdDLEdBbkx4QmtELE9BQU9DLGVBQWVsSCxFQUFTLGNBQzNCb0UsT0FBTyxJQUVYcEUsRUFBUXlDLFdBQWFBLEVBQ3JCekMsRUFBUTZGLFNBQVdBLEVBQ25CN0YsRUFBUW9DLGlCQUFtQkEsRUFDM0JwQyxFQUFRMkMscUJBQXVCQSxFQUMvQjNDLEVBQVFpRCxVQUFZQSxFQUNwQmpELEVBQVFxRCxhQUFlQSxFQUl2QkssTUFBTXlELFVBQVVULGNBQWdCLFdBQzVCLE1BQU9VLE1BQUtDLEtBQUtDLE1BQU1ELEtBQUtFLFNBQVdILEtBQUtsSCxTQUVoRCxJQUFJNkUsRUFDSnpFLEdBQUVDLFFBQVFDLE1BQU0sV0FDWkYsRUFBRSxRQUFRa0gsT0FBTyxpQ0FDakJ6QyxFQUFjekUsRUFBRSxrQkFFcEIsSUFBSTBELElBQWEsWUFrS04iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIF93ZWVrcyA9IHJlcXVpcmUoJy4vd2Vla3MnKTtcblxuJCh3aW5kb3cpLnJlYWR5KGZ1bmN0aW9uICgpIHtcblxuICAgIC8vICBPUEVOIFdJREdFVFxuICAgIHtcbiAgICAgICAgdmFyIGRpc3BsYXkgPSB2b2lkIDA7XG4gICAgICAgICQoJy5vbi1idG4nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JveCcpLnN0eWxlLmRpc3BsYXk7XG4gICAgICAgICAgICBpZiAoZGlzcGxheSA9PSAnbm9uZScpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm94Jykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgICAgICAgICAgICAgICAkKCcuZmxleHNsaWRlcicpLmZsZXhzbGlkZXIoe1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb246ICdzbGlkZScsXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc2hvdzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xOYXY6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sc0NvbnRhaW5lcjogJCgnLmN1c3RvbS1jb250cm9scy1jb250YWluZXInKSxcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tRGlyZWN0aW9uTmF2OiAkKCcuY3VzdG9tLW5hdmlnYXRpb24gYScpLFxuICAgICAgICAgICAgICAgICAgICBrZXlib2FyZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbkxvb3A6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGFmdGVyOiBmdW5jdGlvbiBhZnRlcihjdHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHguY3VycmVudFNsaWRlID09IGN0eC5sYXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKDAsIF93ZWVrcy5hZGRMYXN0V2Vla1NsaWRlKSgkKCcuZmxleHNsaWRlcicpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbGFzdCB0cmFuc2l0aW9uIGVuZGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIFNldCBDdXJyZW50IGRheSBzbGlkZXIgYWN0aXZlLCB3aXRoIG9uZSB2YWx1ZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRheSA9IG1vbWVudCgpLmlzb1dlZWtkYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZUVsZW0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZGF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlRWxlbSA9ICcubW9uZGF5JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVFbGVtID0gJy50dWVzZGF5JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVFbGVtID0gJy53ZWRuZXNkYXknO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUVsZW0gPSAnLnRodXJzZGF5JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVFbGVtID0gJy5mcmlkYXknO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUVsZW0gPSAnLnNhdHVyZGF5JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVFbGVtID0gJy5zdW5kYXknO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICgwLCBfd2Vla3MuaW5pdFNsaWRlcikoJCgnLmZsZXgtYWN0aXZlLXNsaWRlJykuZmluZChhY3RpdmVFbGVtKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChkaXNwbGF5ID09ICdibG9jaycpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm94Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIENMT1NFUyBXSURHRVRcbiAgICAkKCcuY2xvc2UtYnV0dG9uJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm94Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9KTtcblxuICAgIC8vIERBWVRJTUUgT05MWSBPRkYgT1IgT05cblxuXG4gICAgJCgnLnN3aXRjaC1vbicpLmNsaWNrKF93ZWVrcy5kYXl0aW1lU2xpZGVyQ2hhbmdlcyk7XG4gICAgJCgnLnN3aXRjaC1vZmYnKS5jbGljayhfd2Vla3MuZGF5dGltZVNsaWRlckNoYW5nZXMpO1xuXG4gICAgLy8gV2hlbiBjbGlja2luZyBvbiB0aGUgYXJyb3dzIGdlbmVyYXRlIHdlZWsgdGV4dFxuICAgIGZ1bmN0aW9uIHNldFdlZWtUZXh0KHdlZWspIHtcbiAgICAgICAgdmFyIG0gPSB3ZWVrID8gbW9tZW50KCkud2Vlayh3ZWVrKSA6IG1vbWVudCgpO1xuICAgICAgICB2YXIgbW9uZGF5ID0gbS5pc29XZWVrZGF5KDEpLmZvcm1hdCgnREQnKTtcbiAgICAgICAgdmFyIHN1bmRheSA9IG0uaXNvV2Vla2RheSg3KS5mb3JtYXQoJ0REJyk7XG4gICAgICAgIHZhciB0aGlzTW9udGggPSBtLmZvcm1hdCgnTU0nKTtcbiAgICAgICAgJCgnLml0ZW0td2VlaycpLmh0bWwoJ1dlZWsgJyArIG1vbmRheSArICctJyArIHN1bmRheSArICcuJyArIHRoaXNNb250aCk7XG4gICAgfVxuXG4gICAgdmFyIHRoaXNXZWVrID0gbW9tZW50KCkud2VlaygpO1xuICAgIHZhciB3ZWVrID0gbW9tZW50KCkud2VlaygpO1xuICAgIHNldFdlZWtUZXh0KHdlZWspO1xuICAgIGlmICh3ZWVrID09IHRoaXNXZWVrKSB7XG4gICAgICAgICQoJy5mbGV4LXByZXYnKS5oaWRlKCk7XG4gICAgICAgICQoJy5mbGV4LXByZXYtYmxvY2snKS5zaG93KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgJCgnLmZsZXgtcHJldi1ibG9jaycpLmhpZGUoKTtcbiAgICAgICAgJCgnLmZsZXgtcHJldicpLnNob3coKTtcbiAgICB9XG5cbiAgICAkKCcuZmxleC1uZXh0JykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcuZmxleC1wcmV2Jykuc2hvdygpO1xuICAgICAgICAkKCcuZmxleC1wcmV2LWJsb2NrJykuaGlkZSgpO1xuXG4gICAgICAgIGlmICh3ZWVrID09IHRoaXNXZWVrKSB7XG4gICAgICAgICAgICB3ZWVrID0gdGhpc1dlZWsgKyAxO1xuICAgICAgICB9IGVsc2UgaWYgKHdlZWsgPT0gcHJldldlZWspIHtcbiAgICAgICAgICAgIHdlZWsgPSBwcmV2V2VlayArIDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3ZWVrID0gd2VlayArIDE7XG4gICAgICAgIH1cbiAgICAgICAgc2V0V2Vla1RleHQod2Vlayk7XG4gICAgfSk7XG5cbiAgICB2YXIgdGhlV2VlayA9IHdlZWs7XG4gICAgdmFyIHByZXZXZWVrO1xuICAgICQoJy5mbGV4LXByZXYnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh3ZWVrID09IHRoaXNXZWVrKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3ZWVrID0gd2VlayAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgdGhlV2VlayA9IHdlZWs7XG4gICAgICAgIGlmICh0aGVXZWVrID09IHRoaXNXZWVrKSB7XG4gICAgICAgICAgICAkKCcuZmxleC1wcmV2JykuaGlkZSgpO1xuICAgICAgICAgICAgJCgnLmZsZXgtcHJldi1ibG9jaycpLnNob3coKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJy5mbGV4LXByZXYnKS5zaG93KCk7XG4gICAgICAgICAgICAkKCcuZmxleC1wcmV2LWJsb2NrJykuaGlkZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0V2Vla1RleHQod2Vlayk7XG5cbiAgICAgICAgcHJldldlZWsgPSB3ZWVrO1xuICAgIH0pO1xuXG4gICAgLy8gQUREIEFORCBERUwgQlVUVE9OXG5cbiAgICAkKCcuYWRkLWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgKDAsIF93ZWVrcy5hZGRIYW5kbGUpKCk7XG4gICAgfSk7XG4gICAge1xuICAgICAgICB2YXIgZm9jdXNFbGVtID0gbnVsbDtcbiAgICAgICAgJCgnLmRlbC1idXR0b24nKS5tb3VzZWRvd24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2RlbGV0ZScpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJCgnOmZvY3VzJykpO1xuICAgICAgICAgICAgJCgnOmZvY3VzJykuaGFzQ2xhc3MoJ3VpLXNsaWRlci1oYW5kbGUnKSA/IGZvY3VzRWxlbSA9ICQoJzpmb2N1cycpIDogZm9jdXNFbGVtID0gbnVsbDtcbiAgICAgICAgfSk7XG4gICAgICAgICQoJy5kZWwtYnV0dG9uJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGZvY3VzRWxlbSkge1xuICAgICAgICAgICAgICAgICgwLCBfd2Vla3MuZGVsZXRlSGFuZGxlKShmb2N1c0VsZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuLy8gVE9ETyBhZGQgYnV0dG9uIC0gYWRkIGEgbmV3IHNsaWRlciB0byBtb25kYXlcbi8vIFRPRE8gZHJhZyBhbmQgZHJvcCBoYW5kbGVzXG4vLyBUT0RPIGZpbmFsIGNhbGN1bGF0aW9ucyBmdW5jdGlvblxuLy8gVE9ETyBoYW5kbGUgY3VzdG9tIHNpemU/Pz9cblxufSx7XCIuL3dlZWtzXCI6Mn1dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmluaXRTbGlkZXIgPSBpbml0U2xpZGVyO1xuZXhwb3J0cy5nZXRJdGVtcyA9IGdldEl0ZW1zO1xuZXhwb3J0cy5hZGRMYXN0V2Vla1NsaWRlID0gYWRkTGFzdFdlZWtTbGlkZTtcbmV4cG9ydHMuZGF5dGltZVNsaWRlckNoYW5nZXMgPSBkYXl0aW1lU2xpZGVyQ2hhbmdlcztcbmV4cG9ydHMuYWRkSGFuZGxlID0gYWRkSGFuZGxlO1xuZXhwb3J0cy5kZWxldGVIYW5kbGUgPSBkZWxldGVIYW5kbGU7XG5cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gZWxzZSB7IHJldHVybiBBcnJheS5mcm9tKGFycik7IH0gfVxuXG5BcnJheS5wcm90b3R5cGUucmFuZG9tRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLmxlbmd0aCldO1xufTtcbnZhciBzbGlkZXJQb3B1cDtcbiQod2luZG93KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cInNsaWRlci1wb3B1cFwiPjwvZGl2PicpO1xuICAgIHNsaWRlclBvcHVwID0gJCgnI3NsaWRlci1wb3B1cCcpO1xufSk7XG52YXIgZGF5dGltZV9vbiA9IHRydWU7XG5mdW5jdGlvbiBmaWx0ZXJWYWx1ZXModmFsdWVzLCBkYXl0aW1lX29uKSB7XG4gICAgaWYgKGRheXRpbWVfb24pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2ZpbHRlcmluZy4uLicsIHZhbHVlcyk7XG4gICAgICAgIHZhbHVlcyA9IHZhbHVlcy5maWx0ZXIoZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgIGlmICh2IDw9IDE0ICYmIHYgPj0gNCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyh2YWx1ZXMpO1xuICAgIHJldHVybiB2YWx1ZXM7XG59XG5mdW5jdGlvbiBnZXREZWZhdWx0VmFsdWUoZGF5dGltZV9vbikge1xuICAgIHZhciB2YWx1ZSA9IDIzIC0gKG1vbWVudCgpLmhvdXIoKSArIDEpO1xuICAgIGlmIChkYXl0aW1lX29uKSB7XG4gICAgICAgIGlmICh2YWx1ZSA8IDQpIHZhbHVlID0gNDtlbHNlIGlmICh2YWx1ZSA+IDE0KSB2YWx1ZSA9IDE0O1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiBpbml0U2xpZGVyKHNlbGVjdG9yLCB2YWx1ZXMpIHtcbiAgICB2YWx1ZXMgPSB2YWx1ZXMgPyBmaWx0ZXJWYWx1ZXModmFsdWVzLCBkYXl0aW1lX29uKSA6IFtnZXREZWZhdWx0VmFsdWUoZGF5dGltZV9vbildO1xuICAgIHNlbGVjdG9yLnNsaWRlcih7XG4gICAgICAgIG9yaWVudGF0aW9uOiAndmVydGljYWwnLFxuICAgICAgICBtaW46IGRheXRpbWVfb24gPyA0IDogMCxcbiAgICAgICAgbWF4OiBkYXl0aW1lX29uID8gMTQgOiAyMyxcbiAgICAgICAgdmFsdWVzOiB2YWx1ZXMsXG4gICAgICAgIHN0ZXA6IDEsXG4gICAgICAgIGFuaW1hdGU6IHRydWUsXG4gICAgICAgIHN0YXJ0OiBmdW5jdGlvbiBzdGFydChlLCB1aSkge1xuICAgICAgICAgICAgdmFyIHYgPSAyMyAtIHVpLnZhbHVlO1xuICAgICAgICAgICAgc2xpZGVyUG9wdXAudGV4dCh2KTtcbiAgICAgICAgICAgIHNsaWRlclBvcHVwLnNob3coKTtcbiAgICAgICAgICAgIHNsaWRlclBvcHVwLmNzcygndG9wJywgdWkuaGFuZGxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCAtIDEwKTtcbiAgICAgICAgICAgIHNsaWRlclBvcHVwLmNzcygnbGVmdCcsIHVpLmhhbmRsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ICsgMzApO1xuICAgICAgICB9LFxuICAgICAgICBzbGlkZTogZnVuY3Rpb24gc2xpZGUoZSwgdWkpIHtcbiAgICAgICAgICAgIHZhciBkaWZmVmFsdWVzID0gW107XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh1aS52YWx1ZXMpO1xuICAgICAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCB1aS52YWx1ZXMubGVuZ3RoOyBhKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlmZlZhbHVlcy5pbmRleE9mKHVpLnZhbHVlc1thXSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGlmZlZhbHVlcy5wdXNoKHVpLnZhbHVlc1thXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgdiA9IDIzIC0gdWkudmFsdWU7XG4gICAgICAgICAgICBzbGlkZXJQb3B1cC50ZXh0KHYpO1xuICAgICAgICAgICAgc2xpZGVyUG9wdXAuY3NzKCd0b3AnLCB1aS5oYW5kbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gMTApO1xuICAgICAgICAgICAgc2xpZGVyUG9wdXAuY3NzKCdsZWZ0JywgdWkuaGFuZGxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgKyAzMCk7XG4gICAgICAgICAgICAkKFwiLmNvbnRlbnRTbGlkZXJcIikuaHRtbCh2ICsgJyBob3VyJyk7XG4gICAgICAgIH0sXG4gICAgICAgIHN0b3A6IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICAgICAgICBzbGlkZXJQb3B1cC5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZygnVkFMVUVTJywgdmFsdWVzKTtcbiAgICBpZiAodmFsdWVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIHNlbGVjdG9yLnJlbW92ZUNsYXNzKCdhY3RpdmUtc2xpZGVyJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZWN0b3IuYWRkQ2xhc3MoJ2FjdGl2ZS1zbGlkZXInKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEl0ZW1zKCkge1xuICAgIHJldHVybiAkKCcuZmxleHNsaWRlciAuc2xpZGVzIC5pdGVtOm5vdCguY2xvbmUpJyk7XG59XG5cbmZ1bmN0aW9uIGFkZExhc3RXZWVrU2xpZGUoc2VsZWN0b3IpIHtcbiAgICB2YXIgY3R4ID0gc2VsZWN0b3IuZGF0YSgnZmxleHNsaWRlcicpO1xuXG4gICAgdmFyIHRlbXBsYXRlID0gJCgnPGxpIGNsYXNzPVwiaXRlbVwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaXRlbS13ZWVrXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzY2FsZS13cmFwcGVyXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwibGlzdC1zY2FsZS13cmFwXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInRpbWVzLXdyYXAtbGVmdFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRpbWUtbWluXCI+MDA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lLW1heFwiPjI0PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInNjYWxlLWl0ZW1cIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXlcIj5Nb248L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhZGQtdGltZXMtbGVmdFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXdyYXBcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vbmRheSBkZWZhdWx0LXNsaWRlciBzbGlkZS1hY3RpdmVcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJzY2FsZS1pdGVtXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5XCI+VHVlPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVmYXVsdC13cmFwXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtc2xpZGVyICB0dWVzZGF5XCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwic2NhbGUtaXRlbVwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheVwiPldlZDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtd3JhcFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXNsaWRlciB3ZWRuZXNkYXlcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJzY2FsZS1pdGVtXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5XCI+VGg8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVmYXVsdC13cmFwXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtc2xpZGVyIHRodXJzZGF5XCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwic2NhbGUtaXRlbVwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheVwiPkZyPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVmYXVsdC13cmFwXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtc2xpZGVyICBmcmlkYXlcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJzY2FsZS1pdGVtXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5XCI+U2F0PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVmYXVsdC13cmFwXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtc2xpZGVyICBzYXR1cmRheVwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInNjYWxlLWl0ZW1cIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXlcIj5TdW48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhZGQtdGltZXMtcmlnaHRcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVmYXVsdC13cmFwXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXNsaWRlciAgc3VuZGF5XCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwidGltZXMtd3JhcC1yaWdodFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRpbWUtbWluXCI+MDA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lLW1heFwiPjI0PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPicpO1xuICAgIGN0eC5hZGRTbGlkZSh0ZW1wbGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGRheXRpbWVTbGlkZXJDaGFuZ2VzKCkge1xuICAgIGlmIChkYXl0aW1lX29uKSB7XG4gICAgICAgICQoJy5zd2l0Y2gtb24nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICQoJy5zd2l0Y2gtb2ZmJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKCcuZGVmYXVsdC13cmFwJykuYWRkQ2xhc3MoJ3NsaWRlLXdyYXAnKTtcbiAgICAgICAgJCgnLmRlZmF1bHQtc2xpZGVyJykuYWRkQ2xhc3MoJ3NsaWRlcicpO1xuICAgICAgICAkKCcuc2xpZGVyJykucmVtb3ZlQ2xhc3MoJ2RlZmF1bHQtc2xpZGVyJyk7XG5cbiAgICAgICAgJCgnLnNsaWRlcicpLnNsaWRlcih7XG4gICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICBtYXg6IDIzXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRheXRpbWVfb24gPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKGRheXRpbWVfb24gPT0gZmFsc2UpIHtcbiAgICAgICAgJCgnLnN3aXRjaC1vZmYnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICQoJy5zd2l0Y2gtb24nKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICQoJy5zbGlkZS13cmFwJykuYWRkQ2xhc3MoJ2RlZmF1bHQtd3JhcCcpO1xuICAgICAgICAkKCcuZGVmYXVsdC13cmFwJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLXdyYXAnKTtcbiAgICAgICAgJCgnLnNsaWRlcicpLmFkZENsYXNzKCdkZWZhdWx0LXNsaWRlcicpO1xuICAgICAgICAkKCcuZGVmYXVsdC1zbGlkZXInKS5yZW1vdmVDbGFzcygnc2xpZGVyJyk7XG5cbiAgICAgICAgZGF5dGltZV9vbiA9IHRydWU7XG4gICAgICAgICQoJy5kZWZhdWx0LXNsaWRlci5hY3RpdmUtc2xpZGVyJykuZWFjaChmdW5jdGlvbiAoaSwgZWwpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSAkKGVsKS5zbGlkZXIoJ3ZhbHVlcycpO1xuICAgICAgICAgICAgJChlbCkuc2xpZGVyKCdkZXN0cm95Jyk7XG4gICAgICAgICAgICBpbml0U2xpZGVyKCQoZWwpLCB2YWx1ZXMpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coJCgnLmZsZXgtYWN0aXZlLXNsaWRlIC5hY3RpdmUtc2xpZGVyJykuc2xpZGVyKCd2YWx1ZXMnKSk7XG59XG5cbmZ1bmN0aW9uIGFkZEhhbmRsZSgpIHtcbiAgICB2YXIgYWN0aXZlID0gJCgnLmZsZXgtYWN0aXZlLXNsaWRlJyk7XG4gICAgdmFyIG1vbmRheSA9IGFjdGl2ZS5maW5kKCcubW9uZGF5Jyk7XG4gICAgdmFyIHBvc3NpYmxlQXJyID0gW107XG4gICAgLy8gYSBsaXN0IG9mIHBvc3NpYmxlIGhhbmRsZSB2YWx1ZXMgd2hpY2ggY2FuIGJlIGFkZGVkXG4gICAgaWYgKGRheXRpbWVfb24pIHBvc3NpYmxlQXJyID0gWzQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTIsIDEzLCAxNF07ZWxzZSB7XG4gICAgICAgIHBvc3NpYmxlQXJyID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShuZXcgQXJyYXkoMjQpLmtleXMoKSkpO1xuICAgIH1cblxuICAgIGlmICghbW9uZGF5Lmhhc0NsYXNzKCdhY3RpdmUtc2xpZGVyJykpIHtcbiAgICAgICAgaW5pdFNsaWRlcihtb25kYXkpO1xuICAgICAgICBtb25kYXkuYWRkQ2xhc3MoJ2FjdGl2ZS1zbGlkZXInKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdmFsdWUgPSBtb25kYXkuc2xpZGVyKCd2YWx1ZScpO1xuICAgICAgICB2YXIgdmFsdWVzID0gbW9uZGF5LnNsaWRlcigndmFsdWVzJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKHZhbHVlLCB2YWx1ZXMpO1xuICAgICAgICB2YXIgcG9zc2libGVOZXdWYWx1ZSA9IHZhbHVlc1t2YWx1ZXMubGVuZ3RoIC0gMV0gLSAxO1xuICAgICAgICBpZiAodmFsdWVzLmluZGV4T2YocG9zc2libGVOZXdWYWx1ZSkgPT09IC0xICYmIHBvc3NpYmxlQXJyLmluZGV4T2YocG9zc2libGVOZXdWYWx1ZSkgIT09IC0xKSB7XG4gICAgICAgICAgICB2YWx1ZXMucHVzaCh2YWx1ZXNbdmFsdWVzLmxlbmd0aCAtIDFdIC0gMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwb3NzaWJsZUFyciA9IHBvc3NpYmxlQXJyLmZpbHRlcihmdW5jdGlvbiAobnVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlcy5pbmRleE9mKG51bSkgPT0gLTE7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdwb3NzaWJsZSByYW5kb20gdmFsdWVzJywgcG9zc2libGVBcnIpO1xuICAgICAgICAgICAgdmFyIG5ld1ZhbHVlID0gcG9zc2libGVBcnIucmFuZG9tRWxlbWVudCgpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3JhbmRvbSBuZXcgdmFsdWUnLCBuZXdWYWx1ZSk7XG4gICAgICAgICAgICBpZiAobmV3VmFsdWUgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVzLnB1c2gobmV3VmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbm8gY2hvaWNlcyBsZWZ0ISBOb3RoaW5nIHRvIGFkZCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIG1vbmRheS5zbGlkZXIoJ2Rlc3Ryb3knKTtcbiAgICAgICAgaW5pdFNsaWRlcihtb25kYXksIHZhbHVlcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkZWxldGVIYW5kbGUoaGFuZGxlKSB7XG4gICAgY29uc29sZS5sb2coaGFuZGxlKTtcbiAgICB2YXIgJHNsaWRlciA9IGhhbmRsZS5wYXJlbnQoKTtcbiAgICB2YXIgaGFuZGxlSW5kZXggPSAkc2xpZGVyLmZpbmQoJy51aS1zbGlkZXItaGFuZGxlJykuaW5kZXgoaGFuZGxlKTtcbiAgICB2YXIgdmFsdWVzID0gJHNsaWRlci5zbGlkZXIoJ3ZhbHVlcycpO1xuICAgIGNvbnNvbGUubG9nKCdvbGQgdmFsdWVzJywgdmFsdWVzKTtcbiAgICBjb25zb2xlLmxvZyhoYW5kbGVJbmRleCk7XG4gICAgdmFsdWVzLnNwbGljZShoYW5kbGVJbmRleCwgMSk7XG4gICAgY29uc29sZS5sb2coJ25ldyB2YWx1ZXMnLCB2YWx1ZXMpO1xuICAgICRzbGlkZXIuc2xpZGVyKCdkZXN0cm95Jyk7XG4gICAgaW5pdFNsaWRlcigkc2xpZGVyLCB2YWx1ZXMpO1xufVxuXG59LHt9XX0se30sWzFdKTtcbiJdfQ==
