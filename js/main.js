!function e(a,i,s){function l(n,d){if(!i[n]){if(!a[n]){var r="function"==typeof require&&require;if(!d&&r)return r(n,!0);if(t)return t(n,!0);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}var o=i[n]={exports:{}};a[n][0].call(o.exports,function(e){var i=a[n][1][e];return l(i?i:e)},o,o.exports,e,a,i,s)}return i[n].exports}for(var t="function"==typeof require&&require,n=0;n<s.length;n++)l(s[n]);return l}({1:[function(e,a,i){"use strict";var s=e("./weeks");$(window).ready(function(){$("#handle-size-select").on("change",function(){(0,s.setHandleSize)(this.value)}),$("#calculate-all").on("click",function(){(0,s.calculateAllHandles)()});var e=!1,a=void 0;$(".on-btn").click(function(){if("none"==(a=document.getElementById("box").style.display)){if(document.getElementById("box").style.display="block",!e){e=!0,$(".flexslider").flexslider({animation:"slide",slideshow:!1,controlNav:!1,controlsContainer:$(".custom-controls-container"),customDirectionNav:$(".custom-navigation a"),keyboard:!1,animationLoop:!0,after:function(e){e.currentSlide==e.last&&(0,s.addLastWeekSlide)($(".flexslider")),(0,s.setWeekText)(e.currentSlide),0==e.currentSlide?($(".flex-prev").hide(),$(".flex-prev-block").show()):($(".flex-prev").show(),$(".flex-prev-block").hide())}});var i=moment().isoWeekday(),l=void 0;switch(i){case 1:l=".monday";break;case 2:l=".tuesday";break;case 3:l=".wednesday";break;case 4:l=".thursday";break;case 5:l=".friday";break;case 6:l=".saturday";break;case 7:l=".sunday"}var t=$(".flex-active-slide").find(l),n=$(".flex-active-slide .default-wrap > div"),d=n.splice(0,n.index(t));d.forEach(function(e){$(e).addClass("past-day")}),(0,s.initFirstSlider)(t),(0,s.setHandleSize)(100)}}else"block"==a&&(document.getElementById("box").style.display="none")}),$(".close-button").click(function(){document.getElementById("box").style.display="none"}),$(".switch-on").click(function(){(0,s.daytimeSliderChanges)(),(0,s.updateSliderCSS)()}),$(".switch-off").click(function(){(0,s.daytimeSliderChanges)(),(0,s.updateSliderCSS)()}),$(".flex-prev").hide(),$(".flex-prev-block").show(),$(".add-button").click(function(){var e=$(".flex-active-slide .default-wrap > div:not(.past-day)"),a=e[0];(0,s.addHandle)(a)});var i=null;$(".del-button").mousedown(function(){i=$(":focus").hasClass("ui-slider-handle")?$(":focus"):null}),$(".del-button").click(function(){i&&(0,s.deleteHandle)(i)})})},{"./weeks":2}],2:[function(e,a,i){"use strict";function s(e){if(Array.isArray(e)){for(var a=0,i=Array(e.length);a<e.length;a++)i[a]=e[a];return i}return Array.from(e)}function l(e){var a=e.getBoundingClientRect();return{top:a.top+window.scrollY,bottom:a.bottom+window.scrollY,left:a.left+window.scrollX,right:a.right+window.scrollX}}function t(e){W=parseInt(e),n(),d()}function n(){var e;switch(W){case 100:e=8;break;case 200:e=16;break;case 300:e=24;break;case 400:e=32;break;default:console.log("incorrect HANDLE_SIZE! Defaulting to 100"),e=8}$(".ui-slider-handle").css("height",e)}function d(){if(D){var e;switch(W){case 100:e=0;break;case 200:e=7;break;case 300:e=14;break;case 400:e=20}$(".default-wrap").css("height",190+e),$(".default-wrap").css("padding-top",70+e)}else{var e;switch(W){case 100:e=0;break;case 200:e=7;break;case 300:e=14;break;case 400:e=20}$(".default-wrap").css("height",190+e),$(".default-wrap").css("padding-top",e)}}function r(e,a){return a&&(e=e.filter(function(e){return e<=14&&e>=4})),e}function c(e){var a=23-(moment().hour()+1);return a<0&&(a=0),e&&(a<4?a=4:a>14&&(a=14)),a}function o(e,a){var i;i=e.hasClass("current-day")?c(D):D?14:23,a=a?r(a,D):[i],e.slider({orientation:"vertical",min:D?4:0,max:D?14:23,values:a,step:1,animate:!0,start:function(e,a){var i=23-a.value;E.text(i),E.show(),E.css("top",l(a.handle).top-10),E.css("left",l(a.handle).left+30)},slide:function(e,a){if($(this).hasClass("current-day")&&!h(a))return!1;var i=l(this);if(!(e.pageX<i.right+10&&e.pageX>i.left-10&&e.pageY<i.bottom+10&&e.pageY>i.top-10))return!1;for(var s=[],t=0;t<a.values.length;t++){if(s.indexOf(a.values[t])>-1)return!1;s.push(a.values[t])}if(!u(a))return!1;var n=23-a.value;E.text(n),E.css("top",l(a.handle).top-10),E.css("left",l(a.handle).left+30)},stop:function(){E.hide()}}),0==a.length?e.removeClass("active-slider"):e.addClass("active-slider"),m(),n()}function u(e){if(1==e.values.length)return!0;var a;switch(W){case 100:return!0;case 200:a=2;break;case 300:a=3;break;case 400:a=4}for(var i=0;i<e.values.length;i++){var s=e.values[i],l=e.values.slice();l.splice(i,1);for(var t=0;t<l.length;t++){var n=l[t];if(Math.abs(23-n-(23-s))<a)return!1}}return!0}function f(e){if(e.addClass("current-day"),c(D)>=23-H){var a=v(e,!0);o($(a))}else o(e)}function v(e,a){var i,s=$(".flex-active-slide .default-wrap > div"),l=s.index(e);if(6!=l)i=s[l+1];else{var t=$(".flex-active-slide")[0],n=t.nextElementSibling;i=$(n).find(".monday"),a&&p()}return i}function p(){$(".flex-next").trigger("click")}function h(e){return e.value<23-H}function m(){$(".ui-slider-handle").off("mousedown"),$(".ui-slider-handle").on("mousedown",function(e){function a(){$(".flex-active-slide .scale-item .default-wrap").off("mouseup")}function i(e){$(s).focus();var a=l(t);e.pageX<a.right+10&&e.pageX>a.left-10&&e.pageY<a.bottom+10&&e.pageY>a.top-10?r.css("display","none"):(r.css("display","initial"),r.css("left",e.pageX-r.width()/2),r.css("top",e.pageY-r.height()/2))}var s=this;$(s).focus();var t=$(this).parent()[0],n=$(t).find(".ui-slider-handle").index(s),d=$(".flex-active-slide .scale-item .default-wrap > div").index($(t)),r=$(this).clone().addClass("handle-clone");r.css("width",$(s).width()).css("height",$(s).height()),r.css("border-radius","10%"),i(e),$("body").append(r),function(){$(".flex-active-slide .scale-item .default-wrap").each(function(e,a){e!==d&&$(a).mouseup(function(e){var a=$(e.currentTarget).find("div");w(e,t,a,n)})})}(),$("body").mousemove(function(e){i(e)}),$("body").mouseup(function(e){$("body").off("mousemove"),$("body").off("mouseup"),r.remove(),a()})})}function w(e,a,i,s){if(!i.hasClass("past-day")){if(i.hasClass("current-day")){if(c(D)>=23-H)return}var l=$(a).slider("values");l.splice(s,1);b(i,!0)&&($(a).slider("destroy"),o($(a),l)),E.hide()}}function y(){return $(".flexslider .slides .item:not(.clone)")}function g(e){var a=e.data("flexslider"),i=$('<li class="item">\n                                <div class="item-week">\n                                </div>\n                                <div class="scale-wrapper">\n                                    <ul class="list-scale-wrap">\n                                        <li class="times-wrap-left">\n                                            <div class="time-min">00</div>\n                                            <div class="time-max">24</div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Mon</div>\n                                            <div class="add-times-left">\n                                                <div class="default-wrap">\n                                                    <div class="default-slider monday"></div>\n                                                </div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Tue</div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider  tuesday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Wed</div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider wednesday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Th</div>\n                                            <div></div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider thursday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Fr</div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider  friday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Sat</div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider  saturday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Sun</div>\n                                            <div class="add-times-right">\n                                                <div class="default-wrap">\n                                                    <div class="default-slider  sunday"></div>\n                                                </div>\n                                            </div>\n                                        </li>\n                                        <li class="times-wrap-right">\n                                            <div class="time-min">00</div>\n                                            <div class="time-max">24</div>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </li>');a.addSlide(i),d()}function x(){D?($(".switch-on").removeClass("active"),$(".switch-off").addClass("active"),$(".default-wrap").addClass("slide-wrap"),$(".default-slider").addClass("slider"),$(".slider").removeClass("default-slider"),$(".slider").slider({min:0,max:23}),D=!1):0==D&&($(".switch-off").removeClass("active"),$(".switch-on").addClass("active"),$(".slide-wrap").addClass("default-wrap"),$(".default-wrap").removeClass("slide-wrap"),$(".slider").addClass("default-slider"),$(".default-slider").removeClass("slider"),D=!0,$(".default-slider.active-slider").each(function(e,a){var i=$(a).slider("values");$(a).slider("destroy"),o($(a),i)})),d()}function b(e,a){var i=$(e),l=[];if(l=D?[4,5,6,7,8,9,10,11,12,13,14]:[].concat(s(new Array(24).keys())),!i.hasClass("active-slider")){var t=c(D);if(i.hasClass("current-day")&&t>=23-H){var n=v(e,!1);if($(".flex-active-slide .default-wrap > div").index(n)==-1)return;b(n),$(n).addClass("active-slider")}else o(i),i.addClass("active-slider");return!0}var d=i.slider("values");i.hasClass("current-day")&&(l=l.filter(function(e){return!(e>=23-H)})),l=l.filter(function(e){return d.indexOf(e)==-1});for(var r=void 0,f=0;f<l.length;f++){var p=l[f],h=d.slice();h.push(p);u({values:h})&&(r=p)}if(void 0!=r)return d.push(r),i.slider("destroy"),o(i,d),i.find(".ui-slider-handle:last").focus(),!0;if(a)return!1;var m=v(e,!1);if($(".flex-active-slide .default-wrap > div").index(m)==-1)return!1;b(m)}function k(e){var a=e.parent(),i=a.find(".ui-slider-handle").index(e),s=a.slider("values");s.splice(i,1),a.slider("destroy"),o(a,s)}function C(e){var a=A.clone(),i=e?a.add(e,"w"):a,s=i.isoWeekday(1).format("DD"),l=i.isoWeekday(7).format("DD"),t=i.format("MM");$(".item-week").html("Week "+s+"-"+l+"."+t)}function S(){var e=[];console.log("calculating moments..."),$(".flexslider .slides .item:not(.clone)").each(function(a,i){var s=A.week()+a;$(i).find(".default-wrap > div").each(function(a,i){var l=1+a;$(i).hasClass("active-slider")&&$(i).slider("values").map(function(e){return 23-e}).forEach(function(a){e.push(moment().year(A.year()).month(A.month()).week(s).day(l).hour(a).minute(0).second(0))})})}),e=e.filter(function(e){var a=A.clone().hour(H+1).minute(0).second(0);return e.unix()>=a.unix()});var a=e.map(function(e){return e.format("LLL")});console.log(a),console.log("object returned -> ",e)}Object.defineProperty(i,"__esModule",{value:!0}),i.setHandleSize=t,i.updateAllHandles=n,i.updateSliderCSS=d,i.initSlider=o,i.initFirstSlider=f,i.getItems=y,i.addLastWeekSlide=g,i.daytimeSliderChanges=x,i.addHandle=b,i.deleteHandle=k,i.setWeekText=C,i.calculateAllHandles=S;var E,H,A;$(window).ready(function(){$("body").append('<div id="slider-popup"></div>'),E=$("#slider-popup"),H=moment().hour(),A=moment(),C()});var D=!0,W=100},{}]},{},[1]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZSIsInQiLCJuIiwiciIsInMiLCJvIiwidSIsImEiLCJyZXF1aXJlIiwiaSIsImYiLCJFcnJvciIsImNvZGUiLCJsIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiX3dlZWtzIiwiJCIsIndpbmRvdyIsInJlYWR5Iiwib24iLCJzZXRIYW5kbGVTaXplIiwidGhpcyIsInZhbHVlIiwiY2FsY3VsYXRlQWxsSGFuZGxlcyIsImlzSW5pdGlhdGVkIiwiZGlzcGxheSIsImNsaWNrIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiZmxleHNsaWRlciIsImFuaW1hdGlvbiIsInNsaWRlc2hvdyIsImNvbnRyb2xOYXYiLCJjb250cm9sc0NvbnRhaW5lciIsImN1c3RvbURpcmVjdGlvbk5hdiIsImtleWJvYXJkIiwiYW5pbWF0aW9uTG9vcCIsImFmdGVyIiwiY3R4IiwiY3VycmVudFNsaWRlIiwibGFzdCIsImFkZExhc3RXZWVrU2xpZGUiLCJzZXRXZWVrVGV4dCIsImhpZGUiLCJzaG93IiwiZGF5IiwibW9tZW50IiwiaXNvV2Vla2RheSIsImFjdGl2ZUVsZW0iLCJmaXJzdFNsaWRlciIsImZpbmQiLCJhbGxGaXJzdFdlZWtTbGlkZXJzIiwicGFzdERheVNsaWRlcnMiLCJzcGxpY2UiLCJpbmRleCIsImZvckVhY2giLCJlbCIsImFkZENsYXNzIiwiaW5pdEZpcnN0U2xpZGVyIiwiZGF5dGltZVNsaWRlckNoYW5nZXMiLCJ1cGRhdGVTbGlkZXJDU1MiLCJhbGxTbGlkZXJzIiwiZmlyc3RBY3RpdmVTbGlkZXIiLCJhZGRIYW5kbGUiLCJmb2N1c0VsZW0iLCJtb3VzZWRvd24iLCJoYXNDbGFzcyIsImRlbGV0ZUhhbmRsZSIsIi4vd2Vla3MiLCIyIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiYXJyIiwiQXJyYXkiLCJpc0FycmF5IiwiYXJyMiIsImZyb20iLCJnZXRBYnNvbHV0ZVJlY3QiLCJlbGVtIiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsInNjcm9sbFkiLCJib3R0b20iLCJsZWZ0Iiwic2Nyb2xsWCIsInJpZ2h0Iiwic2l6ZSIsIkhBTkRMRV9TSVpFIiwicGFyc2VJbnQiLCJ1cGRhdGVBbGxIYW5kbGVzIiwiaGVpZ2h0VG9TZXQiLCJjb25zb2xlIiwibG9nIiwiY3NzIiwiZGF5dGltZV9vbiIsInBsdXMiLCJmaWx0ZXJWYWx1ZXMiLCJ2YWx1ZXMiLCJmaWx0ZXIiLCJ2IiwiZ2V0RGVmYXVsdFZhbHVlIiwiaG91ciIsImluaXRTbGlkZXIiLCJzZWxlY3RvciIsImRlZmF1bHRWYWx1ZSIsInNsaWRlciIsIm9yaWVudGF0aW9uIiwibWluIiwibWF4Iiwic3RlcCIsImFuaW1hdGUiLCJzdGFydCIsInVpIiwic2xpZGVyUG9wdXAiLCJ0ZXh0IiwiaGFuZGxlIiwic2xpZGUiLCJoYW5kbGVDdXJyZW50RGF5IiwidGhpc0Nvb3JkcyIsInBhZ2VYIiwicGFnZVkiLCJkaWZmVmFsdWVzIiwiaW5kZXhPZiIsInB1c2giLCJ0ZXN0QmlnU2xpZGVyT3ZlcmxhcCIsInN0b3AiLCJyZW1vdmVDbGFzcyIsInNldERyYWdnYWJsZXMiLCJkaWZmIiwidGhpc1ZhbHVlIiwib3RoZXJWYWx1ZXMiLCJzbGljZSIsIm90aGVyVmFsdWUiLCJNYXRoIiwiYWJzIiwic3RhcnRIb3VyIiwibmV4dFNsaWRlciIsImZpbmROZXh0U2xpZGVyIiwiZ290b25leHQiLCJ0aGlzV2Vla1NsaWRlcnMiLCJzbGlkZXJJbmRleCIsImFjdGl2ZVNsaWRlIiwibmV4dFNsaWRlIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiZ29Ub05leHRTbGlkZSIsInRyaWdnZXIiLCJvZmYiLCJjbGVhcldyYXBFdmVudHMiLCJtb3ZlQXQiLCJ0YXJnZXRIYW5kbGUiLCJmb2N1cyIsInRhcmdldFNsaWRlciIsImNsb25lIiwid2lkdGgiLCJoZWlnaHQiLCJwYXJlbnQiLCJoYW5kbGVJbmRleCIsImFwcGVuZCIsImVhY2giLCJtb3VzZXVwIiwibmV3U2xpZGVyIiwiY3VycmVudFRhcmdldCIsImFwcGx5RHJhZ0FuZERyb3AiLCJtb3VzZW1vdmUiLCJyZW1vdmUiLCJvbGRTbGlkZXJWYWx1ZXMiLCJnZXRJdGVtcyIsImRhdGEiLCJ0ZW1wbGF0ZSIsImFkZFNsaWRlIiwiaXNGcm9tRHJhZyIsIiRzbGlkZXIiLCJwb3NzaWJsZUFyciIsImNvbmNhdCIsImtleXMiLCJudW0iLCJuZXdWYWx1ZSIsIm5ld1YiLCJuZXdWcyIsInVuZGVmaW5lZCIsIl9uZXh0U2xpZGVyIiwic2xpZGVJbmRleCIsInN0YXJ0TSIsInN0YXJ0TW9tZW50IiwibSIsImFkZCIsIm1vbmRheSIsImZvcm1hdCIsInN1bmRheSIsInRoaXNNb250aCIsImh0bWwiLCJjYWxjdWxhdGVkTW9tZW50cyIsIndlZWsiLCJtYXAiLCJ5ZWFyIiwibW9udGgiLCJtaW51dGUiLCJzZWNvbmQiLCJtb20iLCJjYW50R29QYXN0IiwidW5peCIsImluQ29uc29sZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Il0sIm1hcHBpbmdzIjoiQ0FBQSxRQUFVQSxHQUFFQyxFQUFFQyxFQUFFQyxHQUFHLFFBQVNDLEdBQUVDLEVBQUVDLEdBQUcsSUFBSUosRUFBRUcsR0FBRyxDQUFDLElBQUlKLEVBQUVJLEdBQUcsQ0FBQyxHQUFJRSxHQUFrQixrQkFBVEMsVUFBcUJBLE9BQVEsS0FBSUYsR0FBR0MsRUFBRSxNQUFPQSxHQUFFRixHQUFFLEVBQUksSUFBR0ksRUFBRSxNQUFPQSxHQUFFSixHQUFFLEVBQUksSUFBSUssR0FBRSxHQUFJQyxPQUFNLHVCQUF1Qk4sRUFBRSxJQUFLLE1BQU1LLEdBQUVFLEtBQUssbUJBQW1CRixFQUFFLEdBQUlHLEdBQUVYLEVBQUVHLElBQUlTLFdBQVliLEdBQUVJLEdBQUcsR0FBR1UsS0FBS0YsRUFBRUMsUUFBUSxTQUFTZCxHQUFHLEdBQUlFLEdBQUVELEVBQUVJLEdBQUcsR0FBR0wsRUFBRyxPQUFPSSxHQUFFRixFQUFFQSxFQUFFRixJQUFJYSxFQUFFQSxFQUFF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a0JwRSxLQUFLN0UsU0FBU29KLEtBQUtYLEVBQVlXLFFBQVFDLE1BQU1aLEVBQVlZLFNBQVNILEtBQUtBLEdBQU1uSixJQUFJQSxHQUFLd0QsS0FBS0EsR0FBTStGLE9BQU8sR0FBR0MsT0FBTyxVQU1wSk4sRUFBb0JBLEVBQWtCN0YsT0FBTyxTQUFVb0csR0FDbkQsR0FBSUMsR0FBYWhCLEVBQVkvQixRQUFRbkQsS0FBS2tDLEVBQVksR0FBRzZELE9BQU8sR0FBR0MsT0FBTyxFQUMxRSxPQUFPQyxHQUFJRSxRQUFVRCxFQUFXQyxRQUdwQyxJQUFJQyxHQUFZVixFQUFrQkUsSUFBSSxTQUFVSyxHQUM1QyxNQUFPQSxHQUFJWCxPQUFPLFFBR3RCaEcsU0FBUUMsSUFBSTZHLEdBQ1o5RyxRQUFRQyxJQUFJLHNCQUF1Qm1HLEdBNWZ2Q1csT0FBT0MsZUFBZWxNLEVBQVMsY0FDM0JZLE9BQU8sSUFFWFosRUFBUVUsY0FBZ0JBLEVBQ3hCVixFQUFRZ0YsaUJBQW1CQSxFQUMzQmhGLEVBQVFtRCxnQkFBa0JBLEVBQzFCbkQsRUFBUTZGLFdBQWFBLEVBQ3JCN0YsRUFBUWlELGdCQUFrQkEsRUFDMUJqRCxFQUFRNkosU0FBV0EsRUFDbkI3SixFQUFRZ0MsaUJBQW1CQSxFQUMzQmhDLEVBQVFrRCxxQkFBdUJBLEVBQy9CbEQsRUFBUXNELFVBQVlBLEVBQ3BCdEQsRUFBUTBELGFBQWVBLEVBQ3ZCMUQsRUFBUWlDLFlBQWNBLEVBQ3RCakMsRUFBUWEsb0JBQXNCQSxDQWM5QixJQUFJMkYsR0FDQXNCLEVBQ0FnRCxDQUNKeEssR0FBRUMsUUFBUUMsTUFBTSxXQUNaRixFQUFFLFFBQVE4SSxPQUFPLGlDQUNqQjVDLEVBQWNsRyxFQUFFLGlCQUNoQndILEVBQVl6RixTQUFTdUQsT0FDckJrRixFQUFjekksU0FDZEosS0FFSixJQUFJb0QsSUFBYSxFQUNiUCxFQUFjLGNBd2RQIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBfd2Vla3MgPSByZXF1aXJlKCcuL3dlZWtzJyk7XG5cbiQod2luZG93KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgJCgnI2hhbmRsZS1zaXplLXNlbGVjdCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICgwLCBfd2Vla3Muc2V0SGFuZGxlU2l6ZSkodGhpcy52YWx1ZSk7XG4gICAgfSk7XG4gICAgJCgnI2NhbGN1bGF0ZS1hbGwnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICgwLCBfd2Vla3MuY2FsY3VsYXRlQWxsSGFuZGxlcykoKTtcbiAgICB9KTtcblxuICAgIHZhciBpc0luaXRpYXRlZCA9IGZhbHNlO1xuXG4gICAgLy8gIE9QRU4gV0lER0VUXG4gICAge1xuICAgICAgICB2YXIgZGlzcGxheSA9IHZvaWQgMDtcbiAgICAgICAgJCgnLm9uLWJ0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm94Jykuc3R5bGUuZGlzcGxheTtcbiAgICAgICAgICAgIGlmIChkaXNwbGF5ID09ICdub25lJykge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib3gnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICAgICAgICAgICAgICAgIGlmICghaXNJbml0aWF0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNJbml0aWF0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkKCcuZmxleHNsaWRlcicpLmZsZXhzbGlkZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiAnc2xpZGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzaG93OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xOYXY6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbHNDb250YWluZXI6ICQoJy5jdXN0b20tY29udHJvbHMtY29udGFpbmVyJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21EaXJlY3Rpb25OYXY6ICQoJy5jdXN0b20tbmF2aWdhdGlvbiBhJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlib2FyZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25Mb29wOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXI6IGZ1bmN0aW9uIGFmdGVyKGN0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHguY3VycmVudFNsaWRlID09IGN0eC5sYXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgwLCBfd2Vla3MuYWRkTGFzdFdlZWtTbGlkZSkoJCgnLmZsZXhzbGlkZXInKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICgwLCBfd2Vla3Muc2V0V2Vla1RleHQpKGN0eC5jdXJyZW50U2xpZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHguY3VycmVudFNsaWRlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmZsZXgtcHJldicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmZsZXgtcHJldi1ibG9jaycpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuZmxleC1wcmV2Jykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuZmxleC1wcmV2LWJsb2NrJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNldCBDdXJyZW50IGRheSBzbGlkZXIgYWN0aXZlLCB3aXRoIG9uZSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF5ID0gbW9tZW50KCkuaXNvV2Vla2RheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZUVsZW0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGRheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlRWxlbSA9ICcubW9uZGF5JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVFbGVtID0gJy50dWVzZGF5JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVFbGVtID0gJy53ZWRuZXNkYXknO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUVsZW0gPSAnLnRodXJzZGF5JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVFbGVtID0gJy5mcmlkYXknO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUVsZW0gPSAnLnNhdHVyZGF5JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVFbGVtID0gJy5zdW5kYXknO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaXJzdFNsaWRlciA9ICQoJy5mbGV4LWFjdGl2ZS1zbGlkZScpLmZpbmQoYWN0aXZlRWxlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWxsRmlyc3RXZWVrU2xpZGVycyA9ICQoJy5mbGV4LWFjdGl2ZS1zbGlkZSAuZGVmYXVsdC13cmFwID4gZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFzdERheVNsaWRlcnMgPSBhbGxGaXJzdFdlZWtTbGlkZXJzLnNwbGljZSgwLCBhbGxGaXJzdFdlZWtTbGlkZXJzLmluZGV4KGZpcnN0U2xpZGVyKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXN0RGF5U2xpZGVycy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hcmsgcGFzdCBkYXlzIChjYW50IG1vdmUvY3JlYXRlIGhhbmRsZXMgdGhlcmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChlbCkuYWRkQ2xhc3MoJ3Bhc3QtZGF5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICgwLCBfd2Vla3MuaW5pdEZpcnN0U2xpZGVyKShmaXJzdFNsaWRlcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICgwLCBfd2Vla3Muc2V0SGFuZGxlU2l6ZSkoMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlzcGxheSA9PSAnYmxvY2snKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JveCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBDTE9TRVMgV0lER0VUXG4gICAgJCgnLmNsb3NlLWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JveCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfSk7XG5cbiAgICAvLyBEQVlUSU1FIE9OTFkgT0ZGIE9SIE9OXG5cblxuICAgICQoJy5zd2l0Y2gtb24nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICgwLCBfd2Vla3MuZGF5dGltZVNsaWRlckNoYW5nZXMpKCk7XG4gICAgICAgICgwLCBfd2Vla3MudXBkYXRlU2xpZGVyQ1NTKSgpO1xuICAgIH0pO1xuICAgICQoJy5zd2l0Y2gtb2ZmJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAoMCwgX3dlZWtzLmRheXRpbWVTbGlkZXJDaGFuZ2VzKSgpO1xuICAgICAgICAoMCwgX3dlZWtzLnVwZGF0ZVNsaWRlckNTUykoKTtcbiAgICB9KTtcblxuICAgICQoJy5mbGV4LXByZXYnKS5oaWRlKCk7XG4gICAgJCgnLmZsZXgtcHJldi1ibG9jaycpLnNob3coKTtcblxuICAgIC8vIEFERCBBTkQgREVMIEJVVFRPTlxuXG4gICAgJCgnLmFkZC1idXR0b24nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhbGxTbGlkZXJzID0gJCgnLmZsZXgtYWN0aXZlLXNsaWRlIC5kZWZhdWx0LXdyYXAgPiBkaXY6bm90KC5wYXN0LWRheSknKTtcbiAgICAgICAgdmFyIGZpcnN0QWN0aXZlU2xpZGVyID0gYWxsU2xpZGVyc1swXTtcbiAgICAgICAgKDAsIF93ZWVrcy5hZGRIYW5kbGUpKGZpcnN0QWN0aXZlU2xpZGVyKTtcbiAgICB9KTtcbiAgICB7XG4gICAgICAgIHZhciBmb2N1c0VsZW0gPSBudWxsO1xuICAgICAgICAkKCcuZGVsLWJ1dHRvbicpLm1vdXNlZG93bihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKCc6Zm9jdXMnKS5oYXNDbGFzcygndWktc2xpZGVyLWhhbmRsZScpID8gZm9jdXNFbGVtID0gJCgnOmZvY3VzJykgOiBmb2N1c0VsZW0gPSBudWxsO1xuICAgICAgICB9KTtcbiAgICAgICAgJCgnLmRlbC1idXR0b24nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoZm9jdXNFbGVtKSB7XG4gICAgICAgICAgICAgICAgKDAsIF93ZWVrcy5kZWxldGVIYW5kbGUpKGZvY3VzRWxlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG59LHtcIi4vd2Vla3NcIjoyfV0sMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuc2V0SGFuZGxlU2l6ZSA9IHNldEhhbmRsZVNpemU7XG5leHBvcnRzLnVwZGF0ZUFsbEhhbmRsZXMgPSB1cGRhdGVBbGxIYW5kbGVzO1xuZXhwb3J0cy51cGRhdGVTbGlkZXJDU1MgPSB1cGRhdGVTbGlkZXJDU1M7XG5leHBvcnRzLmluaXRTbGlkZXIgPSBpbml0U2xpZGVyO1xuZXhwb3J0cy5pbml0Rmlyc3RTbGlkZXIgPSBpbml0Rmlyc3RTbGlkZXI7XG5leHBvcnRzLmdldEl0ZW1zID0gZ2V0SXRlbXM7XG5leHBvcnRzLmFkZExhc3RXZWVrU2xpZGUgPSBhZGRMYXN0V2Vla1NsaWRlO1xuZXhwb3J0cy5kYXl0aW1lU2xpZGVyQ2hhbmdlcyA9IGRheXRpbWVTbGlkZXJDaGFuZ2VzO1xuZXhwb3J0cy5hZGRIYW5kbGUgPSBhZGRIYW5kbGU7XG5leHBvcnRzLmRlbGV0ZUhhbmRsZSA9IGRlbGV0ZUhhbmRsZTtcbmV4cG9ydHMuc2V0V2Vla1RleHQgPSBzZXRXZWVrVGV4dDtcbmV4cG9ydHMuY2FsY3VsYXRlQWxsSGFuZGxlcyA9IGNhbGN1bGF0ZUFsbEhhbmRsZXM7XG5cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gZWxzZSB7IHJldHVybiBBcnJheS5mcm9tKGFycik7IH0gfVxuXG5mdW5jdGlvbiBnZXRBYnNvbHV0ZVJlY3QoZWxlbSkge1xuICAgIHZhciByZWN0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0b3A6IHJlY3QudG9wICsgd2luZG93LnNjcm9sbFksXG4gICAgICAgIGJvdHRvbTogcmVjdC5ib3R0b20gKyB3aW5kb3cuc2Nyb2xsWSxcbiAgICAgICAgbGVmdDogcmVjdC5sZWZ0ICsgd2luZG93LnNjcm9sbFgsXG4gICAgICAgIHJpZ2h0OiByZWN0LnJpZ2h0ICsgd2luZG93LnNjcm9sbFhcbiAgICB9O1xufVxuXG52YXIgc2xpZGVyUG9wdXA7XG52YXIgc3RhcnRIb3VyOyAvLyBob3VyIG9uIHdoaWNoIHdpZGdldCBzdGFydGVkLCBoYW5kbGVzIGNhbnQgc3RlcCBvbiBpdCBhbmQgcGFzdCBpdFxudmFyIHN0YXJ0TW9tZW50O1xuJCh3aW5kb3cpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwic2xpZGVyLXBvcHVwXCI+PC9kaXY+Jyk7XG4gICAgc2xpZGVyUG9wdXAgPSAkKCcjc2xpZGVyLXBvcHVwJyk7XG4gICAgc3RhcnRIb3VyID0gbW9tZW50KCkuaG91cigpO1xuICAgIHN0YXJ0TW9tZW50ID0gbW9tZW50KCk7XG4gICAgc2V0V2Vla1RleHQoKTtcbn0pO1xudmFyIGRheXRpbWVfb24gPSB0cnVlO1xudmFyIEhBTkRMRV9TSVpFID0gMTAwO1xuZnVuY3Rpb24gc2V0SGFuZGxlU2l6ZShzaXplKSB7XG4gICAgLy8gY29uc29sZS5sb2coc2l6ZSk7XG4gICAgSEFORExFX1NJWkUgPSBwYXJzZUludChzaXplKTtcbiAgICB1cGRhdGVBbGxIYW5kbGVzKCk7XG4gICAgdXBkYXRlU2xpZGVyQ1NTKCk7XG59XG5mdW5jdGlvbiB1cGRhdGVBbGxIYW5kbGVzKCkge1xuICAgIHZhciBoZWlnaHRUb1NldDtcbiAgICBzd2l0Y2ggKEhBTkRMRV9TSVpFKSB7XG4gICAgICAgIGNhc2UgMTAwOlxuICAgICAgICAgICAgaGVpZ2h0VG9TZXQgPSA4O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjAwOlxuICAgICAgICAgICAgaGVpZ2h0VG9TZXQgPSAxNjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDMwMDpcbiAgICAgICAgICAgIGhlaWdodFRvU2V0ID0gMjQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA0MDA6XG4gICAgICAgICAgICBoZWlnaHRUb1NldCA9IDMyO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaW5jb3JyZWN0IEhBTkRMRV9TSVpFISBEZWZhdWx0aW5nIHRvIDEwMCcpO1xuICAgICAgICAgICAgaGVpZ2h0VG9TZXQgPSA4O1xuICAgIH1cbiAgICAkKCcudWktc2xpZGVyLWhhbmRsZScpLmNzcygnaGVpZ2h0JywgaGVpZ2h0VG9TZXQpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVTbGlkZXJDU1MoKSB7XG4gICAgaWYgKGRheXRpbWVfb24pIHtcbiAgICAgICAgdmFyIHBsdXM7XG4gICAgICAgIHN3aXRjaCAoSEFORExFX1NJWkUpIHtcbiAgICAgICAgICAgIGNhc2UgMTAwOlxuICAgICAgICAgICAgICAgIHBsdXMgPSAwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyMDA6XG4gICAgICAgICAgICAgICAgcGx1cyA9IDc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDMwMDpcbiAgICAgICAgICAgICAgICBwbHVzID0gMTQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQwMDpcbiAgICAgICAgICAgICAgICBwbHVzID0gMjA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgJCgnLmRlZmF1bHQtd3JhcCcpLmNzcygnaGVpZ2h0JywgMTkwICsgcGx1cyk7XG4gICAgICAgICQoJy5kZWZhdWx0LXdyYXAnKS5jc3MoJ3BhZGRpbmctdG9wJywgNzAgKyBwbHVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcGx1cztcbiAgICAgICAgc3dpdGNoIChIQU5ETEVfU0laRSkge1xuICAgICAgICAgICAgY2FzZSAxMDA6XG4gICAgICAgICAgICAgICAgcGx1cyA9IDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDIwMDpcbiAgICAgICAgICAgICAgICBwbHVzID0gNztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzAwOlxuICAgICAgICAgICAgICAgIHBsdXMgPSAxNDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNDAwOlxuICAgICAgICAgICAgICAgIHBsdXMgPSAyMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAkKCcuZGVmYXVsdC13cmFwJykuY3NzKCdoZWlnaHQnLCAxOTAgKyBwbHVzKTtcbiAgICAgICAgJCgnLmRlZmF1bHQtd3JhcCcpLmNzcygncGFkZGluZy10b3AnLCBwbHVzKTtcbiAgICB9XG59XG5mdW5jdGlvbiBmaWx0ZXJWYWx1ZXModmFsdWVzLCBkYXl0aW1lX29uKSB7XG4gICAgaWYgKGRheXRpbWVfb24pIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2ZpbHRlcmluZy4uLicsIHZhbHVlcyk7XG4gICAgICAgIHZhbHVlcyA9IHZhbHVlcy5maWx0ZXIoZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgIGlmICh2IDw9IDE0ICYmIHYgPj0gNCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZyh2YWx1ZXMpO1xuICAgIHJldHVybiB2YWx1ZXM7XG59XG5mdW5jdGlvbiBnZXREZWZhdWx0VmFsdWUoZGF5dGltZV9vbikge1xuICAgIHZhciB2YWx1ZSA9IDIzIC0gKG1vbWVudCgpLmhvdXIoKSArIDEpO1xuICAgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMDtcbiAgICBpZiAoZGF5dGltZV9vbikge1xuICAgICAgICBpZiAodmFsdWUgPCA0KSB2YWx1ZSA9IDQ7ZWxzZSBpZiAodmFsdWUgPiAxNCkgdmFsdWUgPSAxNDtcbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coJ2RlZmF1bHQnLCB2YWx1ZSk7XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gaW5pdFNsaWRlcihzZWxlY3RvciwgdmFsdWVzKSB7XG4gICAgdmFyIGRlZmF1bHRWYWx1ZTtcbiAgICBpZiAoc2VsZWN0b3IuaGFzQ2xhc3MoJ2N1cnJlbnQtZGF5JykpIHtcbiAgICAgICAgZGVmYXVsdFZhbHVlID0gZ2V0RGVmYXVsdFZhbHVlKGRheXRpbWVfb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGRlZmF1bHRWYWx1ZSA9IGRheXRpbWVfb24gPyAxNCA6IDIzO1xuICAgIH1cbiAgICB2YWx1ZXMgPSB2YWx1ZXMgPyBmaWx0ZXJWYWx1ZXModmFsdWVzLCBkYXl0aW1lX29uKSA6IFtkZWZhdWx0VmFsdWVdO1xuICAgIHNlbGVjdG9yLnNsaWRlcih7XG4gICAgICAgIG9yaWVudGF0aW9uOiAndmVydGljYWwnLFxuICAgICAgICBtaW46IGRheXRpbWVfb24gPyA0IDogMCxcbiAgICAgICAgbWF4OiBkYXl0aW1lX29uID8gMTQgOiAyMyxcbiAgICAgICAgdmFsdWVzOiB2YWx1ZXMsXG4gICAgICAgIHN0ZXA6IDEsXG4gICAgICAgIGFuaW1hdGU6IHRydWUsXG4gICAgICAgIHN0YXJ0OiBmdW5jdGlvbiBzdGFydChlLCB1aSkge1xuICAgICAgICAgICAgdmFyIHYgPSAyMyAtIHVpLnZhbHVlO1xuICAgICAgICAgICAgc2xpZGVyUG9wdXAudGV4dCh2KTtcbiAgICAgICAgICAgIHNsaWRlclBvcHVwLnNob3coKTtcbiAgICAgICAgICAgIHNsaWRlclBvcHVwLmNzcygndG9wJywgZ2V0QWJzb2x1dGVSZWN0KHVpLmhhbmRsZSkudG9wIC0gMTApO1xuICAgICAgICAgICAgc2xpZGVyUG9wdXAuY3NzKCdsZWZ0JywgZ2V0QWJzb2x1dGVSZWN0KHVpLmhhbmRsZSkubGVmdCArIDMwKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2xpZGU6IGZ1bmN0aW9uIHNsaWRlKGUsIHVpKSB7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnY3VycmVudC1kYXknKSkge1xuICAgICAgICAgICAgICAgIGlmICghaGFuZGxlQ3VycmVudERheSh1aSkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0aGlzQ29vcmRzID0gZ2V0QWJzb2x1dGVSZWN0KHRoaXMpO1xuICAgICAgICAgICAgLy8gb25seSB0cmlnZ2VyaW5nIHRoZSBldmVudCBpZiBtb3VzZSBpcyBpbiBhIHJhbmdlIG9mIHRoZSBzbGlkZXJcbiAgICAgICAgICAgIGlmICghKGUucGFnZVggPCB0aGlzQ29vcmRzLnJpZ2h0ICsgMTAgJiYgZS5wYWdlWCA+IHRoaXNDb29yZHMubGVmdCAtIDEwICYmIGUucGFnZVkgPCB0aGlzQ29vcmRzLmJvdHRvbSArIDEwICYmIGUucGFnZVkgPiB0aGlzQ29vcmRzLnRvcCAtIDEwKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkaWZmVmFsdWVzID0gW107XG4gICAgICAgICAgICAvLyBwcmV2ZW50IGhhbmRsZSBvdmVybGFwcGluZ1xuICAgICAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCB1aS52YWx1ZXMubGVuZ3RoOyBhKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlmZlZhbHVlcy5pbmRleE9mKHVpLnZhbHVlc1thXSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGlmZlZhbHVlcy5wdXNoKHVpLnZhbHVlc1thXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXRlc3RCaWdTbGlkZXJPdmVybGFwKHVpKSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICB2YXIgdiA9IDIzIC0gdWkudmFsdWU7XG4gICAgICAgICAgICBzbGlkZXJQb3B1cC50ZXh0KHYpO1xuICAgICAgICAgICAgc2xpZGVyUG9wdXAuY3NzKCd0b3AnLCBnZXRBYnNvbHV0ZVJlY3QodWkuaGFuZGxlKS50b3AgLSAxMCk7XG4gICAgICAgICAgICBzbGlkZXJQb3B1cC5jc3MoJ2xlZnQnLCBnZXRBYnNvbHV0ZVJlY3QodWkuaGFuZGxlKS5sZWZ0ICsgMzApO1xuICAgICAgICB9LFxuICAgICAgICBzdG9wOiBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgICAgICAgc2xpZGVyUG9wdXAuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgLy8gY29uc29sZSgnVkFMVUVTJywgdmFsdWVzKTtcbiAgICBpZiAodmFsdWVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIHNlbGVjdG9yLnJlbW92ZUNsYXNzKCdhY3RpdmUtc2xpZGVyJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZWN0b3IuYWRkQ2xhc3MoJ2FjdGl2ZS1zbGlkZXInKTtcbiAgICB9XG4gICAgc2V0RHJhZ2dhYmxlcygpO1xuICAgIHVwZGF0ZUFsbEhhbmRsZXMoKTtcbn1cblxuZnVuY3Rpb24gdGVzdEJpZ1NsaWRlck92ZXJsYXAodWkpIHtcbiAgICAvLyBjb25zb2xlLmxvZyh1aS52YWx1ZSwgdWkudmFsdWVzKTtcbiAgICBpZiAodWkudmFsdWVzLmxlbmd0aCA9PSAxKSByZXR1cm4gdHJ1ZTtcbiAgICB2YXIgZGlmZjtcbiAgICBzd2l0Y2ggKEhBTkRMRV9TSVpFKSB7XG4gICAgICAgIGNhc2UgMTAwOlxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyMDA6XG4gICAgICAgICAgICBkaWZmID0gMjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDMwMDpcbiAgICAgICAgICAgIGRpZmYgPSAzO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNDAwOlxuICAgICAgICAgICAgZGlmZiA9IDQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1aS52YWx1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHRoaXNWYWx1ZSA9IHVpLnZhbHVlc1tpXTtcbiAgICAgICAgdmFyIG90aGVyVmFsdWVzID0gdWkudmFsdWVzLnNsaWNlKCk7XG4gICAgICAgIG90aGVyVmFsdWVzLnNwbGljZShpLCAxKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpc1ZhbHVlLCBvdGhlclZhbHVlcyk7XG4gICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgb3RoZXJWYWx1ZXMubGVuZ3RoOyBhKyspIHtcbiAgICAgICAgICAgIHZhciBvdGhlclZhbHVlID0gb3RoZXJWYWx1ZXNbYV07XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoMjMgLSBvdGhlclZhbHVlIC0gKDIzIC0gdGhpc1ZhbHVlKSkgPCBkaWZmKSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3JldHVybiBmYWxzZSBvbicsIDIzIC0gdGhpc1ZhbHVlLCAyMyAtIG90aGVyVmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaW5pdEZpcnN0U2xpZGVyKHNlbGVjdG9yKSB7XG4gICAgc2VsZWN0b3IuYWRkQ2xhc3MoJ2N1cnJlbnQtZGF5Jyk7XG4gICAgdmFyIGRlZmF1bHRWYWx1ZSA9IGdldERlZmF1bHRWYWx1ZShkYXl0aW1lX29uKTtcbiAgICBpZiAoZGVmYXVsdFZhbHVlID49IDIzIC0gc3RhcnRIb3VyKSB7XG4gICAgICAgIC8vIGNvbnNvbGUoJ2N1cnJlbnQgZGF5IHdpdGggYW4gZXhjZXB0aW9uJyk7XG4gICAgICAgIHZhciBuZXh0U2xpZGVyID0gZmluZE5leHRTbGlkZXIoc2VsZWN0b3IsIHRydWUpO1xuICAgICAgICBpbml0U2xpZGVyKCQobmV4dFNsaWRlcikpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGluaXRTbGlkZXIoc2VsZWN0b3IpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZmluZE5leHRTbGlkZXIoc2VsZWN0b3IsIGdvdG9uZXh0KSB7XG4gICAgdmFyIHRoaXNXZWVrU2xpZGVycyA9ICQoJy5mbGV4LWFjdGl2ZS1zbGlkZSAuZGVmYXVsdC13cmFwID4gZGl2Jyk7XG4gICAgdmFyIHNsaWRlckluZGV4ID0gdGhpc1dlZWtTbGlkZXJzLmluZGV4KHNlbGVjdG9yKTtcbiAgICAvLyBpZiBub3Qgc3VuZGF5XG4gICAgdmFyIG5leHRTbGlkZXI7XG4gICAgaWYgKHNsaWRlckluZGV4ICE9IDYpIHtcbiAgICAgICAgbmV4dFNsaWRlciA9IHRoaXNXZWVrU2xpZGVyc1tzbGlkZXJJbmRleCArIDFdO1xuICAgIH1cbiAgICAvLyBpZiBzdW5kYXlcbiAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBhY3RpdmVTbGlkZSA9ICQoJy5mbGV4LWFjdGl2ZS1zbGlkZScpWzBdO1xuICAgICAgICAgICAgdmFyIG5leHRTbGlkZSA9IGFjdGl2ZVNsaWRlLm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgICAgIG5leHRTbGlkZXIgPSAkKG5leHRTbGlkZSkuZmluZCgnLm1vbmRheScpO1xuICAgICAgICAgICAgaWYgKGdvdG9uZXh0KSBnb1RvTmV4dFNsaWRlKCk7XG4gICAgICAgIH1cbiAgICByZXR1cm4gbmV4dFNsaWRlcjtcbn1cblxuZnVuY3Rpb24gZ29Ub05leHRTbGlkZSgpIHtcbiAgICAkKCcuZmxleC1uZXh0JykudHJpZ2dlcignY2xpY2snKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ3VycmVudERheSh1aSkge1xuICAgIHJldHVybiB1aS52YWx1ZSA8IDIzIC0gc3RhcnRIb3VyO1xufVxuXG5mdW5jdGlvbiBzZXREcmFnZ2FibGVzKCkge1xuICAgICQoJy51aS1zbGlkZXItaGFuZGxlJykub2ZmKCdtb3VzZWRvd24nKTtcbiAgICAkKCcudWktc2xpZGVyLWhhbmRsZScpLm9uKCdtb3VzZWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnbW91c2Vkb3duJywgdGhpcyk7XG4gICAgICAgIHZhciB0YXJnZXRIYW5kbGUgPSB0aGlzO1xuICAgICAgICAkKHRhcmdldEhhbmRsZSkuZm9jdXMoKTsgLy8gZml4IGluY29ycmVjdCBmb2N1cyBidWdcbiAgICAgICAgLy8gY29uc29sZSh0YXJnZXRIYW5kbGUpO1xuICAgICAgICB2YXIgdGFyZ2V0U2xpZGVyID0gJCh0aGlzKS5wYXJlbnQoKVswXTtcbiAgICAgICAgdmFyIGhhbmRsZUluZGV4ID0gJCh0YXJnZXRTbGlkZXIpLmZpbmQoJy51aS1zbGlkZXItaGFuZGxlJykuaW5kZXgodGFyZ2V0SGFuZGxlKTtcbiAgICAgICAgdmFyIHNsaWRlckluZGV4ID0gJCgnLmZsZXgtYWN0aXZlLXNsaWRlIC5zY2FsZS1pdGVtIC5kZWZhdWx0LXdyYXAgPiBkaXYnKS5pbmRleCgkKHRhcmdldFNsaWRlcikpO1xuICAgICAgICB2YXIgY2xvbmUgPSAkKHRoaXMpLmNsb25lKCkuYWRkQ2xhc3MoJ2hhbmRsZS1jbG9uZScpO1xuICAgICAgICBjbG9uZS5jc3MoJ3dpZHRoJywgJCh0YXJnZXRIYW5kbGUpLndpZHRoKCkpLmNzcygnaGVpZ2h0JywgJCh0YXJnZXRIYW5kbGUpLmhlaWdodCgpKTtcbiAgICAgICAgY2xvbmUuY3NzKCdib3JkZXItcmFkaXVzJywgJzEwJScpO1xuICAgICAgICBtb3ZlQXQoZSk7XG4gICAgICAgICQoJ2JvZHknKS5hcHBlbmQoY2xvbmUpO1xuICAgICAgICAvLyBjb25zb2xlKCdzbGlkZXJJbmRleCcsIHNsaWRlckluZGV4KTtcbiAgICAgICAgZnVuY3Rpb24gaW5pdFdyYXBFdmVudHMoKSB7XG4gICAgICAgICAgICAkKCcuZmxleC1hY3RpdmUtc2xpZGUgLnNjYWxlLWl0ZW0gLmRlZmF1bHQtd3JhcCcpLmVhY2goZnVuY3Rpb24gKGksIGVsKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgIT09IHNsaWRlckluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdhdHRhY2hpbmcgZXZlbnQnLCBlbCk7XG4gICAgICAgICAgICAgICAgICAgICQoZWwpLm1vdXNldXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdTbGlkZXIgPSAkKGUuY3VycmVudFRhcmdldCkuZmluZCgnZGl2Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5RHJhZ0FuZERyb3AoZSwgdGFyZ2V0U2xpZGVyLCBuZXdTbGlkZXIsIGhhbmRsZUluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gY2xlYXJXcmFwRXZlbnRzKCkge1xuICAgICAgICAgICAgJCgnLmZsZXgtYWN0aXZlLXNsaWRlIC5zY2FsZS1pdGVtIC5kZWZhdWx0LXdyYXAnKS5vZmYoJ21vdXNldXAnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGluaXRXcmFwRXZlbnRzKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gbW92ZUF0KGUpIHtcbiAgICAgICAgICAgICQodGFyZ2V0SGFuZGxlKS5mb2N1cygpOyAvLyBmaXggaW5jb3JyZWN0IGZvY3VzIGJ1Z1xuICAgICAgICAgICAgdmFyIHRoaXNDb29yZHMgPSBnZXRBYnNvbHV0ZVJlY3QodGFyZ2V0U2xpZGVyKTtcbiAgICAgICAgICAgIGlmIChlLnBhZ2VYIDwgdGhpc0Nvb3Jkcy5yaWdodCArIDEwICYmIGUucGFnZVggPiB0aGlzQ29vcmRzLmxlZnQgLSAxMCAmJiBlLnBhZ2VZIDwgdGhpc0Nvb3Jkcy5ib3R0b20gKyAxMCAmJiBlLnBhZ2VZID4gdGhpc0Nvb3Jkcy50b3AgLSAxMCkge1xuICAgICAgICAgICAgICAgIGNsb25lLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsb25lLmNzcygnZGlzcGxheScsICdpbml0aWFsJyk7XG4gICAgICAgICAgICAgICAgY2xvbmUuY3NzKCdsZWZ0JywgZS5wYWdlWCAtIGNsb25lLndpZHRoKCkgLyAyKTtcbiAgICAgICAgICAgICAgICBjbG9uZS5jc3MoJ3RvcCcsIGUucGFnZVkgLSBjbG9uZS5oZWlnaHQoKSAvIDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICQoJ2JvZHknKS5tb3VzZW1vdmUoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdtb3VzZW1vdmUnKTtcbiAgICAgICAgICAgIG1vdmVBdChlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnYm9keScpLm1vdXNldXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdtb3VzZXVwJyk7XG4gICAgICAgICAgICAkKCdib2R5Jykub2ZmKCdtb3VzZW1vdmUnKTtcbiAgICAgICAgICAgICQoJ2JvZHknKS5vZmYoJ21vdXNldXAnKTtcbiAgICAgICAgICAgIGNsb25lLnJlbW92ZSgpO1xuICAgICAgICAgICAgY2xlYXJXcmFwRXZlbnRzKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBhcHBseURyYWdBbmREcm9wKGUsIHRhcmdldFNsaWRlciwgbmV3U2xpZGVyLCBoYW5kbGVJbmRleCkge1xuICAgIGlmIChuZXdTbGlkZXIuaGFzQ2xhc3MoJ3Bhc3QtZGF5JykpIHJldHVybjtcbiAgICBpZiAobmV3U2xpZGVyLmhhc0NsYXNzKCdjdXJyZW50LWRheScpKSB7XG4gICAgICAgIHZhciBkZWZhdWx0VmFsdWUgPSBnZXREZWZhdWx0VmFsdWUoZGF5dGltZV9vbik7XG4gICAgICAgIGlmIChkZWZhdWx0VmFsdWUgPj0gMjMgLSBzdGFydEhvdXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZyhlKTtcbiAgICB2YXIgb2xkU2xpZGVyVmFsdWVzID0gJCh0YXJnZXRTbGlkZXIpLnNsaWRlcigndmFsdWVzJyk7XG4gICAgb2xkU2xpZGVyVmFsdWVzLnNwbGljZShoYW5kbGVJbmRleCwgMSk7XG4gICAgdmFyIHdhc0FkZGVkID0gYWRkSGFuZGxlKG5ld1NsaWRlciwgdHJ1ZSk7XG4gICAgLy8gaWYgc2xpZGVyIGFjdHVhbGx5IGRpZG50IHVwZGF0ZSAobm90IGVub3VnaCBwbGFjZSksIGRvIG5vdGhpbmdcbiAgICBpZiAod2FzQWRkZWQpIHtcbiAgICAgICAgJCh0YXJnZXRTbGlkZXIpLnNsaWRlcignZGVzdHJveScpO1xuICAgICAgICBpbml0U2xpZGVyKCQodGFyZ2V0U2xpZGVyKSwgb2xkU2xpZGVyVmFsdWVzKTtcbiAgICB9XG4gICAgc2xpZGVyUG9wdXAuaGlkZSgpO1xufVxuXG5mdW5jdGlvbiBnZXRJdGVtcygpIHtcbiAgICByZXR1cm4gJCgnLmZsZXhzbGlkZXIgLnNsaWRlcyAuaXRlbTpub3QoLmNsb25lKScpO1xufVxuXG5mdW5jdGlvbiBhZGRMYXN0V2Vla1NsaWRlKHNlbGVjdG9yKSB7XG4gICAgdmFyIGN0eCA9IHNlbGVjdG9yLmRhdGEoJ2ZsZXhzbGlkZXInKTtcblxuICAgIHZhciB0ZW1wbGF0ZSA9ICQoJzxsaSBjbGFzcz1cIml0ZW1cIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpdGVtLXdlZWtcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNjYWxlLXdyYXBwZXJcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJsaXN0LXNjYWxlLXdyYXBcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwidGltZXMtd3JhcC1sZWZ0XCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGltZS1taW5cIj4wMDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRpbWUtbWF4XCI+MjQ8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwic2NhbGUtaXRlbVwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheVwiPk1vbjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFkZC10aW1lcy1sZWZ0XCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtd3JhcFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVmYXVsdC1zbGlkZXIgbW9uZGF5XCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwic2NhbGUtaXRlbVwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheVwiPlR1ZTwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtd3JhcFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXNsaWRlciAgdHVlc2RheVwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInNjYWxlLWl0ZW1cIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXlcIj5XZWQ8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXdyYXBcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVmYXVsdC1zbGlkZXIgd2VkbmVzZGF5XCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwic2NhbGUtaXRlbVwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheVwiPlRoPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtd3JhcFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXNsaWRlciB0aHVyc2RheVwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInNjYWxlLWl0ZW1cIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXlcIj5GcjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtd3JhcFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXNsaWRlciAgZnJpZGF5XCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwic2NhbGUtaXRlbVwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheVwiPlNhdDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtd3JhcFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXNsaWRlciAgc2F0dXJkYXlcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJzY2FsZS1pdGVtXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5XCI+U3VuPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWRkLXRpbWVzLXJpZ2h0XCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtd3JhcFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVmYXVsdC1zbGlkZXIgIHN1bmRheVwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInRpbWVzLXdyYXAtcmlnaHRcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lLW1pblwiPjAwPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGltZS1tYXhcIj4yNDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT4nKTtcbiAgICBjdHguYWRkU2xpZGUodGVtcGxhdGUpO1xuICAgIHVwZGF0ZVNsaWRlckNTUygpO1xufVxuXG5mdW5jdGlvbiBkYXl0aW1lU2xpZGVyQ2hhbmdlcygpIHtcbiAgICBpZiAoZGF5dGltZV9vbikge1xuICAgICAgICAkKCcuc3dpdGNoLW9uJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKCcuc3dpdGNoLW9mZicpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJCgnLmRlZmF1bHQtd3JhcCcpLmFkZENsYXNzKCdzbGlkZS13cmFwJyk7XG4gICAgICAgICQoJy5kZWZhdWx0LXNsaWRlcicpLmFkZENsYXNzKCdzbGlkZXInKTtcbiAgICAgICAgJCgnLnNsaWRlcicpLnJlbW92ZUNsYXNzKCdkZWZhdWx0LXNsaWRlcicpO1xuXG4gICAgICAgICQoJy5zbGlkZXInKS5zbGlkZXIoe1xuICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgbWF4OiAyM1xuICAgICAgICB9KTtcblxuICAgICAgICBkYXl0aW1lX29uID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChkYXl0aW1lX29uID09IGZhbHNlKSB7XG4gICAgICAgICQoJy5zd2l0Y2gtb2ZmJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKCcuc3dpdGNoLW9uJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKCcuc2xpZGUtd3JhcCcpLmFkZENsYXNzKCdkZWZhdWx0LXdyYXAnKTtcbiAgICAgICAgJCgnLmRlZmF1bHQtd3JhcCcpLnJlbW92ZUNsYXNzKCdzbGlkZS13cmFwJyk7XG4gICAgICAgICQoJy5zbGlkZXInKS5hZGRDbGFzcygnZGVmYXVsdC1zbGlkZXInKTtcbiAgICAgICAgJCgnLmRlZmF1bHQtc2xpZGVyJykucmVtb3ZlQ2xhc3MoJ3NsaWRlcicpO1xuXG4gICAgICAgIGRheXRpbWVfb24gPSB0cnVlO1xuICAgICAgICAkKCcuZGVmYXVsdC1zbGlkZXIuYWN0aXZlLXNsaWRlcicpLmVhY2goZnVuY3Rpb24gKGksIGVsKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gJChlbCkuc2xpZGVyKCd2YWx1ZXMnKTtcbiAgICAgICAgICAgICQoZWwpLnNsaWRlcignZGVzdHJveScpO1xuICAgICAgICAgICAgaW5pdFNsaWRlcigkKGVsKSwgdmFsdWVzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHVwZGF0ZVNsaWRlckNTUygpO1xufVxuXG5mdW5jdGlvbiBhZGRIYW5kbGUoc2VsZWN0b3IsIGlzRnJvbURyYWcpIHtcbiAgICB2YXIgJHNsaWRlciA9ICQoc2VsZWN0b3IpO1xuICAgIC8vIGNvbnNvbGUubG9nKCRzbGlkZXIpO1xuICAgIHZhciBwb3NzaWJsZUFyciA9IFtdO1xuICAgIC8vIGEgbGlzdCBvZiBwb3NzaWJsZSBoYW5kbGUgdmFsdWVzIHdoaWNoIGNhbiBiZSBhZGRlZFxuICAgIGlmIChkYXl0aW1lX29uKSBwb3NzaWJsZUFyciA9IFs0LCA1LCA2LCA3LCA4LCA5LCAxMCwgMTEsIDEyLCAxMywgMTRdO2Vsc2Uge1xuICAgICAgICBwb3NzaWJsZUFyciA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkobmV3IEFycmF5KDI0KS5rZXlzKCkpKTtcbiAgICB9XG4gICAgaWYgKCEkc2xpZGVyLmhhc0NsYXNzKCdhY3RpdmUtc2xpZGVyJykpIHtcbiAgICAgICAgdmFyIGRlZmF1bHRWYWx1ZSA9IGdldERlZmF1bHRWYWx1ZShkYXl0aW1lX29uKTtcbiAgICAgICAgaWYgKCRzbGlkZXIuaGFzQ2xhc3MoJ2N1cnJlbnQtZGF5JykgJiYgZGVmYXVsdFZhbHVlID49IDIzIC0gc3RhcnRIb3VyKSB7XG4gICAgICAgICAgICB2YXIgbmV4dFNsaWRlciA9IGZpbmROZXh0U2xpZGVyKHNlbGVjdG9yLCBmYWxzZSk7XG4gICAgICAgICAgICAvLyBpZiBuZXh0IHNsaWRlciBpcyBvbiBhbm90aGVyIGZsZXhTbGlkZVxuICAgICAgICAgICAgaWYgKCQoJy5mbGV4LWFjdGl2ZS1zbGlkZSAuZGVmYXVsdC13cmFwID4gZGl2JykuaW5kZXgobmV4dFNsaWRlcikgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZml4IScpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkZEhhbmRsZShuZXh0U2xpZGVyKTtcbiAgICAgICAgICAgICQobmV4dFNsaWRlcikuYWRkQ2xhc3MoJ2FjdGl2ZS1zbGlkZXInKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGluaXRTbGlkZXIoJHNsaWRlcik7XG4gICAgICAgICAgICAkc2xpZGVyLmFkZENsYXNzKCdhY3RpdmUtc2xpZGVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9ICRzbGlkZXIuc2xpZGVyKCd2YWx1ZXMnKTtcbiAgICAgICAgaWYgKCRzbGlkZXIuaGFzQ2xhc3MoJ2N1cnJlbnQtZGF5JykpIHtcbiAgICAgICAgICAgIHBvc3NpYmxlQXJyID0gcG9zc2libGVBcnIuZmlsdGVyKGZ1bmN0aW9uIChudW0pIHtcbiAgICAgICAgICAgICAgICBpZiAobnVtID49IDIzIC0gc3RhcnRIb3VyKSByZXR1cm4gZmFsc2U7ZWxzZSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHBvc3NpYmxlQXJyID0gcG9zc2libGVBcnIuZmlsdGVyKGZ1bmN0aW9uIChudW0pIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXMuaW5kZXhPZihudW0pID09IC0xO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgbmV3VmFsdWUgPSB2b2lkIDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVBcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBuZXdWID0gcG9zc2libGVBcnJbaV07XG4gICAgICAgICAgICB2YXIgbmV3VnMgPSB2YWx1ZXMuc2xpY2UoKTtcbiAgICAgICAgICAgIG5ld1ZzLnB1c2gobmV3Vik7XG4gICAgICAgICAgICB2YXIgdGVzdCA9IHRlc3RCaWdTbGlkZXJPdmVybGFwKHsgJ3ZhbHVlcyc6IG5ld1ZzIH0pO1xuICAgICAgICAgICAgaWYgKHRlc3QpIHtcbiAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IG5ld1Y7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3JhbmRvbSBuZXcgdmFsdWUnLCBuZXdWYWx1ZSk7XG4gICAgICAgIGlmIChuZXdWYWx1ZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKG5ld1ZhbHVlKTtcbiAgICAgICAgICAgICRzbGlkZXIuc2xpZGVyKCdkZXN0cm95Jyk7XG4gICAgICAgICAgICBpbml0U2xpZGVyKCRzbGlkZXIsIHZhbHVlcyk7XG4gICAgICAgICAgICAkc2xpZGVyLmZpbmQoJy51aS1zbGlkZXItaGFuZGxlOmxhc3QnKS5mb2N1cygpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoaXNGcm9tRHJhZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIF9uZXh0U2xpZGVyID0gZmluZE5leHRTbGlkZXIoc2VsZWN0b3IsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpZiAoJCgnLmZsZXgtYWN0aXZlLXNsaWRlIC5kZWZhdWx0LXdyYXAgPiBkaXYnKS5pbmRleChfbmV4dFNsaWRlcikgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZEhhbmRsZShfbmV4dFNsaWRlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkZWxldGVIYW5kbGUoaGFuZGxlKSB7XG4gICAgLy8gY29uc29sZS5sb2coaGFuZGxlKTtcbiAgICB2YXIgJHNsaWRlciA9IGhhbmRsZS5wYXJlbnQoKTtcbiAgICB2YXIgaGFuZGxlSW5kZXggPSAkc2xpZGVyLmZpbmQoJy51aS1zbGlkZXItaGFuZGxlJykuaW5kZXgoaGFuZGxlKTtcbiAgICB2YXIgdmFsdWVzID0gJHNsaWRlci5zbGlkZXIoJ3ZhbHVlcycpO1xuICAgIC8vIGNvbnNvbCgnb2xkIHZhbHVlcycsIHZhbHVlcyk7XG4gICAgLy8gY29uc29sKGhhbmRsZUluZGV4KTtcbiAgICB2YWx1ZXMuc3BsaWNlKGhhbmRsZUluZGV4LCAxKTtcbiAgICAvLyBjb25zb2woJ25ldyB2YWx1ZXMnLCB2YWx1ZXMpO1xuICAgICRzbGlkZXIuc2xpZGVyKCdkZXN0cm95Jyk7XG4gICAgaW5pdFNsaWRlcigkc2xpZGVyLCB2YWx1ZXMpO1xufVxuXG5mdW5jdGlvbiBzZXRXZWVrVGV4dChzbGlkZUluZGV4KSB7XG4gICAgdmFyIHN0YXJ0TSA9IHN0YXJ0TW9tZW50LmNsb25lKCk7XG4gICAgdmFyIG0gPSBzbGlkZUluZGV4ID8gc3RhcnRNLmFkZChzbGlkZUluZGV4LCAndycpIDogc3RhcnRNO1xuICAgIHZhciBtb25kYXkgPSBtLmlzb1dlZWtkYXkoMSkuZm9ybWF0KCdERCcpO1xuICAgIHZhciBzdW5kYXkgPSBtLmlzb1dlZWtkYXkoNykuZm9ybWF0KCdERCcpO1xuICAgIHZhciB0aGlzTW9udGggPSBtLmZvcm1hdCgnTU0nKTtcbiAgICAkKCcuaXRlbS13ZWVrJykuaHRtbCgnV2VlayAnICsgbW9uZGF5ICsgJy0nICsgc3VuZGF5ICsgJy4nICsgdGhpc01vbnRoKTtcbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlQWxsSGFuZGxlcygpIHtcbiAgICB2YXIgY2FsY3VsYXRlZE1vbWVudHMgPSBbXTsgLy8gZmluYWwgYXJyYXlcbiAgICBjb25zb2xlLmxvZygnY2FsY3VsYXRpbmcgbW9tZW50cy4uLicpO1xuICAgIHZhciBhbGxGbGV4U2xpZGVzID0gJCgnLmZsZXhzbGlkZXIgLnNsaWRlcyAuaXRlbTpub3QoLmNsb25lKScpO1xuICAgIGFsbEZsZXhTbGlkZXMuZWFjaChmdW5jdGlvbiAoaSwgc2xpZGUpIHtcbiAgICAgICAgdmFyIHdlZWsgPSBzdGFydE1vbWVudC53ZWVrKCkgKyBpO1xuICAgICAgICB2YXIgYWxsV2Vla1NsaWRlcnMgPSAkKHNsaWRlKS5maW5kKCcuZGVmYXVsdC13cmFwID4gZGl2Jyk7XG4gICAgICAgIGFsbFdlZWtTbGlkZXJzLmVhY2goZnVuY3Rpb24gKGksIHNsaWRlcikge1xuICAgICAgICAgICAgdmFyIGRheSA9IDEgKyBpO1xuICAgICAgICAgICAgaWYgKCQoc2xpZGVyKS5oYXNDbGFzcygnYWN0aXZlLXNsaWRlcicpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlcyA9ICQoc2xpZGVyKS5zbGlkZXIoJ3ZhbHVlcycpO1xuICAgICAgICAgICAgICAgIHZhciBob3VycyA9IHZhbHVlcy5tYXAoZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAyMyAtIGVsO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGhvdXJzLmZvckVhY2goZnVuY3Rpb24gKGhvdXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsY3VsYXRlZE1vbWVudHMucHVzaChtb21lbnQoKS55ZWFyKHN0YXJ0TW9tZW50LnllYXIoKSkubW9udGgoc3RhcnRNb21lbnQubW9udGgoKSkud2Vlayh3ZWVrKS5kYXkoZGF5KS5ob3VyKGhvdXIpLm1pbnV0ZSgwKS5zZWNvbmQoMCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICAvLyBhZGRpdGlvbmFsIHZhbGlkYXRpbmcsIGluY2FzZSBoYW5kbGVzIHdlbnQgdG8gcGFzdCBkYXlzL2hvdXJzXG4gICAgY2FsY3VsYXRlZE1vbWVudHMgPSBjYWxjdWxhdGVkTW9tZW50cy5maWx0ZXIoZnVuY3Rpb24gKG1vbSkge1xuICAgICAgICB2YXIgY2FudEdvUGFzdCA9IHN0YXJ0TW9tZW50LmNsb25lKCkuaG91cihzdGFydEhvdXIgKyAxKS5taW51dGUoMCkuc2Vjb25kKDApO1xuICAgICAgICByZXR1cm4gbW9tLnVuaXgoKSA+PSBjYW50R29QYXN0LnVuaXgoKTtcbiAgICB9KTtcblxuICAgIHZhciBpbkNvbnNvbGUgPSBjYWxjdWxhdGVkTW9tZW50cy5tYXAoZnVuY3Rpb24gKG1vbSkge1xuICAgICAgICByZXR1cm4gbW9tLmZvcm1hdCgnTExMJyk7XG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZyhpbkNvbnNvbGUpO1xuICAgIGNvbnNvbGUubG9nKCdvYmplY3QgcmV0dXJuZWQgLT4gJywgY2FsY3VsYXRlZE1vbWVudHMpO1xufVxuXG59LHt9XX0se30sWzFdKTtcbiJdfQ==
