!function e(l,i,s){function n(d,t){if(!i[d]){if(!l[d]){var r="function"==typeof require&&require;if(!t&&r)return r(d,!0);if(a)return a(d,!0);var o=new Error("Cannot find module '"+d+"'");throw o.code="MODULE_NOT_FOUND",o}var c=i[d]={exports:{}};l[d][0].call(c.exports,function(e){var i=l[d][1][e];return n(i?i:e)},c,c.exports,e,l,i,s)}return i[d].exports}for(var a="function"==typeof require&&require,d=0;d<s.length;d++)n(s[d]);return n}({1:[function(e,l,i){"use strict";var s=e("./weeks");$(window).ready(function(){function e(e){var l=e?moment().week(e):moment(),i=l.isoWeekday(1).format("DD"),s=l.isoWeekday(7).format("DD"),n=l.format("MM");$(".item-week").html("Week "+i+"-"+s+"."+n)}var l=void 0;$(".on-btn").click(function(){if("none"==(l=document.getElementById("box").style.display)){document.getElementById("box").style.display="block",$(".flexslider").flexslider({animation:"slide",slideshow:!1,controlNav:!1,controlsContainer:$(".custom-controls-container"),customDirectionNav:$(".custom-navigation a"),keyboard:!1,animationLoop:!0,after:function(e){e.currentSlide==e.last&&((0,s.addLastWeekSlide)($(".flexslider")),console.log("last transition ended"))}});var e=moment().isoWeekday(),i=void 0;switch(e){case 1:i=".monday";break;case 2:i=".tuesday";break;case 3:i=".wednesday";break;case 4:i=".thursday";break;case 5:i=".friday";break;case 6:i=".saturday";break;case 7:i=".sunday"}(0,s.initSlider)($(".flex-active-slide").find(i))}else"block"==l&&(document.getElementById("box").style.display="none")}),$(".close-button").click(function(){document.getElementById("box").style.display="none"}),$(".switch-on").click(s.daytimeSliderChanges),$(".switch-off").click(s.daytimeSliderChanges);var i=moment().week(),n=moment().week();e(n),n==i?($(".flex-prev").hide(),$(".flex-prev-block").show()):($(".flex-prev-block").hide(),$(".flex-prev").show()),$(".flex-next").click(function(){$(".flex-prev").show(),$(".flex-prev-block").hide(),n==i?n=i+1:n==a?n=a+1:n+=1,e(n)});var a,d=n;$(".flex-prev").click(function(){if(n==i)return!1;n-=1,d=n,d==i?($(".flex-prev").hide(),$(".flex-prev-block").show()):($(".flex-prev").show(),$(".flex-prev-block").hide()),e(n),a=n}),$(".add-button").click(function(){(0,s.addHandle)()});var t=null;$(".del-button").mousedown(function(){console.log("delete"),console.log($(":focus")),t=$(":focus").hasClass("ui-slider-handle")?$(":focus"):null}),$(".del-button").click(function(){t&&(0,s.deleteHandle)(t)})})},{"./weeks":2}],2:[function(e,l,i){"use strict";function s(e){if(Array.isArray(e)){for(var l=0,i=Array(e.length);l<e.length;l++)i[l]=e[l];return i}return Array.from(e)}function n(e,l){return l&&(console.log("filtering...",e),e=e.filter(function(e){return e<=14&&e>=4})),console.log(e),e}function a(e){var l=23-(moment().hour()+1);return e&&(l<4?l=4:l>14&&(l=14)),l}function d(e,l){l=l?n(l,f):[a(f)],e.slider({orientation:"vertical",min:f?4:0,max:f?14:23,values:l,step:1,animate:!0,start:function(e,l){var i=23-l.value;u.text(i),u.show(),u.css("top",l.handle.getBoundingClientRect().top-10),u.css("left",l.handle.getBoundingClientRect().left+30)},slide:function(e,l){var i=[];console.log(l.values);for(var s=0;s<l.values.length;s++){if(i.indexOf(l.values[s])>-1)return!1;i.push(l.values[s])}var n=23-l.value;u.text(n),u.css("top",l.handle.getBoundingClientRect().top-10),u.css("left",l.handle.getBoundingClientRect().left+30),$(".contentSlider").html(n+" hour")},stop:function(){u.hide()}}),console.log("VALUES",l),0==l.length?e.removeClass("active-slider"):e.addClass("active-slider")}function t(){return $(".flexslider .slides .item:not(.clone)")}function r(e){var l=e.data("flexslider"),i=$('<li class="item">\n                                new\n                                <div class="item-week">\n                                </div>\n                                <div class="scale-wrapper">\n                                    <ul class="list-scale-wrap">\n                                        <li class="times-wrap-left">\n                                            <div class="time-min">00</div>\n                                            <div class="time-max">24</div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Mon</div>\n                                            <div class="add-times-left">\n                                                <div class="default-wrap">\n                                                    <div class="monday default-slider slide-active"></div>\n                                                </div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Tue</div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider  tuesday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Wed</div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider wednesday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Th</div>\n                                            <div></div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider thursday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Fr</div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider  friday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Sat</div>\n                                            <div class="default-wrap">\n                                                <div class="default-slider  saturday"></div>\n                                            </div>\n                                        </li>\n                                        <li class="scale-item">\n                                            <div class="day">Sun</div>\n                                            <div class="add-times-right">\n                                                <div class="default-wrap">\n                                                    <div class="default-slider  sunday"></div>\n                                                </div>\n                                            </div>\n                                        </li>\n                                        <li class="times-wrap-right">\n                                            <div class="time-min">00</div>\n                                            <div class="time-max">24</div>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </li>');l.addSlide(i)}function o(){f?($(".switch-on").removeClass("active"),$(".switch-off").addClass("active"),$(".default-wrap").addClass("slide-wrap"),$(".default-slider").addClass("slider"),$(".slider").removeClass("default-slider"),$(".slider").slider({min:0,max:23}),f=!1):0==f&&($(".switch-off").removeClass("active"),$(".switch-on").addClass("active"),$(".slide-wrap").addClass("default-wrap"),$(".default-wrap").removeClass("slide-wrap"),$(".slider").addClass("default-slider"),$(".default-slider").removeClass("slider"),f=!0,$(".default-slider.active-slider").each(function(e,l){var i=$(l).slider("values");$(l).slider("destroy"),d($(l),i)})),console.log($(".flex-active-slide .active-slider").slider("values"))}function c(){var e=$(".flex-active-slide"),l=e.find(".monday"),i=[];if(i=f?[4,5,6,7,8,9,10,11,12,13,14]:[].concat(s(new Array(24).keys())),l.hasClass("active-slider")){var n=l.slider("value"),a=l.slider("values");console.log(n,a);var t=a[a.length-1]-1;if(a.indexOf(t)===-1&&i.indexOf(t)!==-1)a.push(a[a.length-1]-1);else{i=i.filter(function(e){return a.indexOf(e)==-1});var r=i.randomElement();void 0!=r&&a.push(r),console.log(a)}l.slider("destroy"),d(l,a)}else d(l),l.addClass("active-slider");console.log(l.find(".ui-slider-handle:last")),l.find(".ui-slider-handle:last").focus()}function v(e){console.log(e);var l=e.parent(),i=l.find(".ui-slider-handle").index(e),s=l.slider("values");console.log("old values",s),console.log(i),s.splice(i,1),console.log("new values",s),l.slider("destroy"),d(l,s)}Object.defineProperty(i,"__esModule",{value:!0}),i.initSlider=d,i.getItems=t,i.addLastWeekSlide=r,i.daytimeSliderChanges=o,i.addHandle=c,i.deleteHandle=v,Array.prototype.randomElement=function(){return this[Math.floor(Math.random()*this.length)]};var u;$(window).ready(function(){$("body").append('<div id="slider-popup"></div>'),u=$("#slider-popup")});var f=!0},{}]},{},[1]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZSIsInQiLCJuIiwiciIsInMiLCJvIiwidSIsImEiLCJyZXF1aXJlIiwiaSIsImYiLCJFcnJvciIsImNvZGUiLCJsIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiX3dlZWtzIiwiJCIsIndpbmRvdyIsInJlYWR5Iiwic2V0V2Vla1RleHQiLCJ3ZWVrIiwibSIsIm1vbWVudCIsIm1vbmRheSIsImlzb1dlZWtkYXkiLCJmb3JtYXQiLCJzdW5kYXkiLCJ0aGlzTW9udGgiLCJodG1sIiwiZGlzcGxheSIsImNsaWNrIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiZmxleHNsaWRlciIsImFuaW1hdGlvbiIsInNsaWRlc2hvdyIsImNvbnRyb2xOYXYiLCJjb250cm9sc0NvbnRhaW5lciIsImN1c3RvbURpcmVjdGlvbk5hdiIsImtleWJvYXJkIiwiYW5pbWF0aW9uTG9vcCIsImFmdGVyIiwiY3R4IiwiY3VycmVudFNsaWRlIiwibGFzdCIsImFkZExhc3RXZWVrU2xpZGUiLCJjb25zb2xlIiwibG9nIiwiZGF5IiwiYWN0aXZlRWxlbSIsImluaXRTbGlkZXIiLCJmaW5kIiwiZGF5dGltZVNsaWRlckNoYW5nZXMiLCJ0aGlzV2VlayIsImhpZGUiLCJzaG93IiwicHJldldlZWsiLCJ0aGVXZWVrIiwiYWRkSGFuZGxlIiwiZm9jdXNFbGVtIiwibW91c2Vkb3duIiwiaGFzQ2xhc3MiLCJkZWxldGVIYW5kbGUiLCIuL3dlZWtzIiwiMiIsIl90b0NvbnN1bWFibGVBcnJheSIsImFyciIsIkFycmF5IiwiaXNBcnJheSIsImFycjIiLCJmcm9tIiwiZmlsdGVyVmFsdWVzIiwidmFsdWVzIiwiZGF5dGltZV9vbiIsImZpbHRlciIsInYiLCJnZXREZWZhdWx0VmFsdWUiLCJ2YWx1ZSIsImhvdXIiLCJzZWxlY3RvciIsInNsaWRlciIsIm9yaWVudGF0aW9uIiwibWluIiwibWF4Iiwic3RlcCIsImFuaW1hdGUiLCJzdGFydCIsInVpIiwic2xpZGVyUG9wdXAiLCJ0ZXh0IiwiY3NzIiwiaGFuZGxlIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwibGVmdCIsInNsaWRlIiwiZGlmZlZhbHVlcyIsImluZGV4T2YiLCJwdXNoIiwic3RvcCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJnZXRJdGVtcyIsImRhdGEiLCJ0ZW1wbGF0ZSIsImFkZFNsaWRlIiwiZWFjaCIsImVsIiwiYWN0aXZlIiwicG9zc2libGVBcnIiLCJjb25jYXQiLCJrZXlzIiwicG9zc2libGVOZXdWYWx1ZSIsIm51bSIsIm5ld1ZhbHVlIiwicmFuZG9tRWxlbWVudCIsInVuZGVmaW5lZCIsImZvY3VzIiwiJHNsaWRlciIsInBhcmVudCIsImhhbmRsZUluZGV4IiwiaW5kZXgiLCJzcGxpY2UiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInByb3RvdHlwZSIsInRoaXMiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJhcHBlbmQiXSwibWFwcGluZ3MiOiJDQUFBLFFBQVVBLEdBQUVDLEVBQUVDLEVBQUVDLEdBQUcsUUFBU0MsR0FBRUMsRUFBRUMsR0FBRyxJQUFJSixFQUFFRyxHQUFHLENBQUMsSUFBSUosRUFBRUksR0FBRyxDQUFDLEdBQUlFLEdBQWtCLGtCQUFUQyxVQUFxQkEsT0FBUSxLQUFJRixHQUFHQyxFQUFFLE1BQU9BLEdBQUVGLEdBQUUsRUFBSSxJQUFHSSxFQUFFLE1BQU9BLEdBQUVKLEdBQUUsRUFBSSxJQUFJSyxHQUFFLEdBQUlDLE9BQU0sdUJBQXVCTixFQUFFLElBQUssTUFBTUssR0FBRUUsS0FBSyxtQkFBbUJGLEVBQUUsR0FBSUcsR0FBRVgsRUFBRUcsSUFBSVMsV0FBWWIsR0FBRUksR0FBRyxHQUFHVSxLQUFLRixFQUFFQyxRQUFRLFNBQVNkLEdBQUcsR0FBSUUsR0FBRUQsRUFBRUksR0FBRyxHQUFHTCxFQUFHLE9BQU9JLEdBQUVGLEVBQUVBLEVBQUVGLElBQUlhLEVBQUVBLEVBQUVDLFFBQVFkLEVB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bnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX3dlZWtzID0gcmVxdWlyZSgnLi93ZWVrcycpO1xuXG4kKHdpbmRvdykucmVhZHkoZnVuY3Rpb24gKCkge1xuXG4gICAgLy8gIE9QRU4gV0lER0VUXG4gICAge1xuICAgICAgICB2YXIgZGlzcGxheSA9IHZvaWQgMDtcbiAgICAgICAgJCgnLm9uLWJ0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm94Jykuc3R5bGUuZGlzcGxheTtcbiAgICAgICAgICAgIGlmIChkaXNwbGF5ID09ICdub25lJykge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib3gnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICAgICAgICAgICAgICAgICQoJy5mbGV4c2xpZGVyJykuZmxleHNsaWRlcih7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogJ3NsaWRlJyxcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzaG93OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbE5hdjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzQ29udGFpbmVyOiAkKCcuY3VzdG9tLWNvbnRyb2xzLWNvbnRhaW5lcicpLFxuICAgICAgICAgICAgICAgICAgICBjdXN0b21EaXJlY3Rpb25OYXY6ICQoJy5jdXN0b20tbmF2aWdhdGlvbiBhJyksXG4gICAgICAgICAgICAgICAgICAgIGtleWJvYXJkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uTG9vcDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXI6IGZ1bmN0aW9uIGFmdGVyKGN0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0eC5jdXJyZW50U2xpZGUgPT0gY3R4Lmxhc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMCwgX3dlZWtzLmFkZExhc3RXZWVrU2xpZGUpKCQoJy5mbGV4c2xpZGVyJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsYXN0IHRyYW5zaXRpb24gZW5kZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gU2V0IEN1cnJlbnQgZGF5IHNsaWRlciBhY3RpdmUsIHdpdGggb25lIHZhbHVlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF5ID0gbW9tZW50KCkuaXNvV2Vla2RheSgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlRWxlbSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChkYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVFbGVtID0gJy5tb25kYXknO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUVsZW0gPSAnLnR1ZXNkYXknO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUVsZW0gPSAnLndlZG5lc2RheSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlRWxlbSA9ICcudGh1cnNkYXknO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUVsZW0gPSAnLmZyaWRheSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlRWxlbSA9ICcuc2F0dXJkYXknO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUVsZW0gPSAnLnN1bmRheSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKDAsIF93ZWVrcy5pbml0U2xpZGVyKSgkKCcuZmxleC1hY3RpdmUtc2xpZGUnKS5maW5kKGFjdGl2ZUVsZW0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRpc3BsYXkgPT0gJ2Jsb2NrJykge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib3gnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gQ0xPU0VTIFdJREdFVFxuICAgICQoJy5jbG9zZS1idXR0b24nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib3gnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH0pO1xuXG4gICAgLy8gREFZVElNRSBPTkxZIE9GRiBPUiBPTlxuXG5cbiAgICAkKCcuc3dpdGNoLW9uJykuY2xpY2soX3dlZWtzLmRheXRpbWVTbGlkZXJDaGFuZ2VzKTtcbiAgICAkKCcuc3dpdGNoLW9mZicpLmNsaWNrKF93ZWVrcy5kYXl0aW1lU2xpZGVyQ2hhbmdlcyk7XG5cbiAgICAvLyBXaGVuIGNsaWNraW5nIG9uIHRoZSBhcnJvd3MgZ2VuZXJhdGUgd2VlayB0ZXh0XG4gICAgZnVuY3Rpb24gc2V0V2Vla1RleHQod2Vlaykge1xuICAgICAgICB2YXIgbSA9IHdlZWsgPyBtb21lbnQoKS53ZWVrKHdlZWspIDogbW9tZW50KCk7XG4gICAgICAgIHZhciBtb25kYXkgPSBtLmlzb1dlZWtkYXkoMSkuZm9ybWF0KCdERCcpO1xuICAgICAgICB2YXIgc3VuZGF5ID0gbS5pc29XZWVrZGF5KDcpLmZvcm1hdCgnREQnKTtcbiAgICAgICAgdmFyIHRoaXNNb250aCA9IG0uZm9ybWF0KCdNTScpO1xuICAgICAgICAkKCcuaXRlbS13ZWVrJykuaHRtbCgnV2VlayAnICsgbW9uZGF5ICsgJy0nICsgc3VuZGF5ICsgJy4nICsgdGhpc01vbnRoKTtcbiAgICB9XG5cbiAgICB2YXIgdGhpc1dlZWsgPSBtb21lbnQoKS53ZWVrKCk7XG4gICAgdmFyIHdlZWsgPSBtb21lbnQoKS53ZWVrKCk7XG4gICAgc2V0V2Vla1RleHQod2Vlayk7XG4gICAgaWYgKHdlZWsgPT0gdGhpc1dlZWspIHtcbiAgICAgICAgJCgnLmZsZXgtcHJldicpLmhpZGUoKTtcbiAgICAgICAgJCgnLmZsZXgtcHJldi1ibG9jaycpLnNob3coKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKCcuZmxleC1wcmV2LWJsb2NrJykuaGlkZSgpO1xuICAgICAgICAkKCcuZmxleC1wcmV2Jykuc2hvdygpO1xuICAgIH1cblxuICAgICQoJy5mbGV4LW5leHQnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5mbGV4LXByZXYnKS5zaG93KCk7XG4gICAgICAgICQoJy5mbGV4LXByZXYtYmxvY2snKS5oaWRlKCk7XG5cbiAgICAgICAgaWYgKHdlZWsgPT0gdGhpc1dlZWspIHtcbiAgICAgICAgICAgIHdlZWsgPSB0aGlzV2VlayArIDE7XG4gICAgICAgIH0gZWxzZSBpZiAod2VlayA9PSBwcmV2V2Vlaykge1xuICAgICAgICAgICAgd2VlayA9IHByZXZXZWVrICsgMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdlZWsgPSB3ZWVrICsgMTtcbiAgICAgICAgfVxuICAgICAgICBzZXRXZWVrVGV4dCh3ZWVrKTtcbiAgICB9KTtcblxuICAgIHZhciB0aGVXZWVrID0gd2VlaztcbiAgICB2YXIgcHJldldlZWs7XG4gICAgJCgnLmZsZXgtcHJldicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHdlZWsgPT0gdGhpc1dlZWspIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdlZWsgPSB3ZWVrIC0gMTtcbiAgICAgICAgfVxuICAgICAgICB0aGVXZWVrID0gd2VlaztcbiAgICAgICAgaWYgKHRoZVdlZWsgPT0gdGhpc1dlZWspIHtcbiAgICAgICAgICAgICQoJy5mbGV4LXByZXYnKS5oaWRlKCk7XG4gICAgICAgICAgICAkKCcuZmxleC1wcmV2LWJsb2NrJykuc2hvdygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCgnLmZsZXgtcHJldicpLnNob3coKTtcbiAgICAgICAgICAgICQoJy5mbGV4LXByZXYtYmxvY2snKS5oaWRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBzZXRXZWVrVGV4dCh3ZWVrKTtcblxuICAgICAgICBwcmV2V2VlayA9IHdlZWs7XG4gICAgfSk7XG5cbiAgICAvLyBBREQgQU5EIERFTCBCVVRUT05cblxuICAgICQoJy5hZGQtYnV0dG9uJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAoMCwgX3dlZWtzLmFkZEhhbmRsZSkoKTtcbiAgICB9KTtcbiAgICB7XG4gICAgICAgIHZhciBmb2N1c0VsZW0gPSBudWxsO1xuICAgICAgICAkKCcuZGVsLWJ1dHRvbicpLm1vdXNlZG93bihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZGVsZXRlJyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygkKCc6Zm9jdXMnKSk7XG4gICAgICAgICAgICAkKCc6Zm9jdXMnKS5oYXNDbGFzcygndWktc2xpZGVyLWhhbmRsZScpID8gZm9jdXNFbGVtID0gJCgnOmZvY3VzJykgOiBmb2N1c0VsZW0gPSBudWxsO1xuICAgICAgICB9KTtcbiAgICAgICAgJCgnLmRlbC1idXR0b24nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoZm9jdXNFbGVtKSB7XG4gICAgICAgICAgICAgICAgKDAsIF93ZWVrcy5kZWxldGVIYW5kbGUpKGZvY3VzRWxlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG4vLyBUT0RPIGFkZCBidXR0b24gLSBhZGQgYSBuZXcgc2xpZGVyIHRvIG1vbmRheVxuLy8gVE9ETyBkcmFnIGFuZCBkcm9wIGhhbmRsZXNcbi8vIFRPRE8gZmluYWwgY2FsY3VsYXRpb25zIGZ1bmN0aW9uXG4vLyBUT0RPIGhhbmRsZSBjdXN0b20gc2l6ZT8/P1xuXG59LHtcIi4vd2Vla3NcIjoyfV0sMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuaW5pdFNsaWRlciA9IGluaXRTbGlkZXI7XG5leHBvcnRzLmdldEl0ZW1zID0gZ2V0SXRlbXM7XG5leHBvcnRzLmFkZExhc3RXZWVrU2xpZGUgPSBhZGRMYXN0V2Vla1NsaWRlO1xuZXhwb3J0cy5kYXl0aW1lU2xpZGVyQ2hhbmdlcyA9IGRheXRpbWVTbGlkZXJDaGFuZ2VzO1xuZXhwb3J0cy5hZGRIYW5kbGUgPSBhZGRIYW5kbGU7XG5leHBvcnRzLmRlbGV0ZUhhbmRsZSA9IGRlbGV0ZUhhbmRsZTtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cbkFycmF5LnByb3RvdHlwZS5yYW5kb21FbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMubGVuZ3RoKV07XG59O1xudmFyIHNsaWRlclBvcHVwO1xuJCh3aW5kb3cpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwic2xpZGVyLXBvcHVwXCI+PC9kaXY+Jyk7XG4gICAgc2xpZGVyUG9wdXAgPSAkKCcjc2xpZGVyLXBvcHVwJyk7XG59KTtcbnZhciBkYXl0aW1lX29uID0gdHJ1ZTtcbmZ1bmN0aW9uIGZpbHRlclZhbHVlcyh2YWx1ZXMsIGRheXRpbWVfb24pIHtcbiAgICBpZiAoZGF5dGltZV9vbikge1xuICAgICAgICBjb25zb2xlLmxvZygnZmlsdGVyaW5nLi4uJywgdmFsdWVzKTtcbiAgICAgICAgdmFsdWVzID0gdmFsdWVzLmZpbHRlcihmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgaWYgKHYgPD0gMTQgJiYgdiA+PSA0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKHZhbHVlcyk7XG4gICAgcmV0dXJuIHZhbHVlcztcbn1cbmZ1bmN0aW9uIGdldERlZmF1bHRWYWx1ZShkYXl0aW1lX29uKSB7XG4gICAgdmFyIHZhbHVlID0gMjMgLSAobW9tZW50KCkuaG91cigpICsgMSk7XG4gICAgaWYgKGRheXRpbWVfb24pIHtcbiAgICAgICAgaWYgKHZhbHVlIDwgNCkgdmFsdWUgPSA0O2Vsc2UgaWYgKHZhbHVlID4gMTQpIHZhbHVlID0gMTQ7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGluaXRTbGlkZXIoc2VsZWN0b3IsIHZhbHVlcykge1xuICAgIHZhbHVlcyA9IHZhbHVlcyA/IGZpbHRlclZhbHVlcyh2YWx1ZXMsIGRheXRpbWVfb24pIDogW2dldERlZmF1bHRWYWx1ZShkYXl0aW1lX29uKV07XG4gICAgc2VsZWN0b3Iuc2xpZGVyKHtcbiAgICAgICAgb3JpZW50YXRpb246ICd2ZXJ0aWNhbCcsXG4gICAgICAgIG1pbjogZGF5dGltZV9vbiA/IDQgOiAwLFxuICAgICAgICBtYXg6IGRheXRpbWVfb24gPyAxNCA6IDIzLFxuICAgICAgICB2YWx1ZXM6IHZhbHVlcyxcbiAgICAgICAgc3RlcDogMSxcbiAgICAgICAgYW5pbWF0ZTogdHJ1ZSxcbiAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uIHN0YXJ0KGUsIHVpKSB7XG4gICAgICAgICAgICB2YXIgdiA9IDIzIC0gdWkudmFsdWU7XG4gICAgICAgICAgICBzbGlkZXJQb3B1cC50ZXh0KHYpO1xuICAgICAgICAgICAgc2xpZGVyUG9wdXAuc2hvdygpO1xuICAgICAgICAgICAgc2xpZGVyUG9wdXAuY3NzKCd0b3AnLCB1aS5oYW5kbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gMTApO1xuICAgICAgICAgICAgc2xpZGVyUG9wdXAuY3NzKCdsZWZ0JywgdWkuaGFuZGxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgKyAzMCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNsaWRlOiBmdW5jdGlvbiBzbGlkZShlLCB1aSkge1xuICAgICAgICAgICAgdmFyIGRpZmZWYWx1ZXMgPSBbXTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHVpLnZhbHVlcyk7XG4gICAgICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IHVpLnZhbHVlcy5sZW5ndGg7IGErKykge1xuICAgICAgICAgICAgICAgIGlmIChkaWZmVmFsdWVzLmluZGV4T2YodWkudmFsdWVzW2FdKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkaWZmVmFsdWVzLnB1c2godWkudmFsdWVzW2FdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB2ID0gMjMgLSB1aS52YWx1ZTtcbiAgICAgICAgICAgIHNsaWRlclBvcHVwLnRleHQodik7XG4gICAgICAgICAgICBzbGlkZXJQb3B1cC5jc3MoJ3RvcCcsIHVpLmhhbmRsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSAxMCk7XG4gICAgICAgICAgICBzbGlkZXJQb3B1cC5jc3MoJ2xlZnQnLCB1aS5oYW5kbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCArIDMwKTtcbiAgICAgICAgICAgICQoXCIuY29udGVudFNsaWRlclwiKS5odG1sKHYgKyAnIGhvdXInKTtcbiAgICAgICAgfSxcbiAgICAgICAgc3RvcDogZnVuY3Rpb24gc3RvcCgpIHtcbiAgICAgICAgICAgIHNsaWRlclBvcHVwLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKCdWQUxVRVMnLCB2YWx1ZXMpO1xuICAgIGlmICh2YWx1ZXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgc2VsZWN0b3IucmVtb3ZlQ2xhc3MoJ2FjdGl2ZS1zbGlkZXInKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzZWxlY3Rvci5hZGRDbGFzcygnYWN0aXZlLXNsaWRlcicpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0SXRlbXMoKSB7XG4gICAgcmV0dXJuICQoJy5mbGV4c2xpZGVyIC5zbGlkZXMgLml0ZW06bm90KC5jbG9uZSknKTtcbn1cblxuZnVuY3Rpb24gYWRkTGFzdFdlZWtTbGlkZShzZWxlY3Rvcikge1xuICAgIHZhciBjdHggPSBzZWxlY3Rvci5kYXRhKCdmbGV4c2xpZGVyJyk7XG5cbiAgICB2YXIgdGVtcGxhdGUgPSAkKCc8bGkgY2xhc3M9XCJpdGVtXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpdGVtLXdlZWtcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNjYWxlLXdyYXBwZXJcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJsaXN0LXNjYWxlLXdyYXBcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwidGltZXMtd3JhcC1sZWZ0XCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGltZS1taW5cIj4wMDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRpbWUtbWF4XCI+MjQ8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwic2NhbGUtaXRlbVwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheVwiPk1vbjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFkZC10aW1lcy1sZWZ0XCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtd3JhcFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9uZGF5IGRlZmF1bHQtc2xpZGVyIHNsaWRlLWFjdGl2ZVwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInNjYWxlLWl0ZW1cIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXlcIj5UdWU8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXdyYXBcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVmYXVsdC1zbGlkZXIgIHR1ZXNkYXlcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJzY2FsZS1pdGVtXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5XCI+V2VkPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVmYXVsdC13cmFwXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtc2xpZGVyIHdlZG5lc2RheVwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInNjYWxlLWl0ZW1cIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXlcIj5UaDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXdyYXBcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVmYXVsdC1zbGlkZXIgdGh1cnNkYXlcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJzY2FsZS1pdGVtXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5XCI+RnI8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXdyYXBcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVmYXVsdC1zbGlkZXIgIGZyaWRheVwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInNjYWxlLWl0ZW1cIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXlcIj5TYXQ8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXdyYXBcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVmYXVsdC1zbGlkZXIgIHNhdHVyZGF5XCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwic2NhbGUtaXRlbVwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheVwiPlN1bjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFkZC10aW1lcy1yaWdodFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWZhdWx0LXdyYXBcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlZmF1bHQtc2xpZGVyICBzdW5kYXlcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJ0aW1lcy13cmFwLXJpZ2h0XCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGltZS1taW5cIj4wMDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRpbWUtbWF4XCI+MjQ8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+Jyk7XG4gICAgY3R4LmFkZFNsaWRlKHRlbXBsYXRlKTtcbn1cblxuZnVuY3Rpb24gZGF5dGltZVNsaWRlckNoYW5nZXMoKSB7XG4gICAgaWYgKGRheXRpbWVfb24pIHtcbiAgICAgICAgJCgnLnN3aXRjaC1vbicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJCgnLnN3aXRjaC1vZmYnKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICQoJy5kZWZhdWx0LXdyYXAnKS5hZGRDbGFzcygnc2xpZGUtd3JhcCcpO1xuICAgICAgICAkKCcuZGVmYXVsdC1zbGlkZXInKS5hZGRDbGFzcygnc2xpZGVyJyk7XG4gICAgICAgICQoJy5zbGlkZXInKS5yZW1vdmVDbGFzcygnZGVmYXVsdC1zbGlkZXInKTtcblxuICAgICAgICAkKCcuc2xpZGVyJykuc2xpZGVyKHtcbiAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgIG1heDogMjNcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGF5dGltZV9vbiA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoZGF5dGltZV9vbiA9PSBmYWxzZSkge1xuICAgICAgICAkKCcuc3dpdGNoLW9mZicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJCgnLnN3aXRjaC1vbicpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJCgnLnNsaWRlLXdyYXAnKS5hZGRDbGFzcygnZGVmYXVsdC13cmFwJyk7XG4gICAgICAgICQoJy5kZWZhdWx0LXdyYXAnKS5yZW1vdmVDbGFzcygnc2xpZGUtd3JhcCcpO1xuICAgICAgICAkKCcuc2xpZGVyJykuYWRkQ2xhc3MoJ2RlZmF1bHQtc2xpZGVyJyk7XG4gICAgICAgICQoJy5kZWZhdWx0LXNsaWRlcicpLnJlbW92ZUNsYXNzKCdzbGlkZXInKTtcblxuICAgICAgICBkYXl0aW1lX29uID0gdHJ1ZTtcbiAgICAgICAgJCgnLmRlZmF1bHQtc2xpZGVyLmFjdGl2ZS1zbGlkZXInKS5lYWNoKGZ1bmN0aW9uIChpLCBlbCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlcyA9ICQoZWwpLnNsaWRlcigndmFsdWVzJyk7XG4gICAgICAgICAgICAkKGVsKS5zbGlkZXIoJ2Rlc3Ryb3knKTtcbiAgICAgICAgICAgIGluaXRTbGlkZXIoJChlbCksIHZhbHVlcyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygkKCcuZmxleC1hY3RpdmUtc2xpZGUgLmFjdGl2ZS1zbGlkZXInKS5zbGlkZXIoJ3ZhbHVlcycpKTtcbn1cblxuZnVuY3Rpb24gYWRkSGFuZGxlKCkge1xuICAgIHZhciBhY3RpdmUgPSAkKCcuZmxleC1hY3RpdmUtc2xpZGUnKTtcbiAgICB2YXIgbW9uZGF5ID0gYWN0aXZlLmZpbmQoJy5tb25kYXknKTtcbiAgICB2YXIgcG9zc2libGVBcnIgPSBbXTtcbiAgICAvLyBhIGxpc3Qgb2YgcG9zc2libGUgaGFuZGxlIHZhbHVlcyB3aGljaCBjYW4gYmUgYWRkZWRcbiAgICBpZiAoZGF5dGltZV9vbikgcG9zc2libGVBcnIgPSBbNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExLCAxMiwgMTMsIDE0XTtlbHNlIHtcbiAgICAgICAgcG9zc2libGVBcnIgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KG5ldyBBcnJheSgyNCkua2V5cygpKSk7XG4gICAgfVxuXG4gICAgaWYgKCFtb25kYXkuaGFzQ2xhc3MoJ2FjdGl2ZS1zbGlkZXInKSkge1xuICAgICAgICBpbml0U2xpZGVyKG1vbmRheSk7XG4gICAgICAgIG1vbmRheS5hZGRDbGFzcygnYWN0aXZlLXNsaWRlcicpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IG1vbmRheS5zbGlkZXIoJ3ZhbHVlJyk7XG4gICAgICAgIHZhciB2YWx1ZXMgPSBtb25kYXkuc2xpZGVyKCd2YWx1ZXMnKTtcbiAgICAgICAgY29uc29sZS5sb2codmFsdWUsIHZhbHVlcyk7XG4gICAgICAgIHZhciBwb3NzaWJsZU5ld1ZhbHVlID0gdmFsdWVzW3ZhbHVlcy5sZW5ndGggLSAxXSAtIDE7XG4gICAgICAgIGlmICh2YWx1ZXMuaW5kZXhPZihwb3NzaWJsZU5ld1ZhbHVlKSA9PT0gLTEgJiYgcG9zc2libGVBcnIuaW5kZXhPZihwb3NzaWJsZU5ld1ZhbHVlKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKHZhbHVlc1t2YWx1ZXMubGVuZ3RoIC0gMV0gLSAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBvc3NpYmxlQXJyID0gcG9zc2libGVBcnIuZmlsdGVyKGZ1bmN0aW9uIChudW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzLmluZGV4T2YobnVtKSA9PSAtMTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3Bvc3NpYmxlIHJhbmRvbSB2YWx1ZXMnLCBwb3NzaWJsZUFycik7XG4gICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBwb3NzaWJsZUFyci5yYW5kb21FbGVtZW50KCk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncmFuZG9tIG5ldyB2YWx1ZScsIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgIGlmIChuZXdWYWx1ZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaChuZXdWYWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdubyBjaG9pY2VzIGxlZnQhIE5vdGhpbmcgdG8gYWRkJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgbW9uZGF5LnNsaWRlcignZGVzdHJveScpO1xuICAgICAgICBpbml0U2xpZGVyKG1vbmRheSwgdmFsdWVzKTtcbiAgICB9XG4gICAgY29uc29sZS5sb2cobW9uZGF5LmZpbmQoJy51aS1zbGlkZXItaGFuZGxlOmxhc3QnKSk7XG4gICAgbW9uZGF5LmZpbmQoJy51aS1zbGlkZXItaGFuZGxlOmxhc3QnKS5mb2N1cygpO1xufVxuXG5mdW5jdGlvbiBkZWxldGVIYW5kbGUoaGFuZGxlKSB7XG4gICAgY29uc29sZS5sb2coaGFuZGxlKTtcbiAgICB2YXIgJHNsaWRlciA9IGhhbmRsZS5wYXJlbnQoKTtcbiAgICB2YXIgaGFuZGxlSW5kZXggPSAkc2xpZGVyLmZpbmQoJy51aS1zbGlkZXItaGFuZGxlJykuaW5kZXgoaGFuZGxlKTtcbiAgICB2YXIgdmFsdWVzID0gJHNsaWRlci5zbGlkZXIoJ3ZhbHVlcycpO1xuICAgIGNvbnNvbGUubG9nKCdvbGQgdmFsdWVzJywgdmFsdWVzKTtcbiAgICBjb25zb2xlLmxvZyhoYW5kbGVJbmRleCk7XG4gICAgdmFsdWVzLnNwbGljZShoYW5kbGVJbmRleCwgMSk7XG4gICAgY29uc29sZS5sb2coJ25ldyB2YWx1ZXMnLCB2YWx1ZXMpO1xuICAgICRzbGlkZXIuc2xpZGVyKCdkZXN0cm95Jyk7XG4gICAgaW5pdFNsaWRlcigkc2xpZGVyLCB2YWx1ZXMpO1xufVxuXG59LHt9XX0se30sWzFdKTtcbiJdfQ==
